import{a as J,b as O,d as _,r as h,j as e,L as Y,i as y,k as w,S as E}from"./index-JZ6ol5JH.js";import{b as q}from"./geminiAIService-ChQR1WGd.js";import{L as P,T as z}from"./triangle-alert-5fd7NtS9.js";import{A as H}from"./arrow-left-DOWo8-TZ.js";import{C as U}from"./circle-alert-BFAKDRlj.js";import{C as G}from"./calendar-BhzatbzU.js";import{F as K,J as Q}from"./japanese-yen-CHZYKVWf.js";import{D as V}from"./download-BBhr8FL2.js";import{R as W}from"./refresh-cw-pMjdnsSF.js";import{T as X}from"./target-CdD9cCbr.js";import{I as Z}from"./info-DNAWOng_.js";import{C as ee}from"./circle-check-big-DBqXLT9V.js";const te=d=>`${d}æœˆ`,j=d=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),I=(d,u)=>u===0?d>0?100:0:(d-u)/u*100,pe=()=>{const{user:d}=J(),{currentBusinessType:u}=O(),S=(u==null?void 0:u.business_type)||"individual",{transactions:p,loading:$}=_(d==null?void 0:d.id,S),[l,k]=h.useState("yearly"),[i,M]=h.useState(new Date().getFullYear().toString()),[x,v]=h.useState((new Date().getMonth()+1).toString().padStart(2,"0")),C=h.useMemo(()=>{const t=new Date().getFullYear();return Array.from({length:5},(s,r)=>t-r)},[]),g=h.useMemo(()=>p.filter(t=>{const s=new Date(t.date),r=s.getFullYear().toString(),n=(s.getMonth()+1).toString().padStart(2,"0");if(l==="yearly")return r===i;if(l==="monthly")return r===i&&n===x;if(l==="quarterly"){const m=Math.floor(s.getMonth()/3)+1,o=Math.floor((parseInt(x)-1)/3)+1;return r===i&&m===o}return!0}),[p,l,i,x]),f=h.useMemo(()=>{const t={};for(let s=1;s<=12;s++){const r=`${i}-${s.toString().padStart(2,"0")}`;t[r]={revenue:0,expense:0}}return p.forEach(s=>{const r=new Date(s.date);if(r.getFullYear().toString()===i){const n=`${i}-${(r.getMonth()+1).toString().padStart(2,"0")}`;t[n]&&(s.type==="income"?t[n].revenue+=s.amount:t[n].expense+=s.amount)}}),Object.entries(t).sort(([s],[r])=>s.localeCompare(r)).map(([s,r])=>({month:te(parseInt(s.split("-")[1])),monthKey:s,revenue:r.revenue,expense:r.expense,profit:r.revenue-r.expense}))},[p,i]),a=h.useMemo(()=>{const t=g.filter(r=>r.type==="income").reduce((r,n)=>r+n.amount,0),s=g.filter(r=>r.type==="expense").reduce((r,n)=>r+n.amount,0);return{revenue:t,expense:s,profit:t-s}},[g]),c=h.useMemo(()=>{const s=(()=>{const o=l==="yearly"?(parseInt(i)-1).toString():i,b=l==="monthly"?parseInt(x)===1?"12":(parseInt(x)-1).toString().padStart(2,"0"):x;return p.filter(F=>{const D=new Date(F.date),T=D.getFullYear().toString(),B=(D.getMonth()+1).toString().padStart(2,"0");if(l==="yearly")return T===o;if(l==="monthly"){const R=parseInt(x)===1?(parseInt(i)-1).toString():i;return T===R&&B===b}return!1})})(),r=s.filter(o=>o.type==="income").reduce((o,b)=>o+b.amount,0),n=s.filter(o=>o.type==="expense").reduce((o,b)=>o+b.amount,0),m=r-n;return{revenue:I(a.revenue,r),expense:I(a.expense,n),profit:I(a.profit,m)}},[p,a,l,i,x]),N=h.useMemo(()=>{const t={},s={};g.forEach(n=>{const m=n.category||"ãã®ä»–";n.type==="income"?(t[m]||(t[m]={amount:0,count:0}),t[m].amount+=n.amount,t[m].count+=1):(s[m]||(s[m]={amount:0,count:0}),s[m].amount+=n.amount,s[m].count+=1)});const r=(n,m)=>Object.entries(n).map(([o,{amount:b,count:F}])=>({category:o,amount:b,count:F,percentage:m>0?b/m*100:0})).sort((o,b)=>b.amount-o.amount);return{income:r(t,a.revenue),expense:r(s,a.expense)}},[g,a]),L=()=>{const t=[["æœŸé–“",l==="yearly"?`${i}å¹´`:`${i}å¹´${x}æœˆ`],[""],["ã‚µãƒžãƒªãƒ¼"],["å£²ä¸Šé«˜",a.revenue],["çµŒè²»",a.expense],["åˆ©ç›Š",a.profit],[""],["æœˆæ¬¡ãƒ‡ãƒ¼ã‚¿"],["æœˆ","å£²ä¸Šé«˜","çµŒè²»","åˆ©ç›Š"],...f.map(n=>[n.month,n.revenue,n.expense,n.profit]),[""],["ã‚«ãƒ†ã‚´ãƒªåˆ¥å£²ä¸Š"],["ã‚«ãƒ†ã‚´ãƒª","é‡‘é¡","ä»¶æ•°","å‰²åˆ"],...N.income.map(n=>[n.category,n.amount,n.count,`${n.percentage.toFixed(1)}%`]),[""],["ã‚«ãƒ†ã‚´ãƒªåˆ¥çµŒè²»"],["ã‚«ãƒ†ã‚´ãƒª","é‡‘é¡","ä»¶æ•°","å‰²åˆ"],...N.expense.map(n=>[n.category,n.amount,n.count,`${n.percentage.toFixed(1)}%`])].map(n=>n.join(",")).join(`
`),s=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=`çµŒå–¶åˆ†æžãƒ¬ãƒãƒ¼ãƒˆ_${i}${l==="monthly"?x:""}.csv`,r.click()},A=h.useMemo(()=>{const t=Math.max(...f.map(r=>r.revenue),1),s=Math.max(...f.map(r=>r.expense),1);return Math.max(t,s)},[f]);return $?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"w-12 h-12 text-primary animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-text-muted",children:"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Y,{to:"/dashboard",className:"mr-4",children:e.jsx(H,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main",children:"çµŒå–¶åˆ†æž"})]}),p.length===0&&e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-8 mb-6 text-center",children:[e.jsx(U,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-2",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-text-muted mb-4",children:"çµŒå–¶åˆ†æžã‚’è¡Œã†ã«ã¯ã€å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚"}),e.jsx(Y,{to:"/receipt-processing",className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"ãƒ¬ã‚·ãƒ¼ãƒˆã‚’ç™»éŒ²ã™ã‚‹"})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4 md:mb-0",children:"è²¡å‹™çŠ¶æ³"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"w-4 h-4 text-text-muted mr-2"}),e.jsxs("select",{value:l,onChange:t=>k(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"monthly",children:"æœˆæ¬¡"}),e.jsx("option",{value:"quarterly",children:"å››åŠæœŸ"}),e.jsx("option",{value:"yearly",children:"å¹´æ¬¡"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 text-text-muted mr-2"}),e.jsx("select",{value:i,onChange:t=>M(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:C.map(t=>e.jsxs("option",{value:t.toString(),children:[t,"å¹´"]},t))})]}),l==="monthly"&&e.jsx("select",{value:x,onChange:t=>v(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:Array.from({length:12},(t,s)=>s+1).map(t=>e.jsxs("option",{value:t.toString().padStart(2,"0"),children:[t,"æœˆ"]},t))}),e.jsxs("button",{onClick:L,className:"flex items-center px-3 py-1 bg-surface text-text-main border border-border rounded-md hover:bg-surface-highlight transition-colors text-sm",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[e.jsx("div",{className:"bg-blue-500/10 rounded-lg p-4 sm:p-5 border border-blue-500/20 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg flex-shrink-0",children:e.jsx(y,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"å£²ä¸Šé«˜"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(a.revenue)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${c.revenue>=0?"text-green-500":"text-red-500"}`,children:[c.revenue>=0?e.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",c.revenue>=0?"+":"",c.revenue.toFixed(1),"%"]})]})]})]})}),e.jsx("div",{className:"bg-red-500/10 rounded-lg p-4 sm:p-5 border border-red-500/20 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg flex-shrink-0",children:e.jsx(w,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"çµŒè²»"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(a.expense)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${c.expense<=0?"text-green-500":"text-red-500"}`,children:[c.expense>=0?e.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",c.expense>=0?"+":"",c.expense.toFixed(1),"%"]})]})]})]})}),e.jsx("div",{className:`${a.profit>=0?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"} rounded-lg p-4 sm:p-5 border overflow-hidden`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${a.profit>=0?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(Q,{className:`w-5 h-5 sm:w-6 sm:h-6 ${a.profit>=0?"text-green-500":"text-red-500"}`})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"åˆ©ç›Š"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(a.profit)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${c.profit>=0?"text-green-500":"text-red-500"}`,children:[c.profit>=0?e.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",c.profit>=0?"+":"",c.profit.toFixed(1),"%"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"å£²ä¸ŠæŽ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:f.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t hover:bg-blue-600 transition-colors cursor-pointer",style:{height:`${t.revenue/A*200}px`,minHeight:t.revenue>0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.revenue)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"çµŒè²»æŽ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:f.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full bg-red-500 rounded-t hover:bg-red-600 transition-colors cursor-pointer",style:{height:`${t.expense/A*200}px`,minHeight:t.expense>0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.expense)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s))})]})]}),e.jsxs("div",{className:"mt-6 bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"åˆ©ç›ŠæŽ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:f.map((t,s)=>{const r=Math.max(...f.map(n=>Math.abs(n.profit)),1);return e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:`w-full rounded-t hover:opacity-75 transition-opacity cursor-pointer ${t.profit>=0?"bg-green-500":"bg-red-500"}`,style:{height:`${Math.abs(t.profit)/r*200}px`,minHeight:t.profit!==0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.profit)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s)})})]})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4",children:"ã‚«ãƒ†ã‚´ãƒªåˆ¥æ¥­ç¸¾"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx(y,{className:"w-5 h-5 text-blue-500 mr-2"}),"å£²ä¸Šã‚«ãƒ†ã‚´ãƒª"]}),N.income.length>0?e.jsx("div",{className:"space-y-3",children:N.income.map((t,s)=>e.jsxs("div",{className:"bg-surface-highlight rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:t.category}),e.jsx("span",{className:"text-text-main font-semibold",children:j(t.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-background rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full transition-all duration-300",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-text-muted w-12 text-right",children:[t.percentage.toFixed(1),"%"]})]}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[t.count,"ä»¶"]})]},s))}):e.jsx("p",{className:"text-text-muted text-sm",children:"å£²ä¸Šãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx(w,{className:"w-5 h-5 text-red-500 mr-2"}),"çµŒè²»ã‚«ãƒ†ã‚´ãƒª"]}),N.expense.length>0?e.jsx("div",{className:"space-y-3",children:N.expense.map((t,s)=>e.jsxs("div",{className:"bg-surface-highlight rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:t.category}),e.jsx("span",{className:"text-text-main font-semibold",children:j(t.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-background rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-red-500 h-full rounded-full transition-all duration-300",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-text-muted w-12 text-right",children:[t.percentage.toFixed(1),"%"]})]}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[t.count,"ä»¶"]})]},s))}):e.jsx("p",{className:"text-text-muted text-sm",children:"çµŒè²»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-surface rounded-xl shadow-sm border border-border p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4",children:"å–å¼•ã‚µãƒžãƒªãƒ¼"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-text-main truncate",children:g.length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"ç·å–å¼•æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-500 truncate",children:g.filter(t=>t.type==="income").length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"å£²ä¸Šä»¶æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-500 truncate",children:g.filter(t=>t.type==="expense").length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"çµŒè²»ä»¶æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-500 truncate",children:[a.revenue>0?(a.profit/a.revenue*100).toFixed(1):"0","%"]}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"åˆ©ç›ŠçŽ‡"})]})]})]}),e.jsx(se,{totals:a,comparison:c,categoryData:N,transactionCount:g.length,period:l==="yearly"?`${i}å¹´`:`${i}å¹´${x}æœˆ`})]})})},se=({totals:d,comparison:u,categoryData:S,transactionCount:p,period:$})=>{const[l,k]=h.useState(null),[i,M]=h.useState(!1),[x,v]=h.useState(null),C=async()=>{if(p!==0){M(!0),v(null);try{const a=await q({revenue:d.revenue,expense:d.expense,profit:d.profit,revenueChange:u.revenue,expenseChange:u.expense,profitChange:u.profit,topExpenseCategories:S.expense.slice(0,5),topIncomeCategories:S.income.slice(0,5),transactionCount:p,period:$});a?k(a):v("ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}catch{v("ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ")}finally{M(!1)}}},g=a=>{switch(a){case"positive":return e.jsx(ee,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(Z,{className:"w-5 h-5 text-blue-500"})}},f=a=>{switch(a){case"positive":return"bg-green-500/10 border-green-500/20";case"warning":return"bg-yellow-500/10 border-yellow-500/20";case"info":return"bg-blue-500/10 border-blue-500/20"}};return p===0?e.jsxs("div",{className:"mt-6 bg-surface rounded-xl shadow-sm border border-border p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(E,{className:"w-6 h-6 text-purple-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"})]}),e.jsx("p",{className:"text-text-muted text-sm",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€AIãŒã‚ãªãŸã®çµŒå–¶çŠ¶æ³ã‚’åˆ†æžã—ã¦ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚"})]}):e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 rounded-xl shadow-sm border border-purple-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-6 h-6 text-purple-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"}),e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:"Gemini AI"})]}),e.jsx("button",{onClick:C,disabled:i,className:"flex items-center px-3 py-1.5 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm transition-colors disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-1 animate-spin"})," åˆ†æžä¸­..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-1"})," ",l?"å†åˆ†æž":"ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—"]})})]}),x&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-red-400 text-sm",children:x})}),!l&&!i&&!x&&e.jsx("p",{className:"text-text-muted text-sm",children:"ã€Œã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€AIãŒã‚ãªãŸã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æžã—ã€å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚"}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-surface/50 rounded-lg p-4",children:e.jsx("p",{className:"text-text-main",children:l.summary})}),l.insights&&l.insights.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"ðŸ“Š åˆ†æžçµæžœ"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.insights.map((a,c)=>e.jsxs("div",{className:`rounded-lg p-3 border ${f(a.type)}`,children:[e.jsxs("div",{className:"flex items-center mb-1",children:[g(a.type),e.jsx("span",{className:"ml-2 font-medium text-text-main text-sm",children:a.title})]}),e.jsx("p",{className:"text-text-muted text-xs",children:a.description})]},c))})]}),l.recommendations&&l.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"ðŸ’¡ æ”¹å–„ææ¡ˆ"}),e.jsx("div",{className:"space-y-2",children:l.recommendations.map((a,c)=>e.jsxs("div",{className:"flex items-start bg-surface/50 rounded-lg p-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-primary/20 text-primary rounded-full flex items-center justify-center text-sm font-medium mr-3",children:c+1}),e.jsx("p",{className:"text-text-main text-sm",children:a})]},c))})]}),l.goals&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 text-primary mr-2"}),"ç›®æ¨™è¨­å®š"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"çŸ­æœŸç›®æ¨™ï¼ˆ1-3ãƒ¶æœˆï¼‰"}),e.jsx("p",{className:"text-text-main text-sm",children:l.goals.shortTerm})]}),e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"é•·æœŸç›®æ¨™ï¼ˆ6-12ãƒ¶æœˆï¼‰"}),e.jsx("p",{className:"text-text-main text-sm",children:l.goals.longTerm})]})]})]})]})]})};export{pe as default};
