# レシートスキャン機能 - クイックスタートガイド

## 🎯 完璧なスキャンのための3ステップ

### 1️⃣ 準備
- レシートを平らに広げる（折り目を伸ばす）
- 明るい場所を選ぶ（窓際や明るい照明の下）
- レシートの汚れや破損をチェック

### 2️⃣ 撮影
1. カメラアイコンをタップ
2. レシート全体が**縦長のガイド枠**に収まるように配置
3. 画面をタップしてピント調整（自動撮影ONの場合は自動）
4. **撮影準備完了！**のメッセージを待つ
5. シャッターボタンをタップ（または自動撮影）

### 3️⃣ 確認・編集
1. 抽出されたデータを確認
2. 必要に応じて手動で修正
3. ✓ボタンで確定

## 📸 撮影のコツ

### ✅ DO（やるべきこと）
- レシート全体を枠内に収める
- 明るい場所で撮影
- レシートを平らに
- 手ブレに注意
- 自動撮影を活用

### ❌ DON'T（避けること）
- 暗い場所での撮影
- 斜めから撮影
- レシートが丸まった状態
- 影が映り込む状態
- ピンボケ

## 🔧 Google Cloud Vision API設定（推奨）

最高精度のOCRを実現するには、Google Cloud Vision APIを設定してください:

### 簡単3ステップ
1. [Google Cloud Console](https://console.cloud.google.com/)でAPIキーを取得
2. `.env`ファイルに追加:
   ```env
   VITE_GOOGLE_VISION_API_KEY=your_api_key_here
   ```
3. アプリを再起動

> **注**: APIキーがない場合でも、Tesseract.jsが自動的に使用されます（精度は若干低下）

## 💡 よくある質問

### Q: 読み取り精度が低い
**A**: 以下を確認してください
- 照明は十分か？
- レシートは平らか？
- ピントは合っているか？
- Google Cloud Vision APIは設定済みか？

### Q: 店舗名が「不明」になる
**A**: 以下の対処法があります
- レシート上部（店舗名）を鮮明に撮影
- 手動で店舗名を編集
- 200店舗以上に対応していますが、未対応店舗もあります

### Q: 金額が正しくない
**A**: 以下を確認してください
- 「合計」の文字と金額が両方見えているか
- 手動で金額を編集（編集ボタンから）

### Q: 処理に時間がかかる
**A**: 正常です
- 初回はTesseract.jsの言語データをダウンロード（+10秒）
- 2回目以降は高速化
- 通常3-7秒程度

## 📊 対応レシート

### 対応店舗（200店舗以上）
✅ コンビニ（セブン、ローソン、ファミマなど）
✅ スーパー（イオン、ヨーカドー、ライフなど）
✅ 飲食店（マック、スタバ、すき家など）
✅ ドラッグストア（マツキヨ、ウエルシアなど）
✅ 家電量販店（ビック、ヨドバシなど）
✅ その他多数

### 対応決済方法
💳 現金、クレジットカード
📱 PayPay、d払い、LINE Pay、楽天ペイ
🚃 Suica、PASMO、nanaco、WAON

## 🚀 高度な機能

### 自動撮影
- 品質が十分な状態を自動検出
- 最適なタイミングで自動撮影
- ヘッダーの「自動撮影: ON/OFF」で切替

### 画像編集
- 明るさ調整スライダー
- コントラスト調整スライダー  
- 回転ボタン（90度ずつ）

### エラーリカバリー
- OCR失敗時は自動的にTesseract.jsにフォールバック
- 複数のパターンマッチングで高い認識率

## 📖 詳細ドキュメント

より詳しい情報は以下を参照:
- [レシートスキャン機能 - 精度向上ガイド](./RECEIPT_SCANNING_GUIDE.md)

---

**💪 これで完璧なレシートスキャンができます！**
