import{a as le,r as a,j as e,L as I,P,F as L,X as $,S as de,f as ne,T as V,g as ie}from"./index-9K-405_8.js";import{u as ce}from"./useMySQLTransactions-CVgGoCb0.js";import q from"./TransactionForm-kaCMny3A.js";import{A as H}from"./arrow-left-sDeMoclR.js";import{T as A}from"./trending-up-DKe50wEw.js";import{T as E}from"./trending-down-C-3yGz5B.js";import{D as Q,F as me}from"./funnel-Cb8Q1qIP.js";import"./star-aa7P3F36.js";import"./calendar-CUy1vF5d.js";import"./zap-CuUx2zce.js";const ve=()=>{const{currentBusinessType:h}=le(),{transactions:i,loading:X,createTransaction:_,updateTransaction:G,deleteTransaction:R,fetchTransactions:C}=ce(h==null?void 0:h.id),[g,z]=a.useState(""),[J,m]=a.useState(!1),[f,j]=a.useState(null),[c,v]=a.useState([]),[S,K]=a.useState(!1),[u,O]=a.useState(""),[l,M]=a.useState({start:"",end:""}),[d,F]=a.useState({min:"",max:""}),[D,W]=a.useState("date"),[T,Y]=a.useState("desc"),[n,w]=a.useState(1),y=10;a.useEffect(()=>{h!=null&&h.id&&C()},[h,C]);const Z=a.useMemo(()=>{const t=i.map(s=>s.category);return Array.from(new Set(t)).filter(Boolean)},[i]),p=a.useMemo(()=>{let t=[...i];return g&&(t=t.filter(s=>s.item&&s.item.toLowerCase().includes(g.toLowerCase())||s.description&&s.description.toLowerCase().includes(g.toLowerCase())||s.category&&s.category.toLowerCase().includes(g.toLowerCase()))),u&&(t=t.filter(s=>s.category===u)),l.start&&(t=t.filter(s=>s.date>=l.start)),l.end&&(t=t.filter(s=>s.date<=l.end)),d.min&&(t=t.filter(s=>s.amount>=Number(d.min))),d.max&&(t=t.filter(s=>s.amount<=Number(d.max))),t.sort((s,r)=>{let o,k;switch(D){case"amount":o=s.amount,k=r.amount;break;case"item":o=s.item.toLowerCase(),k=r.item.toLowerCase();break;default:o=new Date(s.date),k=new Date(r.date)}return T==="asc"?o>k?1:-1:o<k?1:-1}),t},[i,g,u,l,d,D,T]),N=Math.ceil(p.length/y),b=a.useMemo(()=>{const t=(n-1)*y,s=t+y;return p.slice(t,s)},[p,n]),x=a.useMemo(()=>{const t=i.filter(r=>parseFloat(r.amount)>0).reduce((r,o)=>r+Math.abs(parseFloat(o.amount)),0),s=i.filter(r=>parseFloat(r.amount)<0).reduce((r,o)=>r+Math.abs(parseFloat(o.amount)),0);return{total:i.length,income:t,expense:s,balance:t-s}},[i]),ee=()=>{c.length===b.length?v([]):v(b.map(t=>t.id))},te=t=>{c.includes(t)?v(c.filter(s=>s!==t)):v([...c,t])},se=async()=>{if(window.confirm(`${c.length}件の取引を削除してもよろしいですか？`))try{for(const t of c)await R(t);v([])}catch(t){console.error("一括削除に失敗:",t)}},U=async t=>{try{const s=localStorage.getItem("user");if(s)try{const r=JSON.parse(s);t.creator=r.id}catch(r){console.error("ユーザー情報の解析に失敗しました:",r)}await _(t),await C(),m(!1)}catch(s){console.error("取引の作成に失敗:",s)}},re=async t=>{if(f)try{await G(f.id,t),await C(),j(null)}catch(s){console.error("取引の更新に失敗:",s)}},ae=()=>{O(""),M({start:"",end:""}),F({min:"",max:""}),z("")},B=a.useMemo(()=>{let t=0;return u&&t++,(l.start||l.end)&&t++,(d.min||d.max)&&t++,t},[u,l,d]);return X?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-text-muted",children:"データを読み込んでいます..."})]})}):!i||i.length===0?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-main",children:"取引履歴"}),e.jsx("p",{className:"text-text-muted mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"総取引数"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-text-main",children:"0"})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(L,{className:"w-6 h-6 text-primary"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収入"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-500/10 p-3",children:e.jsx(A,{className:"w-6 h-6 text-green-500"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"支出"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-red-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-red-500/10 p-3",children:e.jsx(E,{className:"w-6 h-6 text-red-500"})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-5 border border-green-500/20 bg-green-500/5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収支"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-500/10 p-3",children:e.jsx(Q,{className:"w-6 h-6 text-green-500"})})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-8 text-center",children:[e.jsx(L,{className:"w-16 h-16 text-text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-text-main mb-2",children:"取引が見つかりません"}),e.jsx("p",{className:"text-text-muted mb-6",children:"まだ取引が登録されていないか、条件に一致する取引がありません"}),e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary flex items-center mx-auto",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"最初の取引を追加"]})]})]}),J&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-surface rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-main",children:"最初の取引を追加"}),e.jsx("button",{onClick:()=>{m(!1),j(null)},className:"p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx($,{className:"w-5 h-5 text-text-muted"})})]}),e.jsx(q,{transaction:f,onSubmit:U,onCancel:()=>{m(!1),j(null)}})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(H,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-main",children:"取引履歴"}),e.jsx("p",{className:"text-text-muted mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"総取引数"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-text-main",children:x.total})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(L,{className:"w-6 h-6 text-primary"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収入"}),e.jsxs("div",{className:"text-2xl font-bold mt-1 text-green-500",children:["¥",x.income.toLocaleString()]})]}),e.jsx("div",{className:"rounded-lg bg-green-500/10 p-3",children:e.jsx(A,{className:"w-6 h-6 text-green-500"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"支出"}),e.jsxs("div",{className:"text-2xl font-bold mt-1 text-red-500",children:["¥",x.expense.toLocaleString()]})]}),e.jsx("div",{className:"rounded-lg bg-red-500/10 p-3",children:e.jsx(E,{className:"w-6 h-6 text-red-500"})})]})}),e.jsx("div",{className:`rounded-xl shadow-sm p-5 border hover:shadow-md transition-shadow ${x.balance>=0?"border-green-500/20 bg-green-500/5":"border-red-500/20 bg-red-500/5"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収支"}),e.jsxs("div",{className:`text-2xl font-bold mt-1 ${x.balance>=0?"text-green-500":"text-red-500"}`,children:["¥",x.balance.toLocaleString()]})]}),e.jsx("div",{className:`rounded-lg p-3 ${x.balance>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsx(Q,{className:`w-6 h-6 ${x.balance>=0?"text-green-500":"text-red-500"}`})})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted w-5 h-5"}),e.jsx("input",{type:"text",value:g,onChange:t=>z(t.target.value),placeholder:"取引内容、カテゴリなどで検索...",className:"w-full pl-10 pr-4 py-2.5 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main placeholder-text-muted"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>K(!S),className:`px-4 py-2.5 text-sm rounded-lg transition-colors flex items-center space-x-2 ${S?"bg-primary/10 text-primary":"bg-surface-highlight text-text-muted hover:bg-border"}`,children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"フィルタ"}),B>0&&e.jsx("span",{className:"bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:B}),e.jsx(ne,{className:`w-4 h-4 transition-transform ${S?"rotate-180":""}`})]}),(u||l.start||l.end||d.min||d.max)&&e.jsxs("button",{onClick:ae,className:"px-4 py-2.5 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"クリア"]})]})]})}),S&&e.jsx("div",{className:"px-4 pb-4 border-t border-border",children:e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"カテゴリ"}),e.jsxs("select",{value:u,onChange:t=>O(t.target.value),className:"input-base",children:[e.jsx("option",{value:"",children:"すべて"}),Z.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"開始日"}),e.jsx("input",{type:"date",value:l.start,onChange:t=>M({...l,start:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"終了日"}),e.jsx("input",{type:"date",value:l.end,onChange:t=>M({...l,end:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最小金額"}),e.jsx("input",{type:"number",value:d.min,onChange:t=>F({...d,min:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最大金額"}),e.jsx("input",{type:"number",value:d.max,onChange:t=>F({...d,max:t.target.value}),className:"input-base"})]})]})})})]}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-sm text-text-muted mr-2",children:"ソート:"}),e.jsxs("select",{value:D,onChange:t=>W(t.target.value),className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main",children:[e.jsx("option",{value:"date",children:"日付"}),e.jsx("option",{value:"amount",children:"金額"}),e.jsx("option",{value:"item",children:"項目"})]})]}),e.jsx("button",{onClick:()=>Y(T==="asc"?"desc":"asc"),className:"px-3 py-2 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:T==="asc"?"昇順":"降順"})]}),c.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-text-muted",children:[c.length,"件選択中"]}),e.jsxs("button",{onClick:se,className:"px-3 py-2 text-sm bg-red-500/10 text-red-600 rounded-lg hover:bg-red-500/20 transition-colors flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"削除"]})]})]})})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider w-12",children:e.jsx("input",{type:"checkbox",checked:c.length===b.length&&b.length>0,onChange:ee,className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"項目"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-text-muted uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider hidden sm:table-cell",children:"日付"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"カテゴリ"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-text-muted uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-surface divide-y divide-border",children:b.length>0?b.map(t=>e.jsxs("tr",{className:"hover:bg-surface-highlight transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:c.includes(t.id),onChange:()=>te(t.id),className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-main",children:t.item}),e.jsx("div",{className:"text-sm text-text-muted sm:hidden",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end",children:[t.type==="income"?e.jsx(A,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(E,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:t.type==="income"?"text-green-500":"text-red-500",children:[t.type==="expense"?"-":"",t.amount.toLocaleString()]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-muted hidden sm:table-cell",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-medium rounded-full ${t.type==="income"?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:t.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>{j(t),m(!0)},className:"p-2 text-primary hover:text-primary/80 hover:bg-primary/10 rounded-lg transition-colors",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(t.id),className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(L,{className:"w-12 h-12 text-text-muted mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-text-main mb-1",children:"取引が見つかりません"}),e.jsx("p",{className:"text-text-muted",children:"条件に一致する取引がありません"})]})})})})]})}),b.length>0&&e.jsxs("div",{className:"bg-surface px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-border",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>w(Math.max(1,n-1)),disabled:n===1,className:"relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"前へ"}),e.jsx("button",{onClick:()=>w(Math.min(N,n+1)),disabled:n===N,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"次へ"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsx("span",{className:"font-medium",children:Math.min((n-1)*y+1,p.length)})," 件から ",e.jsx("span",{className:"font-medium",children:Math.min(n*y,p.length)})," 件までを表示中（全 ",e.jsx("span",{className:"font-medium",children:p.length})," 件）"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>w(Math.max(1,n-1)),disabled:n===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"前へ"}),"<"]}),[...Array(Math.min(5,N))].map((t,s)=>{const r=Math.max(1,Math.min(n-2,N-4))+s;return e.jsx("button",{onClick:()=>w(r),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${n===r?"z-10 bg-primary/10 border-primary text-primary":"bg-surface border-border text-text-muted hover:bg-surface-highlight"}`,children:r},r)}),e.jsxs("button",{onClick:()=>w(Math.min(N,n+1)),disabled:n===N,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"次へ"}),">"]})]})})]})]})]})]}),J&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-surface rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-main",children:f?"取引を編集":"新規取引作成"}),e.jsx("button",{onClick:()=>{m(!1),j(null)},className:"p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx($,{className:"w-5 h-5 text-text-muted"})})]}),e.jsx(q,{transaction:f,onSubmit:f?re:U,onCancel:()=>{m(!1),j(null)}})]})})})]})};export{ve as default};
