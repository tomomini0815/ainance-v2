import{a as _,b as q,d as z,r as f,j as e,L as I,i as C,k as $,S as B}from"./index-ANsWalRW.js";import{b as G}from"./geminiAIService-I_tj0jX3.js";import{L}from"./loader-circle-BRed_ChO.js";import{A as D}from"./arrow-left-CzwRZ0lz.js";import{C as H}from"./circle-alert-MEFdEpQ1.js";import{C as U}from"./calendar-BT1WDC-V.js";import{F as K,J as Q}from"./japanese-yen-CIZa0TSV.js";import{D as V}from"./download-B8WM_aIE.js";import{R as W}from"./refresh-cw-bL0maMJz.js";import{T}from"./target-Dj7rX5dq.js";import{I as X}from"./info-VDCyy0ci.js";import{T as Z}from"./triangle-alert-Cat07P4v.js";import{C as ee}from"./circle-check-big-7dW2Outk.js";const te=c=>`${c}æœˆ`,j=c=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),F=(c,d)=>d===0?c>0?100:0:(c-d)/d*100,fe=()=>{const{user:c}=_(),{currentBusinessType:d}=q(),y=(d==null?void 0:d.business_type)||"individual",{transactions:o,loading:k}=z(c==null?void 0:c.id,y),[l,M]=f.useState("yearly"),[i,S]=f.useState(new Date().getFullYear().toString()),[x,p]=f.useState((new Date().getMonth()+1).toString().padStart(2,"0")),v=f.useMemo(()=>{const t=new Date().getFullYear();return Array.from({length:5},(s,r)=>t-r)},[]),g=f.useMemo(()=>o.filter(t=>{const s=new Date(t.date),r=s.getFullYear().toString(),a=(s.getMonth()+1).toString().padStart(2,"0");if(l==="yearly")return r===i;if(l==="monthly")return r===i&&a===x;if(l==="quarterly"){const h=Math.floor(s.getMonth()/3)+1,u=Math.floor((parseInt(x)-1)/3)+1;return r===i&&h===u}return!0}),[o,l,i,x]),b=f.useMemo(()=>{const t={};for(let s=1;s<=12;s++){const r=`${i}-${s.toString().padStart(2,"0")}`;t[r]={revenue:0,expense:0}}return o.forEach(s=>{const r=new Date(s.date);if(r.getFullYear().toString()===i){const a=`${i}-${(r.getMonth()+1).toString().padStart(2,"0")}`;t[a]&&(s.type==="income"?t[a].revenue+=s.amount:t[a].expense+=s.amount)}}),Object.entries(t).sort(([s],[r])=>s.localeCompare(r)).map(([s,r])=>({month:te(parseInt(s.split("-")[1])),monthKey:s,revenue:r.revenue,expense:r.expense,profit:r.revenue-r.expense}))},[o,i]),n=f.useMemo(()=>{const t=g.filter(r=>r.type==="income").reduce((r,a)=>r+a.amount,0),s=g.filter(r=>r.type==="expense").reduce((r,a)=>r+a.amount,0);return{revenue:t,expense:s,profit:t-s}},[g]),m=f.useMemo(()=>{const s=(()=>{const u=l==="yearly"?(parseInt(i)-1).toString():i,N=l==="monthly"?parseInt(x)===1?"12":(parseInt(x)-1).toString().padStart(2,"0"):x;return o.filter(A=>{const Y=new Date(A.date),E=Y.getFullYear().toString(),J=(Y.getMonth()+1).toString().padStart(2,"0");if(l==="yearly")return E===u;if(l==="monthly"){const O=parseInt(x)===1?(parseInt(i)-1).toString():i;return E===O&&J===N}return!1})})(),r=s.filter(u=>u.type==="income").reduce((u,N)=>u+N.amount,0),a=s.filter(u=>u.type==="expense").reduce((u,N)=>u+N.amount,0),h=r-a;return{revenue:F(n.revenue,r),expense:F(n.expense,a),profit:F(n.profit,h)}},[o,n,l,i,x]),w=f.useMemo(()=>{const t={},s={};g.forEach(a=>{const h=a.category||"ãã®ä»–";a.type==="income"?(t[h]||(t[h]={amount:0,count:0}),t[h].amount+=a.amount,t[h].count+=1):(s[h]||(s[h]={amount:0,count:0}),s[h].amount+=a.amount,s[h].count+=1)});const r=(a,h)=>Object.entries(a).map(([u,{amount:N,count:A}])=>({category:u,amount:N,count:A,percentage:h>0?N/h*100:0})).sort((u,N)=>N.amount-u.amount);return{income:r(t,n.revenue),expense:r(s,n.expense)}},[g,n]),R=()=>{const t=[["æœŸé–“",l==="yearly"?`${i}å¹´`:`${i}å¹´${x}æœˆ`],[""],["ã‚µãƒãƒªãƒ¼"],["å£²ä¸Šé«˜",n.revenue],["çµŒè²»",n.expense],["åˆ©ç›Š",n.profit],[""],["æœˆæ¬¡ãƒ‡ãƒ¼ã‚¿"],["æœˆ","å£²ä¸Šé«˜","çµŒè²»","åˆ©ç›Š"],...b.map(a=>[a.month,a.revenue,a.expense,a.profit]),[""],["ã‚«ãƒ†ã‚´ãƒªåˆ¥å£²ä¸Š"],["ã‚«ãƒ†ã‚´ãƒª","é‡‘é¡","ä»¶æ•°","å‰²åˆ"],...w.income.map(a=>[a.category,a.amount,a.count,`${a.percentage.toFixed(1)}%`]),[""],["ã‚«ãƒ†ã‚´ãƒªåˆ¥çµŒè²»"],["ã‚«ãƒ†ã‚´ãƒª","é‡‘é¡","ä»¶æ•°","å‰²åˆ"],...w.expense.map(a=>[a.category,a.amount,a.count,`${a.percentage.toFixed(1)}%`])].map(a=>a.join(",")).join(`
`),s=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=`çµŒå–¶åˆ†æãƒ¬ãƒãƒ¼ãƒˆ_${i}${l==="monthly"?x:""}.csv`,r.click()},P=f.useMemo(()=>{const t=Math.max(...b.map(r=>r.revenue),1),s=Math.max(...b.map(r=>r.expense),1);return Math.max(t,s)},[b]);return k?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(L,{className:"w-12 h-12 text-primary animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-text-muted",children:"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(I,{to:"/dashboard",className:"mr-4",children:e.jsx(D,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main",children:"çµŒå–¶åˆ†æ"})]}),o.length===0&&e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-8 mb-6 text-center",children:[e.jsx(H,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-2",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-text-muted mb-4",children:"çµŒå–¶åˆ†æã‚’è¡Œã†ã«ã¯ã€å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚"}),e.jsx(I,{to:"/receipt-processing",className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"ãƒ¬ã‚·ãƒ¼ãƒˆã‚’ç™»éŒ²ã™ã‚‹"})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4 md:mb-0",children:"è²¡å‹™çŠ¶æ³"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 text-text-muted mr-2"}),e.jsxs("select",{value:l,onChange:t=>M(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"monthly",children:"æœˆæ¬¡"}),e.jsx("option",{value:"quarterly",children:"å››åŠæœŸ"}),e.jsx("option",{value:"yearly",children:"å¹´æ¬¡"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 text-text-muted mr-2"}),e.jsx("select",{value:i,onChange:t=>S(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:v.map(t=>e.jsxs("option",{value:t.toString(),children:[t,"å¹´"]},t))})]}),l==="monthly"&&e.jsx("select",{value:x,onChange:t=>p(t.target.value),className:"px-3 py-1 bg-background border border-border rounded-md text-sm text-text-main focus:outline-none focus:ring-2 focus:ring-primary",children:Array.from({length:12},(t,s)=>s+1).map(t=>e.jsxs("option",{value:t.toString().padStart(2,"0"),children:[t,"æœˆ"]},t))}),e.jsxs("button",{onClick:R,className:"flex items-center px-3 py-1 bg-surface text-text-main border border-border rounded-md hover:bg-surface-highlight transition-colors text-sm",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[e.jsx("div",{className:"bg-blue-500/10 rounded-lg p-4 sm:p-5 border border-blue-500/20 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"å£²ä¸Šé«˜"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(n.revenue)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${m.revenue>=0?"text-green-500":"text-red-500"}`,children:[m.revenue>=0?e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx($,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",m.revenue>=0?"+":"",m.revenue.toFixed(1),"%"]})]})]})]})}),e.jsx("div",{className:"bg-red-500/10 rounded-lg p-4 sm:p-5 border border-red-500/20 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg flex-shrink-0",children:e.jsx($,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"çµŒè²»"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(n.expense)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${m.expense<=0?"text-green-500":"text-red-500"}`,children:[m.expense>=0?e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx($,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",m.expense>=0?"+":"",m.expense.toFixed(1),"%"]})]})]})]})}),e.jsx("div",{className:`${n.profit>=0?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"} rounded-lg p-4 sm:p-5 border overflow-hidden`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${n.profit>=0?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(Q,{className:`w-5 h-5 sm:w-6 sm:h-6 ${n.profit>=0?"text-green-500":"text-red-500"}`})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-text-muted",children:"åˆ©ç›Š"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-text-main truncate",children:j(n.profit)}),e.jsxs("p",{className:`text-xs sm:text-sm flex items-center mt-1 ${m.profit>=0?"text-green-500":"text-red-500"}`,children:[m.profit>=0?e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}):e.jsx($,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["å‰æœŸæ¯” ",m.profit>=0?"+":"",m.profit.toFixed(1),"%"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"å£²ä¸Šæ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:b.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t hover:bg-blue-600 transition-colors cursor-pointer",style:{height:`${t.revenue/P*200}px`,minHeight:t.revenue>0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.revenue)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"çµŒè²»æ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:b.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"w-full bg-red-500 rounded-t hover:bg-red-600 transition-colors cursor-pointer",style:{height:`${t.expense/P*200}px`,minHeight:t.expense>0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.expense)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s))})]})]}),e.jsxs("div",{className:"mt-6 bg-surface border border-border rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-medium text-text-main mb-4",children:"åˆ©ç›Šæ¨ç§»"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:b.map((t,s)=>{const r=Math.max(...b.map(a=>Math.abs(a.profit)),1);return e.jsxs("div",{className:"flex flex-col items-center flex-1 group",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:`w-full rounded-t hover:opacity-75 transition-opacity cursor-pointer ${t.profit>=0?"bg-green-500":"bg-red-500"}`,style:{height:`${Math.abs(t.profit)/r*200}px`,minHeight:t.profit!==0?"4px":"0"}}),e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-highlight px-2 py-1 rounded text-xs text-text-main opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-lg",children:j(t.profit)})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:t.month})]},s)})})]})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4",children:"ã‚«ãƒ†ã‚´ãƒªåˆ¥æ¥­ç¸¾"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 text-blue-500 mr-2"}),"å£²ä¸Šã‚«ãƒ†ã‚´ãƒª"]}),w.income.length>0?e.jsx("div",{className:"space-y-3",children:w.income.map((t,s)=>e.jsxs("div",{className:"bg-surface-highlight rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:t.category}),e.jsx("span",{className:"text-text-main font-semibold",children:j(t.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-background rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full transition-all duration-300",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-text-muted w-12 text-right",children:[t.percentage.toFixed(1),"%"]})]}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[t.count,"ä»¶"]})]},s))}):e.jsx("p",{className:"text-text-muted text-sm",children:"å£²ä¸Šãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx($,{className:"w-5 h-5 text-red-500 mr-2"}),"çµŒè²»ã‚«ãƒ†ã‚´ãƒª"]}),w.expense.length>0?e.jsx("div",{className:"space-y-3",children:w.expense.map((t,s)=>e.jsxs("div",{className:"bg-surface-highlight rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:t.category}),e.jsx("span",{className:"text-text-main font-semibold",children:j(t.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-background rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-red-500 h-full rounded-full transition-all duration-300",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-text-muted w-12 text-right",children:[t.percentage.toFixed(1),"%"]})]}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[t.count,"ä»¶"]})]},s))}):e.jsx("p",{className:"text-text-muted text-sm",children:"çµŒè²»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-surface rounded-xl shadow-sm border border-border p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main mb-4",children:"å–å¼•ã‚µãƒãƒªãƒ¼"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-text-main truncate",children:g.length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"ç·å–å¼•æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-500 truncate",children:g.filter(t=>t.type==="income").length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"å£²ä¸Šä»¶æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-500 truncate",children:g.filter(t=>t.type==="expense").length}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"çµŒè²»ä»¶æ•°"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-surface-highlight rounded-lg overflow-hidden",children:[e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-500 truncate",children:[n.revenue>0?(n.profit/n.revenue*100).toFixed(1):"0","%"]}),e.jsx("p",{className:"text-xs sm:text-sm text-text-muted",children:"åˆ©ç›Šç‡"})]})]})]}),e.jsx(se,{totals:n,comparison:m,categoryData:w,transactionCount:g.length,period:l==="yearly"?`${i}å¹´`:`${i}å¹´${x}æœˆ`}),e.jsx(re,{businessType:y,totals:n,transactionCount:g.length})]})})},se=({totals:c,comparison:d,categoryData:y,transactionCount:o,period:k})=>{const[l,M]=f.useState(null),[i,S]=f.useState(!1),[x,p]=f.useState(null),v=async()=>{if(o!==0){S(!0),p(null);try{const n=await G({revenue:c.revenue,expense:c.expense,profit:c.profit,revenueChange:d.revenue,expenseChange:d.expense,profitChange:d.profit,topExpenseCategories:y.expense.slice(0,5),topIncomeCategories:y.income.slice(0,5),transactionCount:o,period:k});n?(M(n),p(null)):p("ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚")}catch(n){console.error("AIã‚¢ãƒ‰ãƒã‚¤ã‚¹å–å¾—ã‚¨ãƒ©ãƒ¼:",n);const m=(n==null?void 0:n.message)||"ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";p(m)}finally{S(!1)}}},g=n=>{switch(n){case"positive":return e.jsx(ee,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(Z,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(X,{className:"w-5 h-5 text-blue-500"})}},b=n=>{switch(n){case"positive":return"bg-green-500/10 border-green-500/20";case"warning":return"bg-yellow-500/10 border-yellow-500/20";case"info":return"bg-blue-500/10 border-blue-500/20"}};return o===0?e.jsxs("div",{className:"mt-6 bg-surface rounded-xl shadow-sm border border-border p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(B,{className:"w-6 h-6 text-purple-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"})]}),e.jsx("p",{className:"text-text-muted text-sm",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€AIãŒã‚ãªãŸã®çµŒå–¶çŠ¶æ³ã‚’åˆ†æã—ã¦ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚"})]}):e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 rounded-xl shadow-sm border border-purple-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-6 h-6 text-purple-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"}),e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:"Gemini AI"})]}),e.jsx("button",{onClick:v,disabled:i,className:"flex items-center px-3 py-1.5 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm transition-colors disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-1 animate-spin"})," åˆ†æä¸­..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-1"})," ",l?"å†åˆ†æ":"ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—"]})})]}),x&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-red-400 text-sm",children:x})}),!l&&!i&&!x&&e.jsx("p",{className:"text-text-muted text-sm",children:"ã€Œã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€AIãŒã‚ãªãŸã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚"}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-surface/50 rounded-lg p-4",children:e.jsx("p",{className:"text-text-main",children:l.summary})}),l.insights&&l.insights.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"ğŸ“Š åˆ†æçµæœ"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.insights.map((n,m)=>e.jsxs("div",{className:`rounded-lg p-3 border ${b(n.type)}`,children:[e.jsxs("div",{className:"flex items-center mb-1",children:[g(n.type),e.jsx("span",{className:"ml-2 font-medium text-text-main text-sm",children:n.title})]}),e.jsx("p",{className:"text-text-muted text-xs",children:n.description})]},m))})]}),l.recommendations&&l.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"ğŸ’¡ æ”¹å–„ææ¡ˆ"}),e.jsx("div",{className:"space-y-2",children:l.recommendations.map((n,m)=>e.jsxs("div",{className:"flex items-start bg-surface/50 rounded-lg p-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-primary/20 text-primary rounded-full flex items-center justify-center text-sm font-medium mr-3",children:m+1}),e.jsx("p",{className:"text-text-main text-sm",children:n})]},m))})]}),l.goals&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3 flex items-center",children:[e.jsx(T,{className:"w-5 h-5 text-primary mr-2"}),"ç›®æ¨™è¨­å®š"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"çŸ­æœŸç›®æ¨™ï¼ˆ1-3ãƒ¶æœˆï¼‰"}),e.jsx("p",{className:"text-text-main text-sm",children:l.goals.shortTerm})]}),e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"é•·æœŸç›®æ¨™ï¼ˆ6-12ãƒ¶æœˆï¼‰"}),e.jsx("p",{className:"text-text-main text-sm",children:l.goals.longTerm})]})]})]})]})]})},re=({businessType:c,totals:d,transactionCount:y})=>{const[o,k]=f.useState(!1);if(y===0)return null;const i=c==="individual"?{title:"æ³•äººåŒ–ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»æ¤œè¨ãƒã‚¤ãƒ³ãƒˆ",description:"äº‹æ¥­è¦æ¨¡ã®æ‹¡å¤§ã«ä¼´ã„ã€æ³•äººåŒ–ã‚’æ¤œè¨ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ",benefits:[{title:"ç¨åˆ¶é¢ã®ãƒ¡ãƒªãƒƒãƒˆ",items:["æ³•äººç¨ç‡ã¯æœ€å¤§23.2%ï¼ˆå€‹äººã®æœ€é«˜ç¨ç‡45%ã‚ˆã‚Šä½ã„ï¼‰","å½¹å“¡å ±é…¬ã¨ã—ã¦çµ¦ä¸æ‰€å¾—æ§é™¤ãŒä½¿ãˆã‚‹","é€€è·é‡‘ã®æé‡‘ç®—å…¥ãŒå¯èƒ½","å®¶æ—ã‚’å½¹å“¡ã«ã—ã¦æ‰€å¾—åˆ†æ•£ãŒå¯èƒ½"]},{title:"ç¤¾ä¼šçš„ä¿¡ç”¨ã®å‘ä¸Š",items:["å–å¼•å…ˆã¸ã®ä¿¡ç”¨åŠ›ã‚¢ãƒƒãƒ—","é‡‘èæ©Ÿé–¢ã‹ã‚‰ã®èè³‡ã‚’å—ã‘ã‚„ã™ã„","æ¡ç”¨æ´»å‹•ã§æœ‰åˆ©ã«ãªã‚‹"]},{title:"äº‹æ¥­ç¶™ç¶šæ€§",items:["æ³•äººã¯æ°¸ç¶šçš„ã«å­˜ç¶šå¯èƒ½","äº‹æ¥­æ‰¿ç¶™ãŒã‚¹ãƒ ãƒ¼ã‚º","æœ‰é™è²¬ä»»ã§å€‹äººè³‡ç”£ã‚’ä¿è­·"]}],considerations:[{label:"æ³•äººåŒ–ã®ç›®å®‰å¹´å",value:"æ‰€å¾—ãŒ800ä¸‡å††ã€œ1,000ä¸‡å††ã‚’è¶…ãˆã‚‹å ´åˆ"},{label:"è¨­ç«‹è²»ç”¨",value:"ç´„25ä¸‡å††ã€œ30ä¸‡å††ï¼ˆæ ªå¼ä¼šç¤¾ã®å ´åˆï¼‰"},{label:"ç¶­æŒè²»ç”¨",value:"ç¨ç†å£«è²»ç”¨ãƒ»ç¤¾ä¼šä¿é™ºæ–™ãªã©å¹´é–“50ä¸‡å††ã€œ"},{label:"æ³•äººä½æ°‘ç¨",value:"èµ¤å­—ã§ã‚‚æœ€ä½7ä¸‡å††/å¹´ãŒå¿…è¦"}],checkPoints:["å¹´é–“åˆ©ç›ŠãŒ500ä¸‡å††ä»¥ä¸Šã‚ã‚‹","ä»Šå¾Œã•ã‚‰ã«äº‹æ¥­ã‚’æ‹¡å¤§ã—ãŸã„","ç¤¾ä¼šçš„ä¿¡ç”¨ã‚’é«˜ã‚ãŸã„","å¾“æ¥­å“¡ã‚’é›‡ç”¨ã™ã‚‹äºˆå®šãŒã‚ã‚‹","äº‹æ¥­ã‚’é•·æœŸçš„ã«ç¶™ç¶šã—ãŸã„"]}:{title:"æ–°è¦æ³•äººè¨­ç«‹ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»æ¤œè¨ãƒã‚¤ãƒ³ãƒˆ",description:"äº‹æ¥­ã®å¤šè§’åŒ–ã‚„ãƒªã‚¹ã‚¯åˆ†æ•£ã®ãŸã‚ã«ã€æ–°ãŸãªæ³•äººè¨­ç«‹ã‚’æ¤œè¨ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ",benefits:[{title:"ç¯€ç¨åŠ¹æœ",items:["æ³•äººã”ã¨ã«800ä¸‡å††ã¾ã§ã®è»½æ¸›ç¨ç‡ã‚’é©ç”¨","ä¸­å°ä¼æ¥­ã®ç‰¹ä¾‹ã‚’è¤‡æ•°æ´»ç”¨","æ¶ˆè²»ç¨ã®å…ç¨äº‹æ¥­è€…ã®ç‰¹ä¾‹ã‚’æ´»ç”¨","äº¤éš›è²»ã®æé‡‘ç®—å…¥æ ã‚’è¤‡æ•°ç¢ºä¿"]},{title:"ãƒªã‚¹ã‚¯åˆ†æ•£",items:["äº‹æ¥­ã”ã¨ã®è²¬ä»»ã‚’åˆ†é›¢","ä¸€ã¤ã®äº‹æ¥­ãŒä¸èª¿ã§ã‚‚ä»–ã«å½±éŸ¿ã—ã«ãã„","äº‹æ¥­å£²å´ãŒã—ã‚„ã™ã„"]},{title:"çµŒå–¶ã®åŠ¹ç‡åŒ–",items:["äº‹æ¥­åˆ¥ã®åç›Šç®¡ç†ãŒã—ã‚„ã™ã„","æ„æ€æ±ºå®šã®è¿…é€ŸåŒ–","äº‹æ¥­ç‰¹æ€§ã«åˆã£ãŸé‹å–¶ãŒå¯èƒ½"]}],considerations:[{label:"æŒæ ªä¼šç¤¾ã®æ´»ç”¨",value:"ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“ã®çµŒå–¶ã‚’åŠ¹ç‡åŒ–"},{label:"è¨­ç«‹è²»ç”¨",value:"ç´„25ä¸‡å††ã€œ30ä¸‡å††/æ³•äºº"},{label:"ç®¡ç†ã‚³ã‚¹ãƒˆ",value:"æ³•äººã”ã¨ã«æ±ºç®—ãƒ»ç”³å‘ŠãŒå¿…è¦"},{label:"æ³¨æ„ç‚¹",value:"ç¨å‹™èª¿æŸ»ã§ã‚°ãƒ«ãƒ¼ãƒ—é–“å–å¼•ãŒæ³¨ç›®ã•ã‚Œã‚‹"}],checkPoints:["æ–°ã—ã„äº‹æ¥­åˆ†é‡ã¸ã®é€²å‡ºã‚’æ¤œè¨ã—ã¦ã„ã‚‹","ç¾åœ¨ã®äº‹æ¥­ã¨ç•°ãªã‚‹ãƒªã‚¹ã‚¯ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®äº‹æ¥­ãŒã‚ã‚‹","å°†æ¥çš„ã«äº‹æ¥­ã®ä¸€éƒ¨ã‚’å£²å´ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹","æ¶ˆè²»ç¨ã®å…ç¨æœŸé–“ã‚’æ´»ç”¨ã—ãŸã„","è¤‡æ•°ã®æ‹ ç‚¹ã‚„åœ°åŸŸã§äº‹æ¥­ã‚’å±•é–‹ã—ãŸã„"]},S=c==="individual"?"text-indigo-500":"text-emerald-500",x=c==="individual"?"from-indigo-500/10 to-purple-500/10 border-indigo-500/20":"from-emerald-500/10 to-teal-500/10 border-emerald-500/20";return e.jsxs("div",{className:`mt-6 bg-gradient-to-br ${x} rounded-xl shadow-sm border p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>k(!o),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:`w-6 h-6 ${S} mr-2`}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:i.title}),e.jsx("p",{className:"text-sm text-text-muted",children:i.description})]})]}),e.jsx("button",{className:"p-2 hover:bg-surface-highlight rounded-lg transition-colors",children:o?e.jsx(D,{className:"w-5 h-5 text-text-muted rotate-90"}):e.jsx(D,{className:"w-5 h-5 text-text-muted -rotate-90"})})]}),o&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-text-muted mb-3",children:"ğŸ“Š ã‚ãªãŸã®ç¾åœ¨ã®æ¥­ç¸¾"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"å¹´é–“å£²ä¸Š"}),e.jsx("p",{className:"text-lg font-bold text-text-main",children:j(d.revenue)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"å¹´é–“çµŒè²»"}),e.jsx("p",{className:"text-lg font-bold text-text-main",children:j(d.expense)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"å¹´é–“åˆ©ç›Š"}),e.jsx("p",{className:`text-lg font-bold ${d.profit>=0?"text-green-500":"text-red-500"}`,children:j(d.profit)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"âœ¨ ä¸»ãªãƒ¡ãƒªãƒƒãƒˆ"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.benefits.map((p,v)=>e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-medium text-text-main mb-2",children:p.title}),e.jsx("ul",{className:"space-y-1",children:p.items.map((g,b)=>e.jsxs("li",{className:"text-xs text-text-muted flex items-start",children:[e.jsx("span",{className:"text-primary mr-1",children:"â€¢"}),g]},b))})]},v))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-3",children:"ğŸ“‹ æ¤œè¨ã™ã¹ããƒã‚¤ãƒ³ãƒˆ"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.considerations.map((p,v)=>e.jsxs("div",{className:"bg-surface/50 rounded-lg p-3 border border-border",children:[e.jsx("p",{className:"text-xs text-text-muted",children:p.label}),e.jsx("p",{className:"text-sm font-medium text-text-main mt-1",children:p.value})]},v))})]}),e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-border",children:[e.jsxs("h3",{className:"text-md font-medium text-text-main mb-3",children:["âœ… ",c==="individual"?"æ³•äººåŒ–ã®æ¤œè¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ":"æ–°è¦æ³•äººè¨­ç«‹ã®æ¤œè¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ"]}),e.jsxs("p",{className:"text-sm text-text-muted mb-3",children:["ä»¥ä¸‹ã®é …ç›®ã«è¤‡æ•°å½“ã¦ã¯ã¾ã‚‹å ´åˆã¯ã€",c==="individual"?"æ³•äººåŒ–":"æ–°è¦æ³•äººè¨­ç«‹","ã‚’æ¤œè¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"]}),e.jsx("div",{className:"space-y-2",children:i.checkPoints.map((p,v)=>e.jsxs("label",{className:"flex items-center text-sm text-text-main cursor-pointer hover:bg-surface-highlight p-2 rounded-lg transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary rounded mr-3"}),p]},v))})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-lg p-4",children:[e.jsx("h3",{className:"text-md font-medium text-text-main mb-2",children:"ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—"}),e.jsx("p",{className:"text-sm text-text-muted mb-3",children:c==="individual"?"æ³•äººåŒ–ã‚’ã”æ¤œè¨ã®å ´åˆã¯ã€ã¾ãšç¨ç†å£«ã«ã”ç›¸è«‡ãã ã•ã„ã€‚é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨æ‰‹ç¶šãã‚’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚":"æ–°è¦æ³•äººã®è¨­ç«‹ã‚’ã”æ¤œè¨ã®å ´åˆã¯ã€ç¨ç†å£«ã‚„å¸æ³•æ›¸å£«ã«ã”ç›¸è«‡ãã ã•ã„ã€‚ã‚°ãƒ«ãƒ¼ãƒ—çµŒå–¶ã®ç¨å‹™æœ€é©åŒ–ã‚’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚"}),e.jsx(I,{to:"/contact",className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm",children:"å°‚é–€å®¶ã«ç›¸è«‡ã™ã‚‹"})]})]})]})};export{fe as default};
