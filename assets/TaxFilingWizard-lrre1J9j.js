const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cte9M9zr.js","assets/index-Cboc0yrr.css"])))=>i.map(i=>d[i]);
import{c as $e,a as Se,e as Fe,l as Ee,r as x,j as e,L as I,F as y,P as z,S as R,n as Ae,d as j,x as Z,C as Pe,q as Re,U as Q,_ as C}from"./index-Cte9M9zr.js";import{D as Le}from"./DepreciationCalculator-CFrmSYxb.js";import{P as Me,y as B}from"./PreviousYearImportModal-Cmmp6bxV.js";import{g as Oe,c as ze,f as i,A as ee,a as Xe,b as Te}from"./TaxFilingService-VNLM3F01.js";import{g as Ue,a as Ve,d as Ye}from"./eTaxExportService-DEuuuqQn.js";import{e as He}from"./CorporateTaxService-wsKGjjao.js";import{d as F,p as E}from"./pdfAutoFillService-PLPbwm7Q.js";import{a as We,b as Je,c as qe,d as Ge}from"./pdfJapaneseService-Dtu4oZrB.js";import{A as te}from"./arrow-left-DwSMUrT_.js";import{C as se}from"./calculator-BmbL7nmW.js";import{D as k}from"./download-WVyvOCYo.js";import{A as Ke}from"./arrow-right-gQUG1Phy.js";import{C as M}from"./circle-check-big-DeImdQY4.js";import{C as v}from"./copy-ThNu6tuH.js";import{E as O}from"./external-link-C7N_YwPC.js";import{R as A}from"./refresh-cw-B5YdYT7O.js";import{I as Ze}from"./info-CEKsND1J.js";import"./circle-question-mark-D8QNNe1k.js";import"./geminiAIService-DQoIspWT.js";import"./loader-circle-DEKlloMj.js";import"./save-BOp2MQdj.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],Be=$e("file-code",Qe),P=[{id:1,title:"åŸºæœ¬æƒ…å ±",icon:y,description:"ç”³å‘Šã®åŸºæœ¬è¨­å®š"},{id:2,title:"åæ”¯ç¢ºèª",icon:se,description:"å£²ä¸Šãƒ»çµŒè²»ã®ç¢ºèª"},{id:3,title:"æ¸›ä¾¡å„Ÿå´",icon:se,description:"å›ºå®šè³‡ç”£ã®å„Ÿå´è¨ˆç®—"},{id:4,title:"æ§é™¤å…¥åŠ›",icon:z,description:"å„ç¨®æ§é™¤ã®å…¥åŠ›"},{id:5,title:"AIè¨ºæ–­",icon:R,description:"AIã«ã‚ˆã‚‹ç¯€ç¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹"},{id:6,title:"ç”³å‘Šæ›¸ä½œæˆ",icon:k,description:"PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"}],vt=()=>{const{user:d}=Se(),{currentBusinessType:a}=Fe(),w=(a==null?void 0:a.business_type)==="corporation",{transactions:_}=Ee(d==null?void 0:d.id,a==null?void 0:a.business_type),[p,X]=x.useState(1),[T,U]=x.useState(!1),D=new Date().getFullYear(),[c,ae]=x.useState(D-1),[u,V]=x.useState(!0),[b,$]=x.useState([]),[Y,ne]=x.useState([]),[H,re]=x.useState(0),[N,le]=x.useState(0),[ie,W]=x.useState([]),[g,S]=x.useState({name:"",address:"",idNumber:""}),[o,J]=x.useState(null),[oe,q]=x.useState(!1),[f,ce]=x.useState(!1);x.useEffect(()=>{(async()=>{if(d!=null&&d.id&&(a!=null&&a.business_type))try{const n=await B.getLatest(d.id,a.business_type);J(n)}catch(n){console.error("å‰å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:",n)}})()},[d==null?void 0:d.id,a==null?void 0:a.business_type]),x.useEffect(()=>{$(Oe(u))},[u]);const s=x.useMemo(()=>{const t=ze(_,c,(a==null?void 0:a.business_type)||"individual",b),n=[...t.expensesByCategory],r=t.totalExpenses+N;return N>0&&(n.push({category:"æ¸›ä¾¡å„Ÿå´è²»",amount:N,percentage:r>0?N/r*100:0}),n.forEach(l=>{l.percentage=r>0?l.amount/r*100:0}),n.sort((l,m)=>m.amount-l.amount)),{...t,totalExpenses:r,expensesByCategory:n,netIncome:t.netIncome-N,taxableIncome:Math.max(0,t.taxableIncome-N)}},[_,c,a,b,N]),me=()=>{p<P.length&&X(p+1)},de=()=>{p>1&&X(p-1)},xe=()=>{if(!a){C(()=>import("./index-Cte9M9zr.js").then(t=>t.a3),__vite__mapDeps([0,1])).then(t=>t.default.error("ç™»éŒ²ã•ã‚ŒãŸäº‹æ¥­æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚é€£æºè¨­å®šã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚"));return}S({name:w?a.company_name:a.representative_name,address:a.address||"",idNumber:a.tax_number||""}),C(()=>import("./index-Cte9M9zr.js").then(t=>t.a3),__vite__mapDeps([0,1])).then(t=>t.default.success("äº‹æ¥­æƒ…å ±ã‚’è»¢è¨˜ã—ã¾ã—ãŸ"))},he=()=>{if(!_||_.length===0){C(()=>import("./index-Cte9M9zr.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.error("å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"));return}const t=He(_,c);if(t.length===0){C(()=>import("./index-Cte9M9zr.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.error("è»¢è¨˜å¯èƒ½ãªæ¸›ä¾¡å„Ÿå´è³‡ç”£ï¼ˆã‚¿ã‚°: depreciation_assetï¼‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"));return}W(t),C(()=>import("./index-Cte9M9zr.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.success(`${t.length}ä»¶ã®æ¸›ä¾¡å„Ÿå´è³‡ç”£ã‚’è»¢è¨˜ã—ã¾ã—ãŸ`))},pe=(t,n)=>{le(t),W(n)},ue=t=>{const n=ee.find(r=>r.type===t);n&&!b.find(r=>r.type===t)&&$([...b,{id:Date.now().toString(),...n,amount:0,isApplicable:!0}])},be=t=>{$(b.filter(n=>n.id!==t))},ge=(t,n)=>{$(b.map(r=>r.id===t?{...r,amount:n}:r))},fe=async()=>{U(!0);try{const t=await Te(s,{});ne(t.suggestions),re(t.estimatedSavings)}catch(t){console.error("AIè¨ºæ–­ã‚¨ãƒ©ãƒ¼:",t)}finally{U(!1)}},G=()=>{const t=`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
           ${w?"æ³•äººç¨ç”³å‘Šæ›¸":"ç¢ºå®šç”³å‘Šæ›¸"}ï¼ˆ${c}å¹´åº¦ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ°å:       ${g.name||"ï¼ˆæœªå…¥åŠ›ï¼‰"}
ç´ç¨åœ°:     ${g.address||"ï¼ˆæœªå…¥åŠ›ï¼‰"}
${w?"æ³•äººç•ªå·":"å€‹äººç•ªå·"}:   ${g.idNumber||"ï¼ˆæœªå…¥åŠ›ï¼‰"}

ç”³å‘Šæ–¹æ³•: ${u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"}
ä½œæˆæ—¥æ™‚: ${new Date().toLocaleString("ja-JP")}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€åæ”¯å†…è¨³ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å£²ä¸Šé«˜:     ${i(s.totalRevenue)}
çµŒè²»åˆè¨ˆ:   ${i(s.totalExpenses)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
äº‹æ¥­æ‰€å¾—:   ${i(s.netIncome)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€æ§é™¤å†…è¨³ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${b.filter(h=>h.isApplicable).map(h=>`${h.name.padEnd(20,"ã€€")}: ${i(h.amount)}`).join(`
`)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ§é™¤åˆè¨ˆ:   ${i(s.totalDeductions)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€ç¨é¡è¨ˆç®—ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
èª²ç¨æ‰€å¾—:   ${i(s.taxableIncome)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰€å¾—ç¨é¡:   ${i(s.estimatedTax)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€»ã“ã®æ›¸é¡ã¯Ainanceã§ç”Ÿæˆã•ã‚ŒãŸæ¦‚ç®—è³‡æ–™ã§ã™ã€‚
  æ­£å¼ãªç¢ºå®šç”³å‘Šã¯å›½ç¨åºã®e-Taxã§ãŠæ‰‹ç¶šããã ã•ã„ã€‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`.trim(),n=new Blob(["\uFEFF"+t],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=`ç¢ºå®šç”³å‘Šæ›¸_${c}å¹´åº¦.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l);const m=window.open("","_blank");m&&(m.document.write(`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¢ºå®šç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ${c}å¹´åº¦</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            padding: 40px;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            color: #60a5fa;
            margin-bottom: 8px;
            font-size: 24px;
        }
        .subtitle {
            text-align: center;
            color: #9ca3af;
            margin-bottom: 32px;
            font-size: 14px;
        }
        pre {
            background: rgba(0,0,0,0.3);
            padding: 24px;
            border-radius: 12px;
            font-family: 'SFMono-Regular', 'Consolas', 'Menlo', monospace;
            font-size: 14px;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 32px;
        }
        button {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }
        .print-btn {
            background: #3b82f6;
            color: white;
        }
        .print-btn:hover {
            background: #2563eb;
        }
        .close-btn {
            background: rgba(255,255,255,0.1);
            color: #e0e0e0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .close-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        @media print {
            body {
                background: white;
                color: black;
            }
            .container {
                background: white;
                box-shadow: none;
            }
            pre {
                background: #f5f5f5;
            }
            .actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“„ ç¢ºå®šç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h1>
        <p class="subtitle">${c}å¹´åº¦ | ${u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"} | ä½œæˆæ—¥: ${new Date().toLocaleDateString("ja-JP")}</p>
        <pre>${t}</pre>
        <div class="actions">
            <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ å°åˆ·ã™ã‚‹</button>
            <button class="close-btn" onclick="window.close()">âœ• é–‰ã˜ã‚‹</button>
        </div>
    </div>
</body>
</html>
            `),m.document.close()),setTimeout(()=>URL.revokeObjectURL(r),1e3)},je=()=>e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:P.map((t,n)=>e.jsxs(Ae.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${p>t.id?"bg-success text-white":p===t.id?"bg-primary text-white":"bg-surface-highlight text-text-muted"}`,children:p>t.id?e.jsx(j,{className:"w-4 h-4"}):e.jsx(t.icon,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-xs mt-2 hidden sm:block ${p>=t.id?"text-text-main font-medium":"text-text-muted"}`,children:t.title})]}),n<P.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded ${p>t.id?"bg-success":"bg-surface-highlight"}`})]},t.id))})}),Ne=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-surface border border-border rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Q,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-text-main mb-1",children:"å‰æœŸãƒ‡ãƒ¼ã‚¿ã®å¼•ãç¶™ã"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:"å‰æœŸã®æ±ºç®—ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ã“ã¨ã§ã€ä»ŠæœŸã®åæ”¯æ¯”è¼ƒã‚„BSã®æœŸé¦–æ®‹é«˜è¨­å®šãŒã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã¾ã™ã€‚"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[o?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success font-medium",children:[e.jsx(M,{className:"w-4 h-4"}),o.year,"å¹´åº¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå–è¾¼æ¸ˆã¿ã§ã™"]}):e.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[e.jsx(Q,{className:"w-4 h-4"}),"å‰æœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"]}),e.jsxs(I,{to:"/settlement-history",className:"inline-flex items-center gap-2 px-4 py-2 bg-surface-highlight border border-border text-text-muted hover:text-text-main rounded-lg transition-colors text-sm font-medium",children:[e.jsx(y,{className:"w-4 h-4"}),"å±¥æ­´ãƒ»å¼•ç¶™ãç®¡ç†"]})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-1",children:[w?"æ³•äººç¨ç”³å‘Š":"ç¢ºå®šç”³å‘Š","ã®åŸºæœ¬è¨­å®š"]}),e.jsx("p",{className:"text-text-muted",children:"ç”³å‘Šå¹´åº¦ã€æ–¹æ³•ã€ãŠã‚ˆã³åŸºæœ¬æƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚"})]}),e.jsxs("button",{onClick:xe,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(A,{className:"w-4 h-4"}),"ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è»¢è¨˜"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"æ°å / æ°åï¼ˆåç§°ï¼‰"}),e.jsx("input",{type:"text",value:g.name,onChange:t=>S({...g,name:t.target.value}),className:"input-base",placeholder:"å±±ç”° å¤ªéƒ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç´ç¨åœ° / ä½æ‰€"}),e.jsx("input",{type:"text",value:g.address,onChange:t=>S({...g,address:t.target.value}),className:"input-base",placeholder:"æ±äº¬éƒ½æ¸‹è°·åŒº..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:w?"æ³•äººç•ªå·":"å€‹äººç•ªå·"}),e.jsx("input",{type:"text",value:g.idNumber,onChange:t=>S({...g,idNumber:t.target.value}),className:"input-base",placeholder:"123456789012"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç”³å‘Šå¹´åº¦"}),e.jsx("select",{value:c,onChange:t=>ae(Number(t.target.value)),className:"input-base",children:[D,...Array.from({length:4},(t,n)=>D-1-n)].map(t=>e.jsxs("option",{value:t,children:[t,"å¹´åº¦ï¼ˆ",t,"å¹´1æœˆã€œ12æœˆï¼‰",t===D&&" â€»é€²è¡Œä¸­"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç”³å‘Šæ–¹æ³•"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border border-border rounded-lg cursor-pointer hover:bg-surface-highlight transition-colors",children:[e.jsx("input",{type:"radio",checked:u,onChange:()=>V(!0),className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-text-main",children:"é’è‰²ç”³å‘Š"}),e.jsx("span",{className:"ml-2 text-xs text-success",children:"æœ€å¤§65ä¸‡å††æ§é™¤"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"è¤‡å¼ç°¿è¨˜ã§æœ€å¤§65ä¸‡å††ã®æ§é™¤ãŒå—ã‘ã‚‰ã‚Œã¾ã™"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border border-border rounded-lg cursor-pointer hover:bg-surface-highlight transition-colors",children:[e.jsx("input",{type:"radio",checked:!u,onChange:()=>V(!1),className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-text-main",children:"ç™½è‰²ç”³å‘Š"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"ç°¡æ˜“çš„ãªå¸³ç°¿ã§ç”³å‘Šã§ãã¾ã™"})]})]})]})]})]}),e.jsxs("div",{className:"bg-info-light border border-info/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Ze,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"é’è‰²ç”³å‘ŠãŒãŠã™ã™ã‚ï¼"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Ainanceã§å–å¼•ã‚’è¨˜éŒ²ã—ã¦ã„ã‚Œã°ã€è¤‡å¼ç°¿è¨˜ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚ 65ä¸‡å††ã®æ§é™¤ã§ç¨é‡‘ãŒãŠå¾—ã«ãªã‚Šã¾ã™ã€‚"})]})]})]}),ve=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"åæ”¯ã®ç¢ºèª"}),e.jsxs("p",{className:"text-text-muted mb-6",children:[c,"å¹´åº¦ã®å–å¼•ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•é›†è¨ˆã—ãŸçµæœã§ã™ã€‚"]})]}),o&&e.jsxs("div",{className:"flex items-center justify-between bg-surface border border-border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-text-main block",children:["å‰æœŸ (",o.year,"å¹´åº¦) ã¨æ¯”è¼ƒ"]}),e.jsx("span",{className:"text-xs text-text-muted",children:"ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å¢—æ¸›ã‚’ç¢ºèªã§ãã¾ã™"})]})]}),e.jsx("button",{onClick:()=>ce(!f),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${f?"bg-primary":"bg-border"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-success font-medium",children:"å£²ä¸Šé«˜"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.totalRevenue)}),f&&o&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalRevenue>=o.revenue?"text-success":"text-error"}`,children:[s.totalRevenue>=o.revenue?"â†‘":"â†“",i(Math.abs(s.totalRevenue-o.revenue)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",o.year,"åº¦: ",i(o.revenue),")"]})]})]}),e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-success font-medium",children:"é›‘åå…¥"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.totalMiscellaneousIncome)}),f&&o&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalMiscellaneousIncome>=(o.non_operating_income||0)?"text-success":"text-error"}`,children:[s.totalMiscellaneousIncome>=(o.non_operating_income||0)?"â†‘":"â†“",i(Math.abs(s.totalMiscellaneousIncome-(o.non_operating_income||0))),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",o.year,"åº¦: ",i(o.non_operating_income||0),")"]})]})]}),e.jsxs("div",{className:"bg-error-light border border-error/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-error font-medium",children:"çµŒè²»åˆè¨ˆ"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.totalExpenses)}),f&&o&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalExpenses<=o.operating_expenses?"text-success":"text-error"}`,children:[s.totalExpenses<=o.operating_expenses?"â†“":"â†‘",i(Math.abs(s.totalExpenses-o.operating_expenses)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",o.year,"åº¦: ",i(o.operating_expenses),")"]})]})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"äº‹æ¥­æ‰€å¾—ï¼ˆåˆ©ç›Šï¼‰"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.netIncome)}),f&&o&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.netIncome>=o.net_income?"text-success":"text-error"}`,children:[s.netIncome>=o.net_income?"â†‘":"â†“",i(Math.abs(s.netIncome-o.net_income))]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("h4",{className:"font-medium text-text-main mb-4",children:"çµŒè²»ã‚«ãƒ†ã‚´ãƒªå†…è¨³"}),s.expensesByCategory.length>0?e.jsx("div",{className:"space-y-4",children:s.expensesByCategory.map((t,n)=>{const r=o==null?void 0:o.category_breakdown.find(l=>l.category===t.category);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{className:"text-text-main",children:t.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-medium text-text-main",children:i(t.amount)}),e.jsxs("span",{className:"text-text-muted text-sm ml-2",children:["(",Xe(t.percentage),")"]})]})]}),e.jsx("div",{className:"w-full bg-surface-highlight h-2 rounded-full overflow-hidden mb-1",children:e.jsx("div",{className:"bg-primary h-full rounded-full",style:{width:`${t.percentage}%`}})}),f&&o&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("p",{className:`text-[10px] font-medium ${r?t.amount<=r.amount?"text-success":"text-error":"text-text-muted"}`,children:r?e.jsxs(e.Fragment,{children:[t.amount<=r.amount?"â†“":"â†‘"," ",i(Math.abs(t.amount-r.amount)),e.jsxs("span",{className:"text-text-muted font-normal ml-1",children:["(",o.year,"åº¦: ",i(r.amount),")"]})]}):"å‰æœŸãƒ‡ãƒ¼ã‚¿ãªã—"})})]},n)})}):e.jsxs("p",{className:"text-text-muted text-center py-4",children:[c,"å¹´åº¦ã®çµŒè²»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"]})]}),s.totalRevenue===0&&s.totalExpenses===0&&e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:[c,"å¹´åº¦ã®å–å¼•ã‚’ç™»éŒ²ã—ã¦ã‹ã‚‰ç¢ºå®šç”³å‘Šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",e.jsx(I,{to:"/transactions",className:"text-primary hover:underline ml-1",children:"å–å¼•ã‚’ç™»éŒ²ã™ã‚‹ â†’"})]})]})]})]}),ye=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-1",children:"æ¸›ä¾¡å„Ÿå´è³‡ç”£ã®ç™»éŒ²"}),e.jsx("p",{className:"text-text-muted",children:"å›ºå®šè³‡ç”£ã®ç™»éŒ²ã¨ä»ŠæœŸã®å„Ÿå´é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚"})]}),e.jsxs("button",{onClick:he,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(A,{className:"w-4 h-4"}),"å–å¼•ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è»¢è¨˜"]})]}),e.jsx(Le,{initialAssets:ie,onCalculate:pe})]}),we=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"å„ç¨®æ§é™¤ã®å…¥åŠ›"}),e.jsx("p",{className:"text-text-muted mb-6",children:"è©²å½“ã™ã‚‹æ§é™¤ã‚’è¿½åŠ ã—ã¦é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚æ§é™¤ãŒå¤šã„ã»ã©ç¨é‡‘ãŒå®‰ããªã‚Šã¾ã™ã€‚"})]}),e.jsx("div",{className:"space-y-4",children:b.map(t=>e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-success"}),e.jsx("span",{className:"font-medium text-text-main",children:t.name})]}),e.jsx("p",{className:"text-sm text-text-muted mt-1 ml-7",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-7 sm:ml-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.amount,onChange:n=>ge(t.id,Number(n.target.value)),className:"input-base pr-8 w-40",placeholder:"é‡‘é¡",disabled:t.type==="basic"||t.type==="blue_return"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none",children:"å††"})]}),t.type!=="basic"&&t.type!=="blue_return"&&e.jsx("button",{onClick:()=>be(t.id),className:"p-2 text-error hover:bg-error-light rounded-lg transition-colors",children:e.jsx(Re,{className:"w-5 h-5"})})]})]},t.id))}),e.jsxs("div",{className:"bg-surface-highlight border border-border rounded-xl p-5",children:[e.jsxs("h4",{className:"font-medium text-text-main mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"æ§é™¤ã‚’è¿½åŠ "]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:ee.filter(t=>!b.find(n=>n.type===t.type)).map(t=>e.jsxs("button",{onClick:()=>ue(t.type),className:"flex items-center gap-3 p-3 bg-surface border border-border rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-light rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-main text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-text-muted",children:t.description})]})]},t.type))})]}),e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-text-main",children:"æ§é™¤åˆè¨ˆ"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:i(s.totalDeductions)})]})]}),ke=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),"AIã«ã‚ˆã‚‹ç¯€ç¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"AIãŒã‚ãªãŸã®åæ”¯ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ç¯€ç¨ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"èª²ç¨æ‰€å¾—"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.taxableIncome)}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"äº‹æ¥­æ‰€å¾— - å„ç¨®æ§é™¤"})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"äºˆæƒ³æ‰€å¾—ç¨é¡"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.estimatedTax)}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"â€»æ¦‚ç®—ã§ã™ã€‚å®Ÿéš›ã®ç¨é¡ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™"})]})]}),Y.length===0?e.jsx("button",{onClick:fe,disabled:T,className:"btn-primary w-full py-4",children:T?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5 animate-spin"}),"AIåˆ†æä¸­..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5"}),"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å—ã‘ã‚‹"]})}):e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"AIã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹"})]}),e.jsx("ul",{className:"space-y-3",children:Y.map((t,n)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-text-main",children:t})]},n))}),H>0&&e.jsx("div",{className:"bg-success-light border border-success/20 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-success font-medium",children:["æ¨å®šç¯€ç¨å¯èƒ½é¡: ",i(H)]})})]})]}),_e=()=>{const t={fiscalYear:c,revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:b.filter(m=>m.isApplicable).map(m=>({type:m.type,name:m.name,amount:m.amount})),totalDeductions:s.totalDeductions,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax},n=u?Ue(t):Ve(t),r=u?`é’è‰²ç”³å‘Šæ±ºç®—æ›¸_${c}å¹´åº¦.xtx`:`åæ”¯å†…è¨³æ›¸_${c}å¹´åº¦.xml`;Ye(n,r);const l=window.open("","_blank");l&&(l.document.write(`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>e-Taxç”¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ${c}å¹´åº¦</title>
    <style>
        body { font-family: 'Hiragino Sans', sans-serif; background: #1a1a2e; color: #e0e0e0; padding: 40px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: #60a5fa; text-align: center; }
        .info { background: rgba(96,165,250,0.1); border: 1px solid rgba(96,165,250,0.3); padding: 16px; border-radius: 8px; margin-bottom: 24px; }
        pre { background: #0d1117; padding: 20px; border-radius: 8px; overflow-x: auto; font-size: 12px; line-height: 1.6; }
        .actions { display: flex; gap: 16px; justify-content: center; margin-top: 24px; }
        button { padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; font-weight: 600; }
        .primary { background: #3b82f6; color: white; }
        .secondary { background: rgba(255,255,255,0.1); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“„ ${u?"é’è‰²ç”³å‘Šæ±ºç®—æ›¸":"åæ”¯å†…è¨³æ›¸"}ï¼ˆ${c}å¹´åº¦ï¼‰</h1>
        <div class="info">
            <p>âš ï¸ <strong>ã“ã®XMLãƒ•ã‚¡ã‚¤ãƒ«ã¯å‚è€ƒè³‡æ–™ã§ã™ã€‚</strong></p>
            <p>æ­£å¼ãªç¢ºå®šç”³å‘Šã¯ã€å›½ç¨åºã®ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚XMLãƒ‡ãƒ¼ã‚¿ã¯å…¥åŠ›ã®å‚è€ƒã«ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ã€‚</p>
        </div>
        <pre>${n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>
        <div class="actions">
            <button class="secondary" onclick="window.close()">âœ• é–‰ã˜ã‚‹</button>
        </div>
    </div>
</body>
</html>
            `),l.document.close())},Ie=()=>{const[t,n]=x.useState(null),r=async(l,m)=>{try{await navigator.clipboard.writeText(String(l).replace(/[Â¥,]/g,"")),n(m),setTimeout(()=>n(null),2e3)}catch(h){console.error("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:",h)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),w?"æ³•äººç¨ç”³å‘Šæ›¸":"ç¢ºå®šç”³å‘Šæ›¸","ã®ä½œæˆ"]}),e.jsx("p",{className:"text-text-muted mb-2",children:"å…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ã€æ›¸é¡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚"}),e.jsx("p",{className:"text-xs text-text-muted",children:"ğŸ’¡ å„é …ç›®ã®å³å´ã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã§ã€e-Taxå…¥åŠ›æ™‚ã«ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã§ãã¾ã™"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl divide-y divide-border",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"ç”³å‘Šå¹´åº¦"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"font-medium text-text-main",children:[c,"å¹´åº¦"]})})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"ç”³å‘Šæ–¹æ³•"}),e.jsx("span",{className:"font-medium text-text-main",children:u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"å£²ä¸Šé«˜"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-success",children:i(s.totalRevenue)}),e.jsx("button",{onClick:()=>r(s.totalRevenue,"revenue"),className:`p-1.5 rounded transition-colors ${t==="revenue"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="revenue"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"é›‘åå…¥"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-success",children:i(s.totalMiscellaneousIncome)}),e.jsx("button",{onClick:()=>r(s.totalMiscellaneousIncome,"miscellaneous"),className:`p-1.5 rounded transition-colors ${t==="miscellaneous"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="miscellaneous"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"çµŒè²»åˆè¨ˆ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-error",children:i(s.totalExpenses)}),e.jsx("button",{onClick:()=>r(s.totalExpenses,"expenses"),className:`p-1.5 rounded transition-colors ${t==="expenses"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="expenses"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"äº‹æ¥­æ‰€å¾—"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:i(s.netIncome)}),e.jsx("button",{onClick:()=>r(s.netIncome,"netIncome"),className:`p-1.5 rounded transition-colors ${t==="netIncome"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="netIncome"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"æ§é™¤åˆè¨ˆ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-primary",children:i(s.totalDeductions)}),e.jsx("button",{onClick:()=>r(s.totalDeductions,"deductions"),className:`p-1.5 rounded transition-colors ${t==="deductions"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="deductions"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"èª²ç¨æ‰€å¾—"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:i(s.taxableIncome)}),e.jsx("button",{onClick:()=>r(s.taxableIncome,"taxableIncome"),className:`p-1.5 rounded transition-colors ${t==="taxableIncome"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="taxableIncome"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-primary-light",children:[e.jsx("span",{className:"font-medium text-text-main",children:"äºˆæƒ³æ‰€å¾—ç¨é¡"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-primary text-lg",children:i(s.estimatedTax)}),e.jsx("button",{onClick:()=>r(s.estimatedTax,"tax"),className:`p-1.5 rounded transition-colors ${t==="tax"?"bg-success text-white":"hover:bg-primary/20 text-primary"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="tax"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-text-main flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-slate-400"}),"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ç”³å‘Š"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:G,className:"px-4 py-3 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"ç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"]}),e.jsxs("button",{onClick:_e,className:"px-4 py-3 border border-slate-500 text-slate-300 rounded-lg hover:bg-slate-700/50 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"e-Taxç”¨XMLãƒ•ã‚¡ã‚¤ãƒ«"]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-600/50 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"bg-blue-500/20 text-blue-400 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"NEW"}),e.jsx("h5",{className:"text-sm font-semibold text-text-main",children:"æ—¥æœ¬èªPDFè‡ªå‹•ç”Ÿæˆ"})]}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:(a==null?void 0:a.business_type)==="corporation"?"æ³•äººç¨ç”³å‘Šæ›¸ãƒ»æ±ºç®—å ±å‘Šæ›¸ï¼ˆè²¡å‹™ä¸‰è¡¨ï¼‰ã‚’æ—¥æœ¬èªPDFã§ç”Ÿæˆ":"ç¢ºå®šç”³å‘Šæ›¸Bãƒ»é’è‰²ç”³å‘Šæ±ºç®—æ›¸ã‚’æ—¥æœ¬èªPDFã§ç”Ÿæˆ"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(a==null?void 0:a.business_type)!=="corporation"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{var l,m;try{const h={name:(a==null?void 0:a.representative_name)||(d==null?void 0:d.name)||"",address:(a==null?void 0:a.address)||"",tradeName:(a==null?void 0:a.company_name)||"",phone:(a==null?void 0:a.phone)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:{basic:((l=b.find(L=>L.type==="basic"))==null?void 0:l.amount)||48e4,blueReturn:u?65e4:0,socialInsurance:(m=b.find(L=>L.type==="socialInsurance"))==null?void 0:m.amount},taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:c,isBlueReturn:u},K=await We(h),De=`ç¢ºå®šç”³å‘Šæ›¸B_${c}å¹´åº¦.pdf`;F(K,De),E(K)}catch(h){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",h),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"ç¢ºå®šç”³å‘Šæ›¸B"]}),u&&e.jsxs("button",{onClick:async()=>{try{const l={name:d==null?void 0:d.name,address:(a==null?void 0:a.address)||"",tradeName:(a==null?void 0:a.company_name)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:{blueReturn:65e4},taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:c,isBlueReturn:!0},m=await Je(l),h=`é’è‰²ç”³å‘Šæ±ºç®—æ›¸_${c}å¹´åº¦.pdf`;F(m,h),E(m)}catch(l){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",l),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"é’è‰²ç”³å‘Šæ±ºç®—æ›¸"]})]}),(a==null?void 0:a.business_type)==="corporation"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{try{const l={companyName:(a==null?void 0:a.company_name)||"ä¼šç¤¾å",representativeName:(a==null?void 0:a.representative_name)||"",address:(a==null?void 0:a.address)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:c,businessType:"corporation"},m=await qe(l),h=`æ³•äººç¨ç”³å‘Šæ›¸_${c}å¹´åº¦.pdf`;F(m,h),E(m)}catch(l){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",l),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"æ³•äººç¨ç”³å‘Šæ›¸"]}),e.jsxs("button",{onClick:async()=>{try{const l={revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:c,businessType:"corporation",companyName:(a==null?void 0:a.company_name)||"ä¼šç¤¾å",representativeName:(a==null?void 0:a.representative_name)||"",capital:1e6},m=await Ge(l),h=`æ±ºç®—å ±å‘Šæ›¸_${c}å¹´åº¦.pdf`;F(m,h),E(m)}catch(l){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",l),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"æ±ºç®—å ±å‘Šæ›¸ï¼ˆè²¡å‹™ä¸‰è¡¨ï¼‰"]})]})]})]}),(a==null?void 0:a.business_type)==="corporation"&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-5",children:[e.jsx("h5",{className:"text-sm font-semibold text-text-main mb-1",children:"å…¬å¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"å›½ç¨åºã®æ³•äººç¨ç”³å‘Šæ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆä»¤å’Œ6å¹´4æœˆ1æ—¥ä»¥å¾Œçµ‚äº†äº‹æ¥­å¹´åº¦åˆ†ï¼‰"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/01_01.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨ä¸€ï¼ˆä¸€ï¼‰"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/01_02.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨ä¸€ï¼ˆäºŒï¼‰"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/04.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨å››"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/01.htm",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(O,{className:"w-3.5 h-3.5"}),"å…¨åˆ¥è¡¨ä¸€è¦§"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-text-main mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-slate-400"}),"e-Taxã§ç›´æ¥ç”³å‘Šã™ã‚‹"]}),e.jsxs("ol",{className:"text-xs text-slate-400 space-y-2 mb-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"1"}),"ä¸Šã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã§å„æ•°å€¤ã‚’ã‚³ãƒ”ãƒ¼"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"2"}),"ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"3"}),"ã‚³ãƒ”ãƒ¼ã—ãŸæ•°å€¤ã‚’è²¼ã‚Šä»˜ã‘ã¦å…¥åŠ›"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"4"}),"ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã§é›»å­ç½²å â†’ é€ä¿¡å®Œäº†ï¼"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("a",{href:"https://www.keisan.nta.go.jp/kyoutu/ky/smsp/top",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium",children:[e.jsx(O,{className:"w-4 h-4"}),"ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼"]}),e.jsx(I,{to:"/tax-filing-guide",className:"inline-flex items-center gap-2 px-4 py-2.5 border border-slate-500 text-slate-300 rounded-lg hover:bg-slate-700/50 transition-colors text-sm font-medium",children:"ğŸ“– è©³ã—ã„ç”³å‘Šã‚¬ã‚¤ãƒ‰"})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"ã”æ³¨æ„ãã ã•ã„"}),e.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"ã“ã®è¨ˆç®—ã¯æ¦‚ç®—ã§ã™ã€‚æ­£ç¢ºãªç¨é¡ã¯ç¨å‹™ç½²ã«ã”ç¢ºèªãã ã•ã„"}),e.jsx("li",{children:"ç¢ºå®šç”³å‘Šã®æœŸé™ã¯ç¿Œå¹´3æœˆ15æ—¥ã§ã™ï¼ˆä¾‹ï¼š2025å¹´åº¦åˆ†ã¯2026å¹´3æœˆ15æ—¥ã¾ã§ï¼‰"}),e.jsx("li",{children:"é’è‰²ç”³å‘Šç‰¹åˆ¥æ§é™¤65ä¸‡å††ã®é©ç”¨ã«ã¯é›»å­ç”³å‘ŠãŒå¿…è¦ã§ã™"})]})]})]})]})},Ce=()=>{switch(p){case 1:return e.jsx(Ne,{});case 2:return e.jsx(ve,{});case 3:return e.jsx(ye,{});case 4:return e.jsx(we,{});case 5:return e.jsx(ke,{});case 6:return e.jsx(Ie,{});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(I,{to:"/dashboard",className:"flex items-center text-xs text-primary hover:text-primary-hover",children:[e.jsx(te,{className:"h-4 w-4 mr-1.5"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]}),e.jsx(I,{to:"/tax-filing-guide",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-xs font-medium",children:"ğŸ“– ç”³å‘Šã‚¬ã‚¤ãƒ‰"})]}),e.jsx("h1",{className:"text-xl font-bold text-text-main mb-1",children:"ç¢ºå®šç”³å‘Šã‚µãƒãƒ¼ãƒˆ"}),e.jsx("p",{className:"text-xs text-text-muted",children:"6ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç°¡å˜ã«ç¢ºå®šç”³å‘Šã‚’å®Œäº†ã§ãã¾ã™"})]}),e.jsx(je,{}),e.jsx("div",{className:"bg-surface border border-border rounded-xl p-3 mb-6",children:Ce()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:de,disabled:p===1,className:`btn-ghost ${p===1?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(te,{className:"w-5 h-5"}),"æˆ»ã‚‹"]}),p<P.length?e.jsxs("button",{onClick:me,className:"btn-primary",children:["æ¬¡ã¸",e.jsx(Ke,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:G,className:"btn-success",children:[e.jsx(M,{className:"w-5 h-5"}),"å®Œäº†"]})]})]}),e.jsx(Me,{isOpen:oe,onClose:()=>q(!1),userId:(d==null?void 0:d.id)||"",businessType:(a==null?void 0:a.business_type)||"individual",onImportSuccess:()=>{d!=null&&d.id&&(a!=null&&a.business_type)&&B.getLatest(d.id,a.business_type).then(J)}})]})};export{vt as default};
