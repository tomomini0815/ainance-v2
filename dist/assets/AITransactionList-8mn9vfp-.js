import{c as p,r as d,s as I,z as S,j as e,C as q,S as re,X as U,h as ae}from"./index-B-if9VQJ.js";import{B as H}from"./brain-DpYqCMWW.js";import{S as le}from"./sparkles-Csqw_Y1v.js";import{T as G}from"./trending-up-ImEnoBKX.js";import{R as ne}from"./refresh-cw-CjuiOzr4.js";import{S as J}from"./square-CbyoZEwl.js";import{E as ie}from"./eye-CwJ7VOW3.js";import{C as ce,S as de}from"./star-CrMDy7ES.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xe=p("activity",oe);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],he=p("award",me);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],pe=p("chart-pie",ue);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],X=p("cpu",fe);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],je=p("database",ge);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Ne=p("gauge",be);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ye=p("globe",ve);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ke=p("lightbulb",we);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],_e=p("rocket",Ce);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],K=p("square-check",Se);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Q=p("target",Me);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Te=p("trophy",Ae),Ie=()=>{const[j,h]=d.useState([]),[f,i]=d.useState([]),[x,g]=d.useState(!1),A=d.useCallback(()=>{g(!0),I.from("transactions").select("*").order("date",{ascending:!1}).then(({data:n,error:a})=>{a?(console.error(`取引履歴の取得に失敗しました: ${a.message}`),h([])):h(n||[])}),I.from("ai_transactions").select("*").order("created_at",{ascending:!1}).then(({data:n,error:a})=>{a?(console.error(`AI取引履歴の取得に失敗しました: ${a.message}`),i([])):i(n||[]),g(!1)})},[]),w=async n=>{try{const m={...n,creator:"mock_user_001",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:o,error:b}=await I.from("transactions").insert(m).select().single();if(b)throw b;const M=o;return h(N=>[M,...N]),S.success("取引が正常に作成されました"),o.id}catch(a){throw console.error("取引の作成に失敗:",a),S.error(`取引の作成に失敗しました: ${a.message}`),a}},F=async(n,a)=>{try{const{data:m,error:o}=await I.from("transactions").update({...a,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(o)throw o;const b=m;h(M=>M.map(N=>N.id===n?b:N)),S.success("取引が正常に更新されました")}catch(m){throw console.error("取引の更新に失敗:",m),S.error(`取引の更新に失敗しました: ${m.message}`),m}},k=async n=>{try{const{error:a}=await I.from("transactions").delete().eq("id",n);if(a)throw a;h(m=>m.filter(o=>o.id!==n)),S.success("取引が正常に削除されました")}catch(a){throw console.error("取引の削除に失敗:",a),S.error(`取引の削除に失敗しました: ${a.message}`),a}},D=async(n,a,m)=>{try{const{data:o,error:b}=await I.from("ai_transactions").update({manual_verified:a,learning_feedback:m,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(b)throw b;const M=o;i(N=>N.map(T=>T.id===n?M:T)),S.success(a?"AI分類を承認しました":"AI分類を却下しました")}catch(o){throw console.error("AI取引の確認に失敗:",o),S.error(`AI取引の確認に失敗しました: ${o.message}`),o}};return d.useEffect(()=>{A()},[A]),{transactions:j,aiTransactions:f,loading:x,fetchAllData:A,createTransaction:w,updateTransaction:F,deleteTransaction:k,verifyAITransaction:D}},$e=({min:j,max:h,onMinChange:f,onMaxChange:i})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[e.jsxs("span",{children:["最小金額: ¥",j||0]}),e.jsxs("span",{children:["最大金額: ¥",h||"∞"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"range",min:"0",max:"1000000",step:"1000",value:j||0,onChange:x=>f(x.target.value),className:"flex-1 h-2 bg-surface-highlight rounded-lg appearance-none cursor-pointer"}),e.jsx("input",{type:"range",min:"0",max:"1000000",step:"1000",value:h||1e6,onChange:x=>i(x.target.value),className:"flex-1 h-2 bg-surface-highlight rounded-lg appearance-none cursor-pointer"})]})]}),ze=({onSelect:j})=>{const h=i=>{const x=new Date;return x.setDate(x.getDate()+i),x.toISOString().split("T")[0]},f=i=>{const x=h(0),g=h(-i);j(g,x)};return e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("button",{onClick:()=>f(0),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"今日"}),e.jsx("button",{onClick:()=>f(6),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去7日間"}),e.jsx("button",{onClick:()=>f(29),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去30日間"}),e.jsx("button",{onClick:()=>f(89),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去90日間"})]})},Ve=()=>{const{aiTransactions:j,loading:h,verifyAITransaction:f}=Ie(),[i,x]=d.useState(""),[g,A]=d.useState(""),[w,F]=d.useState(""),[k,D]=d.useState(""),[n,a]=d.useState([]),[m,o]=d.useState(!0),[b,M]=d.useState(!0),[N,T]=d.useState(""),[C,O]=d.useState({min:"",max:""}),V=()=>{x(""),A(""),F(""),D("")};d.useEffect(()=>{a([])},[i,g,w,k,C]);const c=d.useMemo(()=>j.filter(t=>{var P,z;const r=t.item.toLowerCase().includes(i.toLowerCase())||((P=t.location)==null?void 0:P.toLowerCase().includes(i.toLowerCase()))||((z=t.original_text)==null?void 0:z.toLowerCase().includes(i.toLowerCase())),v=!g||t.ai_category===g;let y=!0;if(w){const _=t.confidence;switch(w){case"high":y=_>=90;break;case"medium":y=_>=70&&_<90;break;case"low":y=_<70;break}}let $=!0;if(k)switch(k){case"verified":$=t.manual_verified===!0;break;case"unverified":$=t.manual_verified===!1;break}let L=!0;if(C.min||C.max){const _=Number(C.min)||0,E=Number(C.max)||1/0;L=t.amount>=_&&t.amount<=E}return r&&v&&y&&$&&L}),[j,i,g,w,k,C]),s=d.useMemo(()=>{const t=c.length,r=c.filter(l=>l.manual_verified).length,v=t>0?c.reduce((l,u)=>l+u.confidence,0)/t:0,y=c.filter(l=>l.confidence>=90).length,$=c.filter(l=>l.confidence>=70&&l.confidence<90).length,L=c.filter(l=>l.confidence<70).length,P=c.reduce((l,u)=>(l[u.ai_category]||(l[u.ai_category]={total:0,verified:0,totalConfidence:0}),l[u.ai_category].total++,l[u.ai_category].totalConfidence+=u.confidence,u.manual_verified&&l[u.ai_category].verified++,l),{}),z=Math.min(100,r/Math.max(t,1)*100),_=v*(z/100),E=t>0?c.reduce((l,u)=>l+(u.processing_time||.5),0)/t:0,R=c.filter(l=>new Date(l.created_at)>new Date(Date.now()-7*24*60*60*1e3)),se=(R.length>0?R.reduce((l,u)=>l+u.confidence,0)/R.length:0)-v;return{totalTransactions:t,verifiedCount:r,verificationRate:t>0?r/t*100:0,averageConfidence:v,highConfidenceCount:y,mediumConfidenceCount:$,lowConfidenceCount:L,highConfidenceRate:t>0?y/t*100:0,categoryAccuracy:P,learningProgress:z,aiMaturity:_,averageProcessingTime:E,weeklyImprovement:se,recentTransactions:R.length}},[c]),W=t=>t>=90?"text-green-600 bg-green-100":t>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",Y=t=>t>=95?{color:"bg-emerald-500",label:"最高精度"}:t>=90?{color:"bg-green-500",label:"高精度"}:t>=80?{color:"bg-surface-highlight0",label:"良好"}:t>=70?{color:"bg-yellow-500",label:"中程度"}:{color:"bg-red-500",label:"要確認"},Z=t=>{a(r=>r.includes(t)?r.filter(v=>v!==t):[...r,t])},ee=()=>{n.length===c.length?a([]):a(c.map(t=>t.id))},B=async(t,r)=>{await f(t,r,N),T("")},te=()=>{const t=c.filter(r=>r.confidence>=90&&!r.manual_verified).map(r=>r.id);if(t.length===0){alert("高信頼度の未確認取引がありません");return}confirm(`信頼度90%以上の${t.length}件を一括承認しますか？`)&&t.forEach(r=>f(r,!0,"スマート一括承認"))};return h?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-text-main mb-2",children:["AI自動仕分けシステム",e.jsx("span",{className:"ml-3 text-sm bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full",children:"v2.0 Pro"})]}),e.jsx("p",{className:"text-text-muted",children:"次世代機械学習による高精度な取引分類と継続的な学習改善"}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"リアルタイム学習"})]}),e.jsxs("div",{className:"flex items-center text-sm text-primary",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ニューラルネットワーク"})]}),e.jsxs("div",{className:"flex items-center text-sm text-purple-600",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ビッグデータ分析"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 lg:mt-0",children:[e.jsxs("button",{onClick:()=>M(!b),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ne,{size:18}),e.jsx("span",{children:"パフォーマンス"})]}),e.jsxs("button",{onClick:()=>o(!m),className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-colors flex items-center space-x-2",children:[e.jsx(H,{size:18}),e.jsx("span",{children:"学習詳細"})]}),e.jsxs("button",{onClick:te,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(le,{size:18}),e.jsx("span",{children:"スマート承認"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-orange-100 to-red-100 px-4 py-2 rounded-lg border border-orange-200",children:[e.jsx(_e,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-orange-800 font-medium",children:"AI分析システム稼働中"})]})]})]}),m&&e.jsxs("div",{className:"mb-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"AI分析総数"}),e.jsx("p",{className:"text-2xl font-bold text-text-main",children:s.totalTransactions}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(H,{className:"w-4 h-4 text-blue-500 mr-1"}),e.jsx("span",{className:"text-xs text-primary",children:"自動分析"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"学習完了率"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.verificationRate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(q,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:[s.verifiedCount,"件確認済み"]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"平均信頼度"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[s.averageConfidence.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Q,{className:"w-4 h-4 text-purple-500 mr-1"}),e.jsx("span",{className:"text-xs text-purple-600",children:"AI精度"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"AI成熟度"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[s.aiMaturity.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(he,{className:"w-4 h-4 text-orange-500 mr-1"}),e.jsx("span",{className:"text-xs text-orange-600",children:"総合スコア"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-indigo-500/10 to-surface-highlight0/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"週間改善"}),e.jsxs("p",{className:`text-2xl font-bold ${s.weeklyImprovement>=0?"text-green-600":"text-red-600"}`,children:[s.weeklyImprovement>=0?"+":"",s.weeklyImprovement.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(G,{className:"w-4 h-4 text-indigo-500 mr-1"}),e.jsx("span",{className:"text-xs text-indigo-600",children:"学習速度"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-primary"}),"処理パフォーマンス"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"平均処理時間"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[s.averageProcessingTime.toFixed(2),"秒"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"処理済み件数"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:s.totalTransactions.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"精度向上率"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["+",s.weeklyImprovement.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-purple-600"}),"信頼度分析"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"高信頼度 (90%+)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:s.highConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${s.highConfidenceCount/Math.max(s.totalTransactions,1)*100}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"中信頼度 (70-89%)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:s.mediumConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${s.mediumConfidenceCount/Math.max(s.totalTransactions,1)*100}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"低信頼度 (70%未満)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-red-600",children:s.lowConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${s.lowConfidenceCount/Math.max(s.totalTransactions,1)*100}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-2 text-green-600"}),"学習成果"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"全体精度"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[s.averageConfidence.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"学習進捗"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[s.learningProgress.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"今週の分析"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[s.recentTransactions,"件"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-6 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),"カテゴリ別AI精度分析"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(s.categoryAccuracy).map(([t,r])=>e.jsxs("div",{className:"bg-background p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-text-main",children:t}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[(r.totalConfidence/r.total).toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"処理件数:"}),e.jsxs("span",{className:"font-medium",children:[r.total,"件"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"確認済み:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[r.verified,"件"]})]}),e.jsx("div",{className:"w-full bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${r.totalConfidence/r.total}%`}})})]})]},t))})]})]}),e.jsx("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"項目・場所・元テキストで検索...",value:i,onChange:t=>x(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:g,onChange:t=>A(t.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべてのカテゴリ"}),e.jsx("option",{value:"交通費",children:"交通費"}),e.jsx("option",{value:"食費",children:"食費"}),e.jsx("option",{value:"消耗品費",children:"消耗品費"}),e.jsx("option",{value:"通信費",children:"通信費"}),e.jsx("option",{value:"光熱費",children:"光熱費"}),e.jsx("option",{value:"その他",children:"その他"})]}),e.jsxs("select",{value:w,onChange:t=>F(t.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべての信頼度"}),e.jsx("option",{value:"high",children:"高信頼度 (90%以上)"}),e.jsx("option",{value:"medium",children:"中信頼度 (70-89%)"}),e.jsx("option",{value:"low",children:"低信頼度 (70%未満)"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("select",{value:k,onChange:t=>D(t.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべての状態"}),e.jsx("option",{value:"verified",children:"確認済み"}),e.jsx("option",{value:"unverified",children:"未確認"})]}),e.jsx(ze,{onSelect:()=>{}})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"金額範囲"}),e.jsx($e,{min:C.min,max:C.max,onMinChange:t=>O(r=>({...r,min:t})),onMaxChange:t=>O(r=>({...r,max:t}))})]}),(i||g||w||k)&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:V,className:"flex items-center text-sm text-text-muted hover:text-text-main",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"フィルターをクリア"]})}),n.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-text-muted",children:[n.length,"件選択中"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(q,{size:16}),e.jsx("span",{children:"一括承認"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-red-700 hover:to-pink-700 transition-colors flex items-center space-x-2",children:[e.jsx(U,{size:16}),e.jsx("span",{children:"一括却下"})]})]})]})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsxs("button",{onClick:ee,className:"flex items-center space-x-2 text-sm font-medium text-text-main",children:[n.length===c.length&&c.length>0?e.jsx(K,{className:"w-4 h-4 text-primary"}):e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"選択"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-text-main",children:"取引項目"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-text-main",children:"金額"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"AI分類"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"信頼度"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-text-main",children:"詳細情報"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"確認状態"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:c.length>0?c.map(t=>{const r=Y(t.confidence);return e.jsxs("tr",{className:"hover:bg-background transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>Z(t.id),className:"flex items-center",children:n.includes(t.id)?e.jsx(K,{className:"w-4 h-4 text-primary"}):e.jsx(J,{className:"w-4 h-4 text-text-muted"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-text-main flex items-center",children:[t.item,e.jsx("div",{className:`ml-2 w-2 h-2 rounded-full ${r.color}`})]}),t.original_text&&e.jsxs("div",{className:"text-sm text-text-muted mt-1 bg-background px-2 py-1 rounded",children:["元: ",t.original_text]}),t.ai_suggestions&&t.ai_suggestions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.ai_suggestions.slice(0,2).map((v,y)=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded",children:v},y))}),t.receipt_url&&e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(ie,{className:"w-3 h-3 text-text-muted mr-1"}),e.jsx("span",{className:"text-xs text-text-muted",children:"レシート添付"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:"font-medium text-text-main text-lg",children:["¥",t.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800",children:t.ai_category})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex px-3 py-1 text-sm font-bold rounded-full ${W(t.confidence)}`,children:[t.confidence,"%"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full text-white ${r.color}`,children:r.label})]}),e.jsx("div",{className:"w-20 bg-border rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${t.confidence>=90?"bg-gradient-to-r from-green-400 to-green-600":t.confidence>=70?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-red-400 to-red-600"}`,style:{width:`${t.confidence}%`}})}),t.processing_time&&e.jsxs("div",{className:"text-xs text-text-muted",children:[t.processing_time.toFixed(2),"秒"]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-text-main",children:e.jsxs("div",{className:"space-y-1",children:[t.location&&e.jsxs("div",{className:"flex items-center text-xs text-text-muted",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),t.location]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(t.created_at).toLocaleDateString("ja-JP")})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:t.manual_verified?e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-green-100 to-emerald-100 text-green-800",children:[e.jsx(q,{size:12,className:"mr-1"}),"確認済み"]}),t.learning_feedback&&e.jsx("div",{className:"text-xs text-text-muted max-w-20 truncate",title:t.learning_feedback,children:"フィードバック有り"})]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800",children:[e.jsx(ce,{size:12,className:"mr-1"}),"未確認"]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:!t.manual_verified&&e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>B(t.id,!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white p-2 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-colors",title:"承認",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:()=>B(t.id,!1),className:"bg-gradient-to-r from-red-500 to-pink-500 text-white p-2 rounded-lg hover:from-red-600 hover:to-pink-600 transition-colors",title:"却下",children:e.jsx(U,{size:16})})]})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(H,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-text-main mb-2",children:"AI分析データが見つかりません"}),e.jsx("p",{className:"text-text-muted max-w-md",children:"検索条件に一致するAI分析データがありません。検索条件を変更するか、新しいデータの分析をお待ちください。"}),e.jsx("button",{onClick:V,className:"mt-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-colors",children:"フィルターをクリア"})]})})})})]})})}),e.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 p-8 rounded-xl border border-blue-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(ke,{className:"w-5 h-5 mr-2 text-yellow-500"}),"AI学習システム"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"確認済み取引:"}),e.jsxs("span",{className:"font-semibold text-text-main",children:[s.verifiedCount,"件"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"平均精度:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[s.averageConfidence.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"高精度分析:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[s.highConfidenceCount,"件"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"処理速度:"}),e.jsxs("span",{className:"font-semibold text-primary",children:[s.averageProcessingTime.toFixed(2),"秒"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2 text-blue-500"}),"学習進捗"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-text-muted",children:"全体進捗"}),e.jsxs("span",{className:"font-semibold text-primary",children:[s.learningProgress.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-surface rounded-full h-4 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-4 rounded-full transition-all duration-1000 relative overflow-hidden",style:{width:`${s.learningProgress}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-text-muted",children:"AI成熟度"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:[s.aiMaturity.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-surface rounded-full h-4 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-4 rounded-full transition-all duration-1000 relative overflow-hidden",style:{width:`${s.aiMaturity}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2 text-yellow-500"}),"今週のハイライト"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-surface/70 backdrop-blur-sm p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"新規分析"}),e.jsxs("span",{className:"font-bold text-primary",children:[s.recentTransactions,"件"]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:"過去7日間"})]}),e.jsxs("div",{className:"bg-surface/70 backdrop-blur-sm p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"精度向上"}),e.jsxs("span",{className:`font-bold ${s.weeklyImprovement>=0?"text-green-600":"text-red-600"}`,children:[s.weeklyImprovement>=0?"+":"",s.weeklyImprovement.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:"前週比較"})]})]})]})]})}),e.jsxs("div",{className:"mt-6 bg-surface p-6 rounded-xl shadow-sm border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),"AI学習フィードバック"]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",value:N,onChange:t=>T(t.target.value),placeholder:"AIの分類についてフィードバックを入力してください...",className:"flex-1 px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("button",{onClick:()=>T(""),className:"bg-background0 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"クリア"})]}),e.jsx("p",{className:"text-sm text-text-muted mt-2",children:"フィードバックはAIの学習に活用され、将来の分類精度向上に貢献します。"})]})]})})};export{Ve as default};
