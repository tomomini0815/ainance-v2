import{a as xe,b as he,d as ue,r as l,m as be,j as e,L as K,P as V,F as M,T as O,i as z,X as I,S as pe,n as fe,h as Q,o as ge}from"./index-Y298rBAR.js";import W from"./TransactionForm-BaTFxfUh.js";import{A as Z}from"./arrow-left-BWVW-fKy.js";import{J as B,F as je}from"./japanese-yen-CCqgz6iX.js";import"./clock-C1BjEixr.js";import"./calendar-CHvkqMbz.js";import"./star-DdynT8Kb.js";import"./zap-DsKMj2j8.js";const Fe=()=>{const{currentBusinessType:d}=xe(),{isAuthenticated:Ne,user:A,loading:ve}=he(),{transactions:h,loading:ee,createTransaction:te,updateTransaction:se,deleteTransaction:U,fetchTransactions:p}=ue(A==null?void 0:A.id,d==null?void 0:d.business_type),[y,E]=l.useState(""),[_,b]=l.useState(!1),[g,C]=l.useState(null),[u,T]=l.useState([]),[F,re]=l.useState(!1),[j,q]=l.useState(""),[c,R]=l.useState({start:"",end:""}),[o,D]=l.useState({min:"",max:""}),[J,ae]=l.useState("date"),[P,ne]=l.useState("desc"),[m,$]=l.useState(1),L=10;l.useEffect(()=>{d!=null&&d.id&&p()},[d,p]);const H=be();l.useEffect(()=>{const s=new URLSearchParams(H.search).get("search");s&&E(s)},[H.search]),l.useEffect(()=>{const t=async()=>{d!=null&&d.id&&(await new Promise(s=>setTimeout(s,100)),p())};return window.addEventListener("transactionRecorded",t),()=>{window.removeEventListener("transactionRecorded",t)}},[d,p]),l.useEffect(()=>{const t=async()=>{console.log("transactionApprovedイベントを受信"),d!=null&&d.id&&(await new Promise(s=>setTimeout(s,100)),p())};return window.addEventListener("transactionApproved",t),()=>{window.removeEventListener("transactionApproved",t)}},[d,p]);const le=l.useMemo(()=>{const t=h.map(s=>s.category);return Array.from(new Set(t)).filter(Boolean)},[h]),k=l.useMemo(()=>{let t=[...h];return y&&(t=t.filter(s=>s.item&&s.item.toLowerCase().includes(y.toLowerCase())||s.description&&s.description.toLowerCase().includes(y.toLowerCase())||s.category&&s.category.toLowerCase().includes(y.toLowerCase()))),j&&(t=t.filter(s=>s.category===j)),c.start&&(t=t.filter(s=>s.date>=c.start)),c.end&&(t=t.filter(s=>s.date<=c.end)),o.min&&(t=t.filter(s=>s.amount>=Number(o.min))),o.max&&(t=t.filter(s=>s.amount<=Number(o.max))),t.sort((s,n)=>{let x,f;switch(J){case"amount":x=s.amount,f=n.amount;break;case"item":x=s.item.toLowerCase(),f=n.item.toLowerCase();break;default:x=new Date(s.date),f=new Date(n.date)}return P==="asc"?x>f?1:-1:x<f?1:-1}),t},[h,y,j,c,o,J,P]),S=Math.ceil(k.length/L),N=l.useMemo(()=>{const t=(m-1)*L,s=t+L;return k.slice(t,s)},[k,m]),v=l.useMemo(()=>{console.log("取引履歴 - 取引データ:",h);const t=r=>{if(typeof r=="number")return r;if(typeof r=="string"){const a=parseFloat(r);return isNaN(a)?0:a}if(typeof r=="object"&&r!==null){const a=r.value||r.amount||r.number||0;if(typeof a=="number")return a;if(typeof a=="string"){const i=parseFloat(a);return isNaN(i)?0:i}return 0}return 0},s=h.filter(r=>{if(r.type==="income")return!0;if(r.type==="expense")return!1;const a=t(r.amount),i=!isNaN(a)&&isFinite(a)&&a>0;return console.log(`取引履歴 - 取引ID ${r.id}: type=${r.type}, 元のamount=${JSON.stringify(r.amount)}, 数値化後=${a}, 収入判定=${i}`),i}),n=h.filter(r=>{if(r.type==="expense")return!0;if(r.type==="income")return!1;const a=t(r.amount),i=!isNaN(a)&&isFinite(a)&&a<0;return console.log(`取引履歴 - 取引ID ${r.id}: type=${r.type}, 元のamount=${JSON.stringify(r.amount)}, 数値化後=${a}, 支出判定=${i}`),i}),x=s.reduce((r,a)=>{const i=t(a.amount),w=!isNaN(i)&&isFinite(i)?Math.abs(i):0;return console.log(`取引履歴 - 収入計算: ${r} + ${w} = ${r+w}`),r+w},0),f=n.reduce((r,a)=>{const i=t(a.amount),w=!isNaN(i)&&isFinite(i)?Math.abs(i):0;return console.log(`取引履歴 - 支出計算: ${r} + ${w} = ${r+w}`),r+w},0),G={total:h.length,income:x,expense:f,balance:x-f};return console.log("取引履歴 - 統計情報計算結果:",G),console.log("取引履歴 - 収入取引:",s),console.log("取引履歴 - 支出取引:",n),G},[h]),ie=()=>{u.length===N.length?T([]):T(N.map(t=>t.id))},de=t=>{u.includes(t)?T(u.filter(s=>s!==t)):T([...u,t])},ce=async()=>{if(window.confirm(`${u.length}件の取引を削除してもよろしいですか？`))try{for(const t of u)await U(t);T([])}catch(t){console.error("一括削除に失敗:",t)}},X=async t=>{try{const s=localStorage.getItem("user");if(s)try{const n=JSON.parse(s);t.creator=n.id}catch(n){console.error("ユーザー情報の解析に失敗しました:",n)}if(!t.type){const n=typeof t.amount=="string"?parseFloat(t.amount):t.amount;t.type=n>0?"income":"expense",console.log("typeプロパティを自動設定:",t.type)}await te(t),await p(),window.dispatchEvent(new CustomEvent("transactionRecorded")),b(!1)}catch(s){console.error("取引の作成に失敗:",s)}},oe=async t=>{if(g)try{const s={...t,creator:g.creator},n=await se(g.id,s);if(n.error)throw n.error;await new Promise(x=>setTimeout(x,100)),await p(),await new Promise(x=>setTimeout(x,100)),window.dispatchEvent(new CustomEvent("transactionRecorded")),C(null),alert("取引が正常に更新されました")}catch(s){console.error("取引の更新に失敗:",s),alert(`取引の更新に失敗しました: ${s.message||"不明なエラーが発生しました"}`)}},me=()=>{q(""),R({start:"",end:""}),D({min:"",max:""}),E("")},Y=l.useMemo(()=>{let t=0;return j&&t++,(c.start||c.end)&&t++,(o.min||o.max)&&t++,t},[j,c,o]);return ee?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-text-muted",children:"データを読み込んでいます..."})]})}):!h||h.length===0?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(K,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(Z,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-main",children:"取引履歴"}),e.jsx("p",{className:"text-text-muted mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-4 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"総取引数"}),e.jsx("div",{className:"text-xl font-bold mt-1 text-primary",children:"0"})]}),e.jsx("div",{className:"rounded-lg bg-primary/5 p-2",children:e.jsx(M,{className:"w-5 h-5 text-primary"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-4 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"収入"}),e.jsx("div",{className:"text-xl font-bold mt-1 text-green-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-500/5 p-2",children:e.jsx(O,{className:"w-5 h-5 text-green-500"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-4 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"支出"}),e.jsx("div",{className:"text-xl font-bold mt-1 text-red-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-red-500/5 p-2",children:e.jsx(z,{className:"w-5 h-5 text-red-500"})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-4 border border-green-500/20 bg-green-500/5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"収支"}),e.jsx("div",{className:"text-xl font-bold mt-1 text-green-500",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-500/5 p-2",children:e.jsx(B,{className:"w-5 h-5 text-green-500"})})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-8 text-center",children:[e.jsx(M,{className:"w-16 h-16 text-text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-text-main mb-2",children:"取引が見つかりません"}),e.jsx("p",{className:"text-text-muted mb-6",children:"まだ取引が登録されていないか、条件に一致する取引がありません"}),e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center mx-auto",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"最初の取引を追加"]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-surface rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-main",children:"最初の取引を追加"}),e.jsx("button",{onClick:()=>{b(!1),C(null)},className:"p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-text-muted"})})]}),e.jsx(W,{transaction:g,onSubmit:X,onCancel:()=>{b(!1),C(null)}})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(K,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(Z,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-main",children:"取引履歴"}),e.jsx("p",{className:"text-text-muted mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-4 border border-border hover:shadow-md transition-shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"総取引数"}),e.jsx("div",{className:"rounded-lg bg-primary/5 p-2",children:e.jsx(M,{className:"w-5 h-5 text-primary"})})]}),e.jsx("div",{className:"text-xl font-bold text-primary mt-1",children:v.total})]}),e.jsxs("div",{className:"border border-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"収入"}),e.jsx("div",{className:"rounded-lg bg-green-500/5 p-2",children:e.jsx(O,{className:"w-5 h-5 text-green-500"})})]}),e.jsxs("div",{className:"text-xl font-bold text-green-500 mt-1",children:["¥",v.income.toLocaleString()]})]}),e.jsxs("div",{className:"border border-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"支出"}),e.jsx("div",{className:"rounded-lg bg-red-500/5 p-2",children:e.jsx(z,{className:"w-5 h-5 text-red-500"})})]}),e.jsxs("div",{className:"text-xl font-bold text-red-500 mt-1",children:["¥",v.expense.toLocaleString()]})]}),e.jsxs("div",{className:"border border-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"収支"}),e.jsx("div",{className:`rounded-lg p-2 ${v.balance>=0?"bg-green-500/5":"bg-red-500/5"}`,children:e.jsx(B,{className:`w-5 h-5 ${v.balance>=0?"text-green-500":"text-red-500"}`})})]}),e.jsxs("div",{className:`text-xl font-bold mt-1 ${v.balance>=0?"text-green-500":"text-red-500"}`,children:["¥",v.balance.toLocaleString()]})]})]})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted w-5 h-5"}),e.jsx("input",{type:"text",value:y,onChange:t=>E(t.target.value),placeholder:"取引内容、カテゴリなどで検索...",className:"w-full pl-10 pr-4 py-2.5 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main placeholder-text-muted"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>re(!F),className:`px-4 py-2.5 text-sm rounded-lg transition-colors flex items-center space-x-2 ${F?"bg-primary/10 text-primary":"bg-surface-highlight text-text-muted hover:bg-border"}`,children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{children:"フィルタ"}),Y>0&&e.jsx("span",{className:"bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Y}),e.jsx(fe,{className:`w-4 h-4 transition-transform ${F?"rotate-180":""}`})]}),(j||c.start||c.end||o.min||o.max)&&e.jsxs("button",{onClick:me,className:"px-4 py-2.5 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"クリア"]})]})]})}),F&&e.jsx("div",{className:"px-4 pb-4 border-t border-border",children:e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"カテゴリ"}),e.jsxs("select",{value:j,onChange:t=>q(t.target.value),className:"input-base",children:[e.jsx("option",{value:"",children:"すべて"}),le.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"開始日"}),e.jsx("input",{type:"date",value:c.start,onChange:t=>R({...c,start:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"終了日"}),e.jsx("input",{type:"date",value:c.end,onChange:t=>R({...c,end:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最小金額"}),e.jsx("input",{type:"number",value:o.min,onChange:t=>D({...o,min:t.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最大金額"}),e.jsx("input",{type:"number",value:o.max,onChange:t=>D({...o,max:t.target.value}),className:"input-base"})]})]})})})]}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-sm text-text-muted mr-2",children:"ソート:"}),e.jsxs("select",{value:J,onChange:t=>ae(t.target.value),className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main",children:[e.jsx("option",{value:"date",children:"日付"}),e.jsx("option",{value:"amount",children:"金額"}),e.jsx("option",{value:"item",children:"項目"})]})]}),e.jsx("button",{onClick:()=>ne(P==="asc"?"desc":"asc"),className:"px-3 py-2 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:P==="asc"?"昇順":"降順"})]}),u.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-text-muted",children:[u.length,"件選択中"]}),e.jsxs("button",{onClick:ce,className:"px-3 py-2 text-sm bg-red-500/10 text-red-600 rounded-lg hover:bg-red-500/20 transition-colors flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),"削除"]})]})]})})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider w-12",children:e.jsx("input",{type:"checkbox",checked:u.length===N.length&&N.length>0,onChange:ie,className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"項目"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-text-muted uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider hidden sm:table-cell",children:"日付"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"カテゴリ"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-text-muted uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-surface divide-y divide-border",children:N.length>0?N.map(t=>(t.approval_status,e.jsxs("tr",{className:"hover:bg-surface-highlight transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:u.includes(t.id),onChange:()=>de(t.id),className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-main",children:t.item}),e.jsx("div",{className:"text-sm text-text-muted sm:hidden",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end",children:[t.type==="income"?e.jsx(O,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(z,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:t.type==="income"?"text-green-500":"text-red-500",children:[t.type==="expense"?"-":"",t.amount.toLocaleString()]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-muted hidden sm:table-cell",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-medium rounded-full ${t.type==="income"?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:t.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>{C(t),b(!0)},className:"p-2 rounded-lg transition-colors text-primary hover:text-primary/80 hover:bg-primary/10",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(t.id),className:"p-2 rounded-lg transition-colors text-red-500 hover:text-red-600 hover:bg-red-500/10",children:e.jsx(Q,{className:"w-4 h-4"})})]})})]},t.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(M,{className:"w-12 h-12 text-text-muted mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-text-main mb-1",children:"取引が見つかりません"}),e.jsx("p",{className:"text-text-muted",children:"条件に一致する取引がありません"})]})})})})]})}),N.length>0&&e.jsxs("div",{className:"bg-surface px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-border",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>$(Math.max(1,m-1)),disabled:m===1,className:"relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"前へ"}),e.jsx("button",{onClick:()=>$(Math.min(S,m+1)),disabled:m===S,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"次へ"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsx("span",{className:"font-medium",children:Math.min((m-1)*L+1,k.length)})," 件から ",e.jsx("span",{className:"font-medium",children:Math.min(m*L,k.length)})," 件までを表示中（全 ",e.jsx("span",{className:"font-medium",children:k.length})," 件）"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>$(Math.max(1,m-1)),disabled:m===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"前へ"}),"<"]}),[...Array(Math.min(5,S))].map((t,s)=>{const n=Math.max(1,Math.min(m-2,S-4))+s;return e.jsx("button",{onClick:()=>$(n),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${m===n?"z-10 bg-primary/10 border-primary text-primary":"bg-surface border-border text-text-muted hover:bg-surface-highlight"}`,children:n},n)}),e.jsxs("button",{onClick:()=>$(Math.min(S,m+1)),disabled:m===S,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"次へ"}),">"]})]})})]})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-surface rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-main",children:g?"取引を編集":"新規取引作成"}),e.jsx("button",{onClick:()=>{b(!1),C(null)},className:"p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-text-muted"})})]}),e.jsx(W,{transaction:g,onSubmit:g?oe:X,onCancel:()=>{b(!1),C(null)}})]})})})]})};export{Fe as default};
