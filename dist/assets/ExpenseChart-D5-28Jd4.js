import{j as t}from"./index-9K-405_8.js";import{D as j,C as y,A as v,d as N,e as C}from"./index-Pgv9C3--.js";y.register(v,N,C);const S=({transactions:u})=>{const x=()=>{const a=u.filter(s=>s.type==="expense"),e={};a.forEach(s=>{const l=typeof s.amount=="string"?parseFloat(s.amount):s.amount;e[s.category]?e[s.category]+=l:e[s.category]=l});const r=Object.values(e).reduce((s,l)=>s+l,0),o={};return Object.keys(e).forEach(s=>{o[s]=Math.round(e[s]/r*100)}),{categoryTotals:e,percentages:o,totalAmount:r}},{percentages:c,categoryTotals:b,totalAmount:f}=x(),n=Object.keys(c),p=Object.values(c),i=Object.values(b),d=["#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#06b6d4","#0ea5e9","#3b82f6","#64748b"],m=n.map((a,e)=>d[e%d.length]),g={labels:n,datasets:[{data:p,backgroundColor:m,borderWidth:0,cutout:"75%"}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{usePointStyle:!0,padding:15,color:"#94a3b8",font:{size:12,family:"Inter"},generateLabels:function(a){const e=a.data;return e.labels.length&&e.datasets.length?e.labels.map((r,o)=>{const s=e.datasets[0].data[o];return{text:`${r} ${s}%`,fillStyle:e.datasets[0].backgroundColor[o],strokeStyle:e.datasets[0].backgroundColor[o],lineWidth:0,pointStyle:"circle",hidden:!1,index:o}}):[]}}},tooltip:{callbacks:{label:function(a){const e=a.label||"",r=i[a.dataIndex];return`${e}: ${a.parsed}% (${r.toLocaleString()}円)`}},backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#f8fafc",bodyColor:"#e2e8f0",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10}}};return t.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"支出カテゴリ"}),t.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"詳細を見る"})]}),t.jsxs("div",{className:"chart-container h-72 w-full relative",children:[t.jsx(j,{data:g,options:h}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[t.jsx("p",{className:"text-xs text-text-muted",children:"総支出"}),t.jsxs("p",{className:"text-xl font-bold text-text-main",children:["¥",f.toLocaleString()]})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"font-medium text-text-secondary mb-3 text-sm",children:"カテゴリ別支出内訳"}),t.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:n.map((a,e)=>t.jsxs("div",{className:"flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-2 h-2 rounded-full mr-3 transition-transform group-hover:scale-125",style:{backgroundColor:m[e]}}),t.jsx("span",{className:"text-sm text-text-muted group-hover:text-text-main transition-colors",children:a})]}),t.jsxs("span",{className:"text-sm font-medium text-text-secondary",children:["¥",i[e].toLocaleString()]})]},a))})]})]})};export{S as default};
