import{c as ne,o as oe,e as ie,k as le,l as de,r as m,j as e,L as ce,U as q,i as me,F as O,S as Y,p as z,q as V,m as xe,s as ue,t as N,v as he,_ as pe}from"./index-DswpKyhs.js";import{R as ge}from"./ReceiptCamera-BkovwDW0.js";import{R as fe}from"./ReceiptResultModal-CR8ihqN4.js";import{T as $}from"./TransactionIcon-yIlove_q.js";import{A as be}from"./arrow-left-gdWbSuNE.js";import{g as je}from"./motion-BmoOauon.js";import{R as ye}from"./refresh-cw-DcsUKi_h.js";import{T as W}from"./triangle-alert-BH5edZLX.js";import{C as we}from"./camera-Bqt24yxI.js";import{S as Ne}from"./save-D1Udpi50.js";import{C as H}from"./circle-check-big-Crj7KyMn.js";import{A as ve}from"./index-DCNd5_NF.js";import"./zap-DUeSvkim.js";import"./rotate-ccw-Hw-N-V6u.js";import"./loader-circle-BsarH5Un.js";import"./circle-check-Cp8dQXF6.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Re=ne("file-image",Ce),J=o=>{if(!o)return"予期せぬエラーが発生しました。";const n=typeof o=="string"?o:o.message||JSON.stringify(o);if(n.includes("429")||n.includes("Resource has been exhausted")||n.includes("Quota exceeded")||n.includes("RESOURCE_EXHAUSTED"))return"【AI利用制限】短時間の利用上限に達しました。1分ほど待ってから再試行してください。（プランの制限によるものです）";if(n.includes("400")||n.includes("INVALID_ARGUMENT"))return"画像の形式が正しくないか、読み込めませんでした。別の画像を試すか、画像サイズを小さくしてください。";if(n.includes("401")||n.includes("403")||n.includes("API key not valid"))return"AIサービスの認証に失敗しました。システム管理者に連絡するか、APIキーの設定を確認してください。";if(n.includes("500")||n.includes("503")||n.includes("INTERNAL"))return"AIサービス側で一時的なエラーが発生しています。しばらく待ってから再試行してください。";if(n.includes("Failed to fetch")||n.includes("Network request failed"))return"インターネット接続を確認してください。オフラインの可能性があります。";const p=n.replace("Gemini API Error:","").replace("Error:","").trim();return p.includes("{")||p.includes("[")?"AI処理中にエラーが発生しました。しばらく待ってから再試行してください。":`AI処理エラー: ${p}`},Ye=()=>{const{user:o}=oe(),{currentBusinessType:n}=ie(),{selectedYear:p}=le();de(o==null?void 0:o.id,n==null?void 0:n.business_type);const[k,f]=m.useState([]),[d,x]=m.useState({isProcessing:!1,retryCount:0}),[u,b]=m.useState(null),[g,j]=m.useState({}),[K,v]=m.useState(!1),[B,y]=m.useState(!1),[P,w]=m.useState(null),[A,Q]=m.useState(""),[E,X]=m.useState("all"),[I,Z]=m.useState("all"),D=async()=>{if(!(o!=null&&o.id))return;const a=(await xe(o.id)).map(r=>({id:r.id,date:r.date,merchant:r.merchant,amount:r.amount,category:r.category,description:r.description,confidence:r.confidence,status:r.status,taxRate:r.tax_rate,confidenceScores:r.confidence_scores})).filter(r=>{const h=r.status!=="approved"&&r.status!=="rejected",i=new Date(r.date).getFullYear()===p;return h&&i});f(a)};m.useEffect(()=>{D()},[o,p]);const ee=()=>{v(!0)},te=()=>{v(!1)},L=async t=>{x(s=>({...s,isProcessing:!0,retryCount:0,progress:10,currentStep:"AI分析を開始しています..."}));try{const{analyzeReceiptWithVision:s,GEMINI_API_KEY_LOADED:a}=await pe(async()=>{const{analyzeReceiptWithVision:c,GEMINI_API_KEY_LOADED:S}=await import("./geminiAIService-DQoIspWT.js");return{analyzeReceiptWithVision:c,GEMINI_API_KEY_LOADED:S}},[]);if(!a)throw new Error("Gemini APIキーが設定されていません。.envファイルを確認してください。");x(c=>({...c,progress:30,currentStep:"画像を解析中..."}));const h=await(await fetch(t)).blob(),i=new FileReader,R=new Promise((c,S)=>{i.onloadend=()=>{typeof i.result=="string"?c(i.result):S(new Error("画像の読み込みに失敗しました"))},i.onerror=S});i.readAsDataURL(h);const _=await R;x(c=>({...c,progress:50,currentStep:"AIがデータを抽出・検証中..."}));const l=await s(_);if(!l)throw new Error("AIによる解析ができませんでした");console.log("AI解析結果:",l),x(c=>({...c,progress:90,currentStep:"データを整形中..."})),w({merchant:l.store_info.name||"不明",date:l.summary.transaction_date||"",amount:l.summary.total_amount||0,category:typeof l.category=="string"?l.category:l.category.primary||"雑費",taxRate:l.tax_info.tax_amount_10?10:8,confidence:l.summary.confidence||0,validationErrors:l.validation_errors,items:l.items}),x(c=>({...c,isProcessing:!1,retryCount:0,progress:100,currentStep:"完了"})),y(!0),N.success("レシートの読み取りが完了しました")}catch(s){console.error("AI処理エラー:",s);const a=J(s);x(r=>({...r,isProcessing:!1,retryCount:0,errorMessage:a})),N.error("AI読み取りに失敗しました")}},F=async t=>{v(!1);const s=URL.createObjectURL(t);x(a=>({...a,imageData:s})),await L(s)},se=async t=>{const s=t.target.files;if(s&&s.length>0){const a=s[0],r=new FileReader;r.onload=async h=>{var R;const i=(R=h.target)==null?void 0:R.result;if(i){const _=new Blob([i],{type:a.type});await F(_)}},r.readAsArrayBuffer(a)}},M=t=>{var r,h;const s=((h=(r=t.aiAnalysis)==null?void 0:r.items)==null?void 0:h.map(i=>({name:i.name,price:i.price,qty:i.quantity,line_total:i.price*i.quantity})))||[],a={merchant:t.merchant,date:t.date,amount:t.amount,category:t.category,taxRate:t.taxRate||10,confidence:t.confidence,items:s};w(a),b(t.id),y(!0)},ae=()=>{u&&g&&(f(t=>t.map(s=>s.id===u?{...s,...g}:s)),b(null),j({}))},T=async t=>{const s=k.find(a=>a.id===t);if(!s||!(o!=null&&o.id)){console.error("レシートまたはユーザーが見つかりません");return}f(a=>a.filter(r=>r.id!==t));try{const a=(n==null?void 0:n.business_type)||"individual",r=await ue(t,{...s,user_id:o.id,confidence_scores:s.confidenceScores,tax_rate:s.taxRate},a,o.id);if(!r.success)throw new Error(r.error);N.success("レシートが登録され、取引履歴に反映されました"),window.dispatchEvent(new CustomEvent("transactionApproved")),window.dispatchEvent(new CustomEvent("transactionRecorded"))}catch(a){console.error("レシート登録エラー:",a),N.error("登録に失敗しました"),f(r=>[...r,s])}},U=async t=>{f(s=>s.filter(a=>a.id!==t)),await he(t,"rejected"),N.success("レシートを削除しました")},re=async()=>{if(d.imageData&&d.retryCount<3){x(t=>({...t,retryCount:t.retryCount+1,errorMessage:void 0}));try{await L(d.imageData)}catch(t){console.error("再試行エラー:",t);const s=J(t);x(a=>({...a,errorMessage:s}))}}},C=k.filter(t=>{const s=t.merchant.toLowerCase().includes(A.toLowerCase())||t.description.toLowerCase().includes(A.toLowerCase()),a=E==="all"||t.status===E,r=I==="all"||t.category===I;return s&&a&&r}),G=Array.from(new Set(k.map(t=>t.category)));return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(ce,{to:"/dashboard",className:"mr-4",children:e.jsx(be,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-main",children:"レシート処理"}),e.jsx("p",{className:"text-text-muted",children:"レシートのアップロードで簡単に取引を記録できます"})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto space-y-6 mb-5",children:e.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-surface rounded-xl shadow-sm border border-border p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsx(q,{className:"w-4 h-4 text-primary"}),e.jsx("h2",{className:"text-base font-semibold text-text-main",children:"レシートをアップロード"})]}),d.isProcessing&&e.jsxs("div",{className:"mb-5 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-500 animate-spin mr-2"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"レシートを処理中です..."})]}),d.currentStep&&e.jsx("div",{className:"text-sm text-blue-600 mb-2",children:d.currentStep}),d.progress!==void 0&&e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${d.progress}% `}})})]}),d.errorMessage&&e.jsxs("div",{className:"mb-5 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:d.errorMessage})]}),d.retryCount<3&&e.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:"再試行"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"group border-[1.5px] border-primary border-dashed rounded-lg p-2.5 sm:p-4 text-center cursor-pointer bg-primary/5 hover:bg-primary/10 hover:border-primary/50 transition-all duration-200",onClick:ee,children:[e.jsx(we,{className:"w-6 h-6 text-text-muted group-hover:text-primary mx-auto mb-1.5 transition-colors"}),e.jsx("p",{className:"text-[10px] sm:text-sm font-semibold text-text-main mb-0.5",children:"カメラで撮影"}),e.jsx("p",{className:"hidden sm:block text-[10px] text-text-muted",children:"その場で撮影"}),e.jsx("p",{className:"sm:hidden text-[9px] text-text-muted",children:"撮影可能"})]}),e.jsxs("label",{className:"group border-[1.5px] border-primary border-dashed rounded-lg p-2.5 sm:p-4 text-center cursor-pointer bg-primary/5 hover:bg-primary/10 hover:border-primary/50 transition-all duration-200",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:se,className:"hidden"}),e.jsx(q,{className:"w-6 h-6 text-text-muted group-hover:text-primary mx-auto mb-1.5 transition-colors"}),e.jsx("p",{className:"text-[10px] sm:text-sm font-semibold text-text-main mb-0.5",children:"ファイルを選択"}),e.jsx("p",{className:"hidden sm:block text-[10px] text-text-muted",children:"PNG, JPG, PDF対応"}),e.jsx("p",{className:"sm:hidden text-[9px] text-text-muted",children:"画像・PDF"})]}),e.jsxs("div",{className:"group border-[1.5px] border-primary border-dashed rounded-lg p-2.5 sm:p-4 text-center bg-primary/5 hover:bg-primary/10 hover:border-primary/50 transition-all duration-200",children:[e.jsx(Re,{className:"w-6 h-6 text-text-muted group-hover:text-primary mx-auto mb-1.5 transition-colors"}),e.jsx("p",{className:"text-[10px] sm:text-sm font-semibold text-text-main mb-0.5",children:"ドロップ"}),e.jsx("p",{className:"hidden sm:block text-[10px] text-text-muted",children:"ここに画像をドロップ"}),e.jsx("p",{className:"sm:hidden text-[9px] text-text-muted",children:"ドラッグ"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[K&&e.jsx(ge,{onCapture:F,onClose:te}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border p-2.5 sm:p-3 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-text-muted w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"店舗名や説明で検索...",className:"w-full pl-8 pr-3 py-1.5 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary bg-background text-xs transition-all",value:A,onChange:t=>Q(t.target.value)})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"px-3 py-1.5 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary bg-background font-medium text-[11px] transition-all w-full sm:w-auto",value:E,onChange:t=>X(t.target.value),children:[e.jsx("option",{value:"all",children:"ステータス"}),e.jsx("option",{value:"pending",children:"保留中"}),e.jsx("option",{value:"approved",children:"承認済み"}),e.jsx("option",{value:"rejected",children:"却下"})]}),e.jsxs("select",{className:"px-3 py-1.5 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary bg-background font-medium text-[11px] transition-all w-full sm:w-auto",value:I,onChange:t=>Z(t.target.value),children:[e.jsx("option",{value:"all",children:"カテゴリ"}),G.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border",children:[e.jsxs("div",{className:"p-6 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-main",children:"処理済みレシート"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"内容を確認し、表の「登録」ボタンをクリックして記帳を確定してください。"})]}),e.jsx("div",{className:"md:hidden space-y-3 p-3",children:C.length===0?e.jsxs("div",{className:"p-8 text-center text-text-muted border border-dashed border-border rounded-lg",children:[e.jsx(O,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"処理済みのレシートはありません"}),e.jsx("p",{className:"text-sm mt-1",children:"新しいレシートをアップロードしてください"})]}):C.map(t=>e.jsxs("div",{className:"bg-surface p-3 rounded-lg shadow-sm border border-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-start flex-1 min-w-0",children:[e.jsx("div",{className:"mr-3 mt-1",children:e.jsx($,{item:t.merchant,category:t.category,size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-text-main text-base mb-1",children:u===t.id?e.jsx("input",{type:"text",value:g.merchant||t.merchant,onChange:s=>j(a=>({...a,merchant:s.target.value})),onClick:s=>s.stopPropagation(),className:"w-full px-2 py-1 border border-border rounded text-sm bg-background text-text-main",placeholder:"店舗名",autoFocus:!0}):e.jsx("div",{children:t.merchant})}),e.jsx("div",{className:"text-sm text-text-muted",children:u===t.id?e.jsx("input",{type:"date",value:g.date||t.date,onChange:s=>j(a=>({...a,date:s.target.value})),onClick:s=>s.stopPropagation(),className:"w-full px-2 py-1 border border-border rounded text-sm bg-background text-text-main"}):e.jsx("span",{children:t.date})})]})]}),e.jsxs("div",{className:"text-right ml-2 shrink-0",children:[u===t.id?e.jsx("input",{type:"number",value:g.amount||t.amount,onChange:s=>j(a=>({...a,amount:Number(s.target.value)})),onClick:s=>s.stopPropagation(),className:"w-24 px-2 py-1 border border-border rounded text-sm text-right bg-background text-text-main"}):e.jsxs("div",{className:"font-medium text-lg text-text-main",children:["¥",t.amount.toLocaleString()]}),e.jsx("div",{className:"flex justify-end gap-1 mt-1",children:t.confidence>=90?e.jsx(Y,{className:"w-3.5 h-3.5 text-purple-500"}):t.confidence>=70?e.jsx(Y,{className:"w-3.5 h-3.5 text-indigo-500"}):e.jsx(W,{className:"w-3.5 h-3.5 text-yellow-500"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-border",children:[e.jsx("div",{className:"flex-1",children:u===t.id?e.jsxs("select",{value:g.category||t.category,onChange:s=>j(a=>({...a,category:s.target.value})),onClick:s=>s.stopPropagation(),className:"w-full max-w-[140px] px-2 py-1 border border-border rounded text-sm bg-background text-text-main",children:[G.map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"消耗品費",children:"消耗品費"}),e.jsx("option",{value:"接待交際費",children:"接待交際費"}),e.jsx("option",{value:"旅費交通費",children:"旅費交通費"}),e.jsx("option",{value:"通信費",children:"通信費"}),e.jsx("option",{value:"役員報酬",children:"役員報酬"}),e.jsx("option",{value:"雜費",children:"雜費"})]}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-surface-highlight text-text-main border border-border",children:t.category})}),e.jsx("div",{className:"flex gap-2.5",children:u===t.id?e.jsx("button",{onClick:s=>{s.stopPropagation(),ae()},className:"w-11 h-11 rounded-full flex items-center justify-center bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white transition-all shadow-md active:scale-95",title:"保存",children:e.jsx(Ne,{className:"w-6 h-6"})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),T(t.id)},className:"w-11 h-11 rounded-full flex items-center justify-center bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white transition-all shadow-md active:scale-95",title:"承認",children:e.jsx(H,{className:"w-6 h-6"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),M(t)},className:"w-11 h-11 rounded-full flex items-center justify-center bg-primary/10 text-primary hover:bg-primary hover:text-white transition-all shadow-md active:scale-95",title:"編集",children:e.jsx(z,{className:"w-6 h-6"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),U(t.id)},className:"w-11 h-11 rounded-full flex items-center justify-center bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white transition-all shadow-md active:scale-95",title:"削除",children:e.jsx(V,{className:"w-6 h-6"})})]})})]})]},t.id))}),e.jsx("div",{className:"hidden md:block bg-surface border border-border rounded-2xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"日付"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"店舗名"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"金額"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"カテゴリ"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"信頼度"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider whitespace-nowrap",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:C.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-text-muted",children:[e.jsx(O,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"処理済みのレシートはありません"}),e.jsx("p",{className:"text-sm mt-1",children:"新しいレシートをアップロードしてください"})]})}):C.map(t=>e.jsxs("tr",{className:"hover:bg-surface-highlight transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-text-main",children:e.jsx("span",{children:t.date})}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-main",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{item:t.merchant,category:t.category,size:"sm"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:t.merchant}),e.jsx("span",{className:"text-[10px] text-text-muted mt-0.5",children:t.category})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-main",children:e.jsxs("span",{className:"font-medium text-text-main",children:["¥",t.amount.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-main",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-surface-highlight text-text-main border border-border whitespace-nowrap",children:t.category})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-border rounded-full h-1.5 mr-2",children:e.jsx("div",{className:`h-1.5 rounded-full ${t.confidence>=90?"bg-green-500":t.confidence>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.confidence}%`}})}),e.jsxs("span",{className:"text-[10px] text-text-muted",children:[t.confidence,"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>T(t.id),className:"px-3 py-2 bg-emerald-500/10 text-emerald-500 rounded-lg hover:bg-emerald-500 hover:text-white transition-all shadow-sm flex items-center gap-1.5 text-xs font-bold whitespace-nowrap",title:"登録",children:[e.jsx(H,{className:"w-4 h-4"}),"登録"]}),e.jsxs("button",{onClick:()=>M(t),className:"px-3 py-2 bg-primary/10 text-primary rounded-lg hover:bg-primary hover:text-white transition-all shadow-sm flex items-center gap-1.5 text-xs font-bold whitespace-nowrap",title:"編集",children:[e.jsx(z,{className:"w-4 h-4"}),"編集"]}),e.jsxs("button",{onClick:()=>U(t.id),className:"px-3 py-2 bg-rose-500/10 text-rose-500 rounded-lg hover:bg-rose-500 hover:text-white transition-all shadow-sm flex items-center gap-1.5 text-xs font-bold whitespace-nowrap",title:"削除",children:[e.jsx(V,{className:"w-4 h-4"}),"削除"]})]})})]},t.id))})]})})}),e.jsx(ve,{children:B&&P&&e.jsx(fe,{mode:u?"edit":"create",transactionId:u||void 0,receiptData:P,onClose:()=>{y(!1),w(null),b(null)},onRetake:()=>{y(!1),w(null),b(null),v(!0)},onSave:()=>{D(),y(!1),w(null),b(null)}})})]})]})]})})};export{Ye as default};
