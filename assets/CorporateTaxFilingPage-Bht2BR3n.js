import{c as we,a as Ee,e as Ce,l as ke,u as Te,r as y,m as Ae,j as e,L as D,F as V,G as A,p as Ie,x as L,d as Pe,U as Q,S as Oe}from"./index-C8W6MraP.js";import{P as Fe,y as U,a as X}from"./PreviousYearImportModal-BWWj3ZNy.js";import{g as $e,c as Se,a as Le,f as i,b as Me,e as De}from"./CorporateTaxService-DGpGOaw1.js";import{a as Y,C as ee,i as se}from"./CsvExportService-BV6s4tiF.js";import{D as Re}from"./DepreciationCalculator-Cm3oqYps.js";import{c as Ve,d as We}from"./pdfJapaneseService-DKF38fEE.js";import{W as ze}from"./WizardProgress-DOT5ttCv.js";import{A as te}from"./arrow-left-fE9IanCp.js";import{B as G}from"./building-2-BopfBLW0.js";import{B as ae}from"./book-open-BoGGMB8v.js";import{C as Ue}from"./calculator-B9tXE1xW.js";import{W as qe}from"./wallet-CYzQhy7j.js";import{D as R}from"./download-Dqr9MOs_.js";import{A as B}from"./arrow-right-BJ8mwTmt.js";import{C as F}from"./circle-check-big-CIiSfE0f.js";import{R as M}from"./refresh-cw-BU9GURhP.js";import{W as Be}from"./wrench-DEbOO9Pp.js";import{I as ne}from"./info-DXXnz00J.js";import{C as Ge}from"./copy-C15OaF4Q.js";import"./geminiAIService-D07nacbf.js";import"./keywordCategoryService-9yZ-pShI.js";import"./loader-circle-BS0qzjv_.js";import"./scale-DOYz8drY.js";import"./save-DdrbNI7M.js";import"./circle-question-mark-C2_ino1O.js";import"./pdfAutoFillService-Dbgeiub2.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ze=we("piggy-bank",He),q=[{id:1,title:"会社情報",icon:G,description:"会社基本情報の入力"},{id:2,title:"減価償却",icon:Ue,description:"資産の登録と計算"},{id:3,title:"損益計算",icon:V,description:"売上・経費の確認"},{id:4,title:"法人税計算",icon:Ze,description:"法人税等の計算"},{id:5,title:"消費税確認",icon:qe,description:"消費税の確認"},{id:6,title:"書類作成",icon:R,description:"PDF出力"}],Je=({corporateInfo:s,setCorporateInfo:a,handleInfoChange:x,handleTranscribe:l,prevYearSettlement:j,prevYearBS:f,setIsImportModalOpen:h,isCorporation:b})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-surface border border-border rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Q,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-text-main mb-1",children:"前期データの引き継ぎ"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:"前期の決算データを取り込むことで、今期の収支比較やBSの期首残高設定がスムーズに行えます。"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[j?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success font-medium",children:[e.jsx(F,{className:"w-4 h-4"}),j.year,"年度のデータが取込済みです"]}):e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[e.jsx(Q,{className:"w-4 h-4"}),"前期データをインポート"]}),e.jsxs(D,{to:"/settlement-history",className:"inline-flex items-center gap-2 px-4 py-2 bg-surface-highlight border border-border text-text-muted hover:text-text-main rounded-lg transition-colors text-sm font-medium",children:[e.jsx(V,{className:"w-4 h-4"}),"履歴・引継ぎ管理"]})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-1",children:b?"会社基本情報":"基本情報（個人事業）"}),e.jsxs("p",{className:"text-text-muted",children:[b?"法人税申告":"確定申告","に必要な情報を入力してください。"]})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsxs("button",{onClick:l,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(M,{className:"w-4 h-4"}),"登録データから転記"]})})]}),f?e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"前期データ（バトンタッチ）の適用中"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:[f.year,"年度の確定済み",b?"決算":"申告","データから、期首残高（",b?"資本金・利益剰余金":"元入金・所得金額","など）を自動的に引き継いでいます。"]})]})]}):e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"前期データの登録をお勧めします"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:["「過去決算・引継ぎ管理」に前年度の",b?"決算書":"青色申告決算書等","を登録すると、期首残高が自動でバトンタッチ（引き継ぎ）されます。"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-main mb-2",children:[b?"会社名":"屋号・氏名"," ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsx("input",{type:"text",value:s.companyName,onChange:o=>a({...s,companyName:o.target.value}),className:"input-base",placeholder:"株式会社〇〇"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"代表者名"}),e.jsx("input",{type:"text",value:s.representativeName,onChange:o=>a({...s,representativeName:o.target.value}),className:"input-base",placeholder:"山田 太郎"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:b?"法人番号":"個人番号"}),e.jsx("input",{type:"text",value:s.corporateNumber,onChange:o=>a({...s,corporateNumber:o.target.value}),className:"input-base",placeholder:b?"1234567890123":"123456789012"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:b?"資本金":"期首元入金"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx("input",{type:"number",value:s.capital,onChange:o=>a({...s,capital:Number(o.target.value)}),className:"input-base pl-8"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:b?"前期繰越利益剰余金":"前期繰越所得 / 元入金外"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx("input",{type:"number",value:s.beginningRetainedEarnings,onChange:o=>a({...s,beginningRetainedEarnings:Number(o.target.value)}),className:"input-base pl-8"})]}),e.jsx("p",{className:"text-[10px] text-text-muted mt-1",children:b?"前期末の貸借対照表から引き継いだ繰越利益（赤字の場合はマイナス入力）です。":"前期末時点の純資産状態で、元入金に含まれない累積利益です。"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"所在地"}),e.jsx("input",{type:"text",value:s.address,onChange:o=>a({...s,address:o.target.value}),className:"input-base",placeholder:"東京都渋谷区..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"事業年度（開始）"}),e.jsx("input",{type:"date",value:s.fiscalYearStart,onChange:o=>x({fiscalYearStart:o.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"事業年度（終了）"}),e.jsx("input",{type:"date",value:s.fiscalYearEnd,onChange:o=>x({fiscalYearEnd:o.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"所轄税務署"}),e.jsx("input",{type:"text",value:s.taxOffice||"",onChange:o=>x({taxOffice:o.target.value}),className:"input-base",placeholder:"例：芝税務署"})]})]}),e.jsxs("div",{className:"bg-info-light border border-info/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"中小法人の税制優遇"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"資本金1億円以下の中小法人は、年800万円以下の所得に対して15%の軽減税率が適用されます。"})]})]})]}),Ke=({assets:s,onDepreciationCalculate:a,handleTranscribe:x})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-1",children:"減価償却資産の登録"}),e.jsx("p",{className:"text-text-muted",children:"10万円以上の資産や、減価償却が必要な資産を登録してください。"})]}),e.jsxs("button",{onClick:x,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(M,{className:"w-4 h-4"}),"取引データから転記"]})]}),e.jsx(Re,{initialAssets:s,onCalculate:a})]}),Qe=({financialData:s,taxResult:a,corporateInfo:x,prevYearSettlement:l,showComparison:j,setShowComparison:f,isCorporation:h})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"損益計算書"}),e.jsxs("p",{className:"text-text-muted mb-6",children:[x.fiscalYear,"年度の取引データから自動集計した結果です。"]})]}),l&&e.jsxs("div",{className:"flex items-center justify-between bg-surface border border-border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-text-main block",children:["前期 (",l.year,"年度) と比較"]}),e.jsx("span",{className:"text-xs text-text-muted",children:"収益・費用の増減を確認できます"})]})]}),e.jsx("button",{onClick:()=>f(!j),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${j?"bg-primary":"bg-border"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${j?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-success font-medium",children:"売上高"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.revenue)}),j&&l&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.revenue>=l.revenue?"text-success":"text-error"}`,children:[s.revenue>=l.revenue?"↑":"↓",i(Math.abs(s.revenue-l.revenue)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",l.year,"度: ",i(l.revenue),")"]})]})]}),e.jsxs("div",{className:"bg-error-light border border-error/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-error font-medium",children:"販管費"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.operatingExpenses)}),j&&l&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.operatingExpenses<=l.operating_expenses?"text-success":"text-error"}`,children:[s.operatingExpenses<=l.operating_expenses?"↓":"↑",i(Math.abs(s.operatingExpenses-l.operating_expenses)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",l.year,"度: ",i(l.operating_expenses),")"]})]})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"経常利益"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.ordinaryIncome)}),j&&l&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.ordinaryIncome>=l.net_income?"text-success":"text-error"}`,children:[s.ordinaryIncome>=l.net_income?"↑":"↓",i(Math.abs(s.ordinaryIncome-l.net_income))]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("h4",{className:"font-medium text-text-main mb-4",children:"損益計算書"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"売上高"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.revenue)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"売上原価"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.costOfSales)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border bg-surface-highlight px-2 -mx-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:"売上総利益"}),e.jsx("span",{className:"font-bold text-text-main",children:i(s.grossProfit)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"販売費及び一般管理費"}),e.jsx("span",{className:"font-medium text-error",children:i(s.operatingExpenses)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border bg-primary-light px-2 -mx-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:"営業利益"}),e.jsx("span",{className:"font-bold text-primary",children:i(s.operatingIncome)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"営業外損益"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.nonOperatingIncome-s.nonOperatingExpenses)})]}),e.jsxs("div",{className:"flex justify-between py-2 bg-success-light px-2 -mx-2 rounded",children:[e.jsx("span",{className:"font-bold text-text-main",children:"税引前当期純利益"}),e.jsx("span",{className:"font-bold text-success",children:i(s.incomeBeforeTax)})]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsxs("h4",{className:"font-medium text-text-main mb-4",children:[h?"利益剰余金":"元入金","の計算"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:h?"前期繰越利益剰余金":"期首元入金"}),e.jsx("span",{className:"font-medium text-text-main",children:i(h?s.beginningRetainedEarnings||0:s.beginningCapital||0)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"当期純利益（所得金額）"}),e.jsxs("span",{className:"font-medium text-success",children:["+",i(a.netIncome)]})]}),e.jsxs("div",{className:"flex justify-between py-2 bg-primary-light px-2 -mx-2 rounded",children:[e.jsx("span",{className:"font-bold text-text-main",children:h?"利益剰余金（次期繰越）":"期末元入金額"}),e.jsx("span",{className:"font-bold text-primary",children:i(h?s.retainedEarnings:s.netAssets)})]})]}),e.jsx("p",{className:"text-[10px] text-text-muted mt-3",children:"※当期純利益は、税引前当期純利益から見積法人税等を差し引いた後の金額です。"})]}),s.expensesByCategory.length>0&&e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("h4",{className:"font-medium text-text-main mb-4",children:"経費内訳（上位5件）"}),e.jsx("div",{className:"space-y-3",children:s.expensesByCategory.slice(0,5).map((b,o)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-surface-highlight rounded-lg flex items-center justify-center text-sm font-medium text-text-muted",children:o+1}),e.jsx("span",{className:"text-text-main",children:b.category})]}),e.jsx("span",{className:"font-medium text-text-main",children:i(b.amount)})]},o))})]})]}),Xe=({taxResult:s,corporateInfo:a,handleCopy:x,copiedField:l})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"法人税等の計算"}),e.jsx("p",{className:"text-text-muted mb-6",children:"課税所得に基づいて法人税等を自動計算しました。"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"課税所得"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.taxableIncome)})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"法人税等合計"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:i(s.totalTax)}),e.jsxs("p",{className:"text-xs text-text-muted mt-2",children:["実効税率: ",Me(s.effectiveTaxRate)]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl divide-y divide-border",children:[e.jsx("div",{className:"p-4",children:e.jsx("h4",{className:"font-medium text-text-main",children:"法人税等の内訳"})}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-main",children:"法人税"}),a.capital<=1e8&&e.jsx("span",{className:"ml-2 text-xs text-success bg-success-light px-2 py-0.5 rounded",children:"中小法人軽減"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:i(s.corporateTax)}),e.jsx("button",{onClick:()=>x(s.corporateTax,"corporateTax"),className:`p-1.5 rounded transition-colors ${l==="corporateTax"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,children:l==="corporateTax"?e.jsx(Pe,{className:"w-4 h-4"}):e.jsx(Ge,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"地方法人税"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.localCorporateTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"法人住民税"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.corporateInhabitantTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"法人事業税"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.businessTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-primary-light",children:[e.jsx("span",{className:"font-bold text-text-main",children:"税金合計"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:i(s.totalTax)})]})]}),e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-text-main",children:"当期純利益"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:i(s.netIncome)})]}),s.taxableIncome<=0&&e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"課税所得がありません"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"今期は課税所得がないため、法人税は発生しません（均等割のみ発生）。"})]})]})]}),Ye=({consumptionTaxResult:s})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"消費税の確認"}),e.jsx("p",{className:"text-text-muted mb-6",children:"売上・仕入に係る消費税を集計しました。"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl divide-y divide-border",children:[e.jsx("div",{className:"p-4",children:e.jsx("h4",{className:"font-medium text-text-main",children:"消費税計算"})}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"課税売上高"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.taxableRevenue)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"売上に係る消費税"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.outputTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"課税仕入高"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.taxablePurchases)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"仕入に係る消費税"}),e.jsx("span",{className:"font-medium text-error",children:i(s.inputTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-primary-light",children:[e.jsx("span",{className:"font-bold text-text-main",children:"納付消費税額（国税）"}),e.jsx("span",{className:"font-bold text-primary",children:i(s.netConsumptionTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-main",children:"地方消費税"}),e.jsx("span",{className:"font-medium text-text-main",children:i(s.localConsumptionTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-success-light",children:[e.jsx("span",{className:"font-bold text-text-main",children:"消費税等合計"}),e.jsx("span",{className:"font-bold text-success text-lg",children:i(s.totalConsumptionTax)})]})]}),e.jsxs("div",{className:"bg-info-light border border-info/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"免税事業者の確認"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"基準期間の課税売上高が1,000万円以下の場合、消費税の納税義務が免除される場合があります。"})]})]})]}),es=({isCorporation:s,corporateInfo:a})=>{const x=!s||a.corporateNumber&&a.corporateNumber.length>=12,l=!!a.address;return e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5 mb-6 shadow-sm",children:[e.jsxs("h4",{className:"font-bold text-text-main flex items-center gap-2 mb-4",children:[e.jsx(Oe,{className:"w-5 h-5 text-primary"}),"AI申告準備チェック（自動診断）"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-border pb-2",children:[e.jsx("span",{className:"text-text-muted",children:"貸借対照表の整合性（資産＝負債＋純資産）"}),e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(F,{className:"w-4 h-4"})," 正常"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-border pb-2",children:[e.jsxs("span",{className:"text-text-muted",children:[s?"法人番号":"個人番号","の形式チェック"]}),x?e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(F,{className:"w-4 h-4"})," 正常"]}):e.jsxs("span",{className:"text-warning flex items-center gap-1 font-bold",children:[e.jsx(L,{className:"w-4 h-4"})," 未入力"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-border pb-2",children:[e.jsx("span",{className:"text-text-muted",children:"基本情報（所在地・代表者）の入力"}),l?e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(F,{className:"w-4 h-4"})," 完了"]}):e.jsxs("span",{className:"text-warning flex items-center gap-1 font-bold",children:[e.jsx(L,{className:"w-4 h-4"})," 未完了"]})]})]})]})},ss=({corporateInfo:s,financialData:a,taxResult:x,isLoading:l,generatePDF:j,handleOpenInEditor:f,isCorporation:h})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),"書類の作成・ダウンロード"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"入力内容を確認して、必要な書類をダウンロードしてください。"})]}),e.jsx(es,{isCorporation:h,corporateInfo:s}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl divide-y divide-border",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"会社名"}),e.jsx("span",{className:"font-medium text-text-main",children:s.companyName||"（未入力）"})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"事業年度"}),e.jsxs("span",{className:"font-medium text-text-main",children:[s.fiscalYear,"年度"]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"売上高"}),e.jsx("span",{className:"font-medium text-success",children:i(a.revenue)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"営業外収益"}),e.jsx("span",{className:"font-medium text-success",children:i(a.nonOperatingIncome)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"経常利益"}),e.jsx("span",{className:"font-medium text-primary",children:i(a.ordinaryIncome)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:h?"法人税等":"所得税等"}),e.jsx("span",{className:"font-medium text-error",children:i(x.totalTax)})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-success-light",children:[e.jsx("span",{className:"font-bold text-text-main",children:"当期純利益"}),e.jsx("span",{className:"font-bold text-success",children:i(x.netIncome)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>j("financial"),disabled:l,className:"flex items-center justify-between p-6 bg-surface border border-border rounded-xl hover:border-primary hover:bg-primary/5 hover:shadow-md transition-all group w-full",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:l?e.jsx(M,{className:"w-6 h-6 animate-spin text-primary"}):e.jsx(V,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-text-main text-lg",children:h?"損益計算書・貸借対照表":"所得税青色申告決算書"}),e.jsxs("p",{className:"text-sm text-text-muted mt-0.5",children:["当期の",h?"決算状況":"収支状況","をPDFで出力"]})]})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary text-white rounded-lg text-sm font-bold shadow-sm transition-transform group-hover:scale-105",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"ダウンロード"})]})]}),e.jsxs("button",{onClick:()=>{if(a){const b=Y.generateFinancialStatementCSV({...s,...a,fiscalYear:s.fiscalYear,taxableIncome:x.taxableIncome,estimatedTax:x.totalTax});Y.downloadCSV(b,`${h?"financial_statements":"blue_return"}_${s.companyName}_${s.fiscalYear}.csv`),A.success(`${h?"財務諸表":"決算書"}CSVを出力しました`)}},disabled:l,className:"flex items-center justify-between p-6 bg-surface border border-border rounded-xl hover:border-primary hover:bg-primary/5 hover:shadow-md transition-all group w-full",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/10 flex items-center justify-center group-hover:bg-indigo-500/20 transition-colors",children:e.jsx(ae,{className:"w-6 h-6 text-indigo-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-text-main text-lg",children:h?"財務諸表データ(CSV)":"決算書データ(CSV)"}),e.jsx("p",{className:"text-sm text-text-muted mt-0.5",children:"e-Taxソフト等への取込用"})]})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-500 text-white rounded-lg text-sm font-bold shadow-sm transition-transform group-hover:scale-105",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"CSV出力"})]})]}),e.jsxs("button",{onClick:()=>j("corporate"),disabled:l,className:"flex items-center justify-between p-6 bg-surface border border-border rounded-xl hover:border-primary hover:bg-primary/5 hover:shadow-md transition-all group w-full lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:l?e.jsx(M,{className:"w-6 h-6 animate-spin text-primary"}):e.jsx(G,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-text-main text-lg",children:h?"法人税申告書（詳細）":"所得税確定申告書B（詳細）"}),e.jsxs("p",{className:"text-sm text-text-muted mt-0.5",children:["別表を含めた",h?"法人税申告":"確定申告","のドラフト版"]})]})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary text-white rounded-lg text-sm font-bold shadow-sm transition-transform group-hover:scale-105",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"ダウンロード"})]})]})]}),e.jsx("div",{className:"bg-surface-highlight rounded-xl p-5 border border-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-text-main flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-primary"}),"申告書を詳細に編集する"]}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"別表の調整や、細かい数字の修正が必要な場合は、詳細エディタをご利用ください。"})]}),e.jsxs("button",{onClick:f,className:"btn-secondary whitespace-nowrap",children:["詳細エディタで開く",e.jsx(B,{className:"w-4 h-4 ml-2"})]})]})}),e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"ご注意"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:["この書類は参考資料です。正式な",h?"法人税申告":"確定申告","は税理士にご相談いただくか、 e-Taxにて提出してください。"]})]})]}),e.jsx("div",{className:"bg-surface border border-border rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-text-muted"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-main",children:"PDF座標キャリブレーター"}),e.jsx("p",{className:"text-sm text-text-muted",children:"公式PDFフォームの座標調整ツール"})]})]}),e.jsxs("a",{href:"/tools/coordinate_picker.html",target:"_blank",rel:"noopener noreferrer",className:"btn-ghost text-sm flex items-center gap-1",children:["開く",e.jsx(B,{className:"w-4 h-4"})]})]})})]}),Ts=()=>{const{user:s}=Ee(),{currentBusinessType:a}=Ce(),{transactions:x}=ke(s==null?void 0:s.id,a==null?void 0:a.business_type),l=Te(),j=(a==null?void 0:a.business_type)==="corporation",[f,h]=y.useState(1),[b,o]=y.useState(!1),[ie,H]=y.useState(null),$=new Date().getFullYear(),[r,P]=y.useState({companyName:"",representativeName:"",corporateNumber:"",address:"",taxOffice:"",capital:1e7,fiscalYearStart:`${$-1}-04-01`,fiscalYearEnd:`${$}-03-31`,fiscalYear:$-1,employeeCount:1,beginningRetainedEarnings:0}),[c,Z]=y.useState(null),[d,re]=y.useState(null),[le,J]=y.useState(!1),[ce,de]=y.useState(!1);Ae.useEffect(()=>{(async()=>{if(s!=null&&s.id&&(a!=null&&a.business_type))try{const m=r.fiscalYear,[v,g]=await Promise.all([U.getAllByBusinessType(s.id,a.business_type),X.getAllByBusinessType(s.id,a.business_type)]),_=v.filter(p=>p.year<m),u=g.filter(p=>p.year<m),N=_.length>0?_[0]:null;Z(N);const w=u.length>0?u[0]:null,O=Array.from(new Set([..._.map(p=>p.year),...u.map(p=>p.year)])).reduce((p,T)=>{const I=_.find(z=>z.year===T),S=u.find(z=>z.year===T),_e=(S==null?void 0:S.net_assets_retained_earnings)??(I==null?void 0:I.net_income)??0;return p+_e},0);if(w)re(w),P(p=>({...p,capital:w.net_assets_capital||p.capital,beginningRetainedEarnings:O}));else if(P(p=>({...p,beginningRetainedEarnings:O})),N!=null&&N.balance_sheet){const p=N.balance_sheet;P(T=>({...T,capital:p.capital||T.capital,beginningRetainedEarnings:O||p.retained_earnings||0}))}}catch(m){console.error("前年度データの取得に失敗しました:",m)}})()},[s==null?void 0:s.id,a==null?void 0:a.business_type,r.fiscalYear]);const me=()=>{if(window.confirm(`現在の計算結果を詳細エディタに転記して開きますか？
（エディタの既存データは上書きされます）`)){const n=ee.calculateDataFromTransactions(x,r,(c==null?void 0:c.balance_sheet)||null);ee.saveData({...se,...n,companyInfo:{...se.companyInfo,corporateName:r.companyName,representativeName:r.representativeName,corporateNumber:r.corporateNumber||"",address:r.address||"",taxOffice:r.taxOffice||"",capitalAmount:r.capital,fiscalYearStart:r.fiscalYearStart,fiscalYearEnd:r.fiscalYearEnd}}),l("/corporate-tax/input")}},xe=n=>{P(m=>({...m,...n}))},[oe,K]=y.useState([]),[k,he]=y.useState(0),pe=(n,m)=>{he(n),K(m)},E=y.useMemo(()=>{var v,g,_,u,N,w,W,O,p;const n={retainedEarnings:r.beginningRetainedEarnings!==0?r.beginningRetainedEarnings||0:(d==null?void 0:d.net_assets_retained_earnings_total)||((v=c==null?void 0:c.balance_sheet)==null?void 0:v.retained_earnings)||0,capital:(d==null?void 0:d.net_assets_capital)||((g=c==null?void 0:c.balance_sheet)==null?void 0:g.capital)||r.capital,cash:(d==null?void 0:d.assets_current_cash)||((_=c==null?void 0:c.balance_sheet)==null?void 0:_.assets_current_cash)||0,receivable:(d==null?void 0:d.assets_current_receivable)||((u=c==null?void 0:c.balance_sheet)==null?void 0:u.assets_current_receivable)||0,inventory:(d==null?void 0:d.assets_current_inventory)||((N=c==null?void 0:c.balance_sheet)==null?void 0:N.assets_current_inventory)||0,fixedAssets:(d==null?void 0:d.assets_fixed_total)||((w=c==null?void 0:c.balance_sheet)==null?void 0:w.assets_fixed_total)||0,payable:(d==null?void 0:d.liabilities_current_payable)||((W=c==null?void 0:c.balance_sheet)==null?void 0:W.liabilities_current_payable)||0,shortTermLoans:(d==null?void 0:d.liabilities_short_term_loans)||((O=c==null?void 0:c.balance_sheet)==null?void 0:O.liabilities_short_term_loans)||0,longTermLoans:(d==null?void 0:d.liabilities_long_term_loans)||((p=c==null?void 0:c.balance_sheet)==null?void 0:p.liabilities_long_term_loans)||0},m=$e(x,r.fiscalYear,n);if(k>0){const T=m.expensesByCategory.findIndex(I=>I.category==="減価償却費");T>=0?m.expensesByCategory[T].amount+=k:m.expensesByCategory.push({category:"減価償却費",amount:k}),m.operatingExpenses+=k,m.operatingIncome-=k,m.ordinaryIncome-=k,m.incomeBeforeTax-=k,m.expensesByCategory.sort((I,S)=>S.amount-I.amount)}return m},[x,r.fiscalYear,k]),C=y.useMemo(()=>Se(E,r),[E,r]),be=y.useMemo(()=>Le(E.revenue,E.operatingExpenses),[E]),t=y.useMemo(()=>{const n=C.netIncome;return{...E,retainedEarnings:(E.beginningRetainedEarnings||0)+n,netAssets:(E.beginningCapital||0)+(E.beginningRetainedEarnings||0)+n}},[E,C.netIncome]),ue=()=>{f<q.length&&h(f+1)},je=()=>{f>1&&h(f-1)},fe=()=>{const n=a;if(!n){A.error("登録された事業情報が見つかりません。連携設定で登録してください。");return}const m=n.fiscal_year_start_month||(n.business_type==="corporation"?4:1),v=`${$-1}-${String(m).padStart(2,"0")}-01`,g=new Date($-1,m-1,1);g.setFullYear(g.getFullYear()+1),g.setDate(g.getDate()-1);const _=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")}`;P(u=>({...u,companyName:(n==null?void 0:n.company_name)||u.companyName||"",representativeName:(n==null?void 0:n.representative_name)||u.representativeName||"",corporateNumber:((n==null?void 0:n.tax_number)||u.corporateNumber||"").replace(/^T/,""),address:(n==null?void 0:n.address)||u.address||"",capital:(n==null?void 0:n.capital_amount)||u.capital||0,fiscalYearStart:v,fiscalYearEnd:_})),A.success("事業情報を転記しました")},ge=()=>{if(!x||x.length===0){A.error("取引データが見つかりません。");return}const n=De(x,r.fiscalYear);if(n.length===0){A.error("転記可能な減価償却資産（タグ: depreciation_asset）が見つかりません。");return}K(n),A.success(`${n.length}件の減価償却資産を転記しました`)},Ne=async(n,m)=>{try{await navigator.clipboard.writeText(String(n).replace(/[¥,]/g,"")),H(m),setTimeout(()=>H(null),2e3)}catch(v){console.error("コピーに失敗しました:",v)}},ye=async n=>{o(!0);try{const m={companyName:r.companyName||"（会社名未入力）",representativeName:r.representativeName,address:r.address,corporateNumber:r.corporateNumber,capital:r.capital,businessType:"corporation",revenue:t.revenue,expenses:t.operatingExpenses,netIncome:C.netIncome,expensesByCategory:t.expensesByCategory,fiscalYear:r.fiscalYear,fiscalYearStart:r.fiscalYearStart,fiscalYearEnd:r.fiscalYearEnd,taxableIncome:C.taxableIncome,estimatedTax:C.totalTax,costOfSales:t.costOfSales,grossProfit:t.grossProfit,operatingExpenses:t.operatingExpenses,operatingIncome:t.operatingIncome,nonOperatingIncome:t.nonOperatingIncome,nonOperatingExpenses:t.nonOperatingExpenses,ordinaryIncome:t.ordinaryIncome,cash:t.cash,accountsReceivable:t.accountsReceivable,inventory:t.inventory,fixedAssets:t.fixedAssets,totalAssets:t.totalAssets,accountsPayable:t.accountsPayable,shortTermLoans:t.shortTermLoans,longTermLoans:t.longTermLoans,totalLiabilities:t.totalLiabilities,beginningRetainedEarnings:t.beginningRetainedEarnings,beginningCapital:t.beginningCapital,retainedEarnings:t.retainedEarnings,depreciation:k};if(s!=null&&s.id)try{const w=(a==null?void 0:a.business_type)==="corporation";await U.save({user_id:s.id,business_type:w?"corporation":"individual",year:r.fiscalYear,revenue:t.revenue,cost_of_sales:t.costOfSales,operating_expenses:t.operatingExpenses,non_operating_income:t.nonOperatingIncome,non_operating_expenses:t.nonOperatingExpenses,extraordinary_income:t.extraordinaryIncome,extraordinary_loss:t.extraordinaryLoss,income_before_tax:t.incomeBeforeTax,net_income:C.netIncome,category_breakdown:t.expensesByCategory,status:"confirmed",metadata:{generated_by:"wizard",generated_at:new Date().toISOString()},balance_sheet:{assets_current_cash:t.cash,assets_current_receivable:t.accountsReceivable,assets_current_inventory:t.inventory,assets_fixed_total:t.fixedAssets,liabilities_current_payable:t.accountsPayable,liabilities_short_term_loans:t.shortTermLoans,liabilities_long_term_loans:t.longTermLoans,retained_earnings:t.retainedEarnings,capital:r.capital,assets_total:t.totalAssets,liabilities_total:t.totalLiabilities,net_assets_total:t.netAssets}}),await X.save({user_id:s.id,business_type:w?"corporation":"individual",year:r.fiscalYear,assets_current_cash:t.cash,assets_current_receivable:t.accountsReceivable,assets_current_inventory:t.inventory,assets_current_total:t.cash+t.accountsReceivable+t.inventory,assets_fixed_total:t.fixedAssets,assets_total:t.totalAssets,liabilities_current_payable:t.accountsPayable,liabilities_short_term_loans:t.shortTermLoans,liabilities_long_term_loans:t.longTermLoans,liabilities_total:t.totalLiabilities,net_assets_capital:r.capital,net_assets_retained_earnings:C.netIncome,net_assets_retained_earnings_total:t.retainedEarnings,net_assets_shareholders_equity:t.netAssets,net_assets_total:t.netAssets,liabilities_and_net_assets_total:t.totalAssets,status:"confirmed",metadata:{generated_by:"wizard",generated_at:new Date().toISOString()}}),A.success("決算データを履歴に保存しました")}catch(w){console.error("Data Auto-save Error:",w)}let v,g;n==="corporate"?(v=await Ve(m),g=`法人税申告書_${r.fiscalYear}年度.pdf`):(v=await We(m),g=`決算報告書_${r.fiscalYear}年度.pdf`);const _=new Blob([v],{type:"application/pdf"}),u=URL.createObjectURL(_),N=document.createElement("a");N.href=u,N.download=g,document.body.appendChild(N),N.click(),document.body.removeChild(N),window.open(u,"_blank")}catch(m){console.error("PDF生成エラー:",m)}finally{o(!1)}},ve=()=>{switch(f){case 1:return e.jsx(Je,{corporateInfo:r,setCorporateInfo:P,handleInfoChange:xe,handleTranscribe:fe,prevYearSettlement:c,prevYearBS:d,setIsImportModalOpen:J,isCorporation:j});case 2:return e.jsx(Ke,{assets:oe,onDepreciationCalculate:pe,handleTranscribe:ge});case 3:return e.jsx(Qe,{financialData:t,taxResult:C,corporateInfo:r,prevYearSettlement:c,showComparison:ce,setShowComparison:de,isCorporation:j});case 4:return e.jsx(Xe,{taxResult:C,corporateInfo:r,handleCopy:Ne,copiedField:ie});case 5:return e.jsx(Ye,{consumptionTaxResult:be});case 6:return e.jsx(ss,{corporateInfo:r,financialData:t,taxResult:C,isLoading:b,generatePDF:ye,handleOpenInEditor:me,isCorporation:j});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(te,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-text-main flex items-center gap-2",children:[e.jsx(G,{className:"w-7 h-7 text-primary"}),"法人税申告サポート"]}),e.jsx("p",{className:"text-text-muted mt-1",children:"法人決算・税務申告のサポート"})]})]}),e.jsxs(D,{to:"/corporate-tax-guide",className:"flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"申告ガイド"})]})]}),e.jsx(ze,{currentStep:f,steps:q.map(n=>({number:n.id,title:n.title,description:n.description}))}),e.jsx("div",{className:"bg-surface rounded-xl border border-border p-6 md:p-8 mb-8 shadow-sm",children:ve()}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("button",{onClick:je,disabled:f===1,className:`btn-ghost ${f===1?"invisible":""}`,children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"戻る"]}),f<q.length?e.jsxs("button",{onClick:ue,className:"btn-primary min-w-[200px]",children:["次へ進む",e.jsx(B,{className:"w-5 h-5 ml-2"})]}):e.jsxs(D,{to:"/dashboard",className:"btn-primary min-w-[200px]",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"ダッシュボードへ"]})]})]}),e.jsx(Fe,{isOpen:le,onClose:()=>J(!1),userId:(s==null?void 0:s.id)||"",businessType:(a==null?void 0:a.business_type)||"corporation",onImportSuccess:()=>{s!=null&&s.id&&(a!=null&&a.business_type)&&U.getLatest(s.id,a.business_type).then(Z),A.success("前期データをインポートしました")}})]})};export{Ts as default};
