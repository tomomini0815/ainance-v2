import{j as e}from"./index-DbpAXpfG.js";import{D as j,C as y,A as v,d as N,e as C}from"./index-8GBqu_Pm.js";y.register(v,N,C);const A=({transactions:x})=>{const u=()=>{const a=x.filter(s=>s.type==="expense"),t={};a.forEach(s=>{const r=Math.abs(typeof s.amount=="string"?parseFloat(s.amount):s.amount);t[s.category]?t[s.category]+=r:t[s.category]=r});const o=Object.values(t).reduce((s,r)=>s+r,0),m={};return Object.keys(t).forEach(s=>{m[s]=Math.round(t[s]/o*100)}),{categoryTotals:t,percentages:m,totalAmount:o}},{percentages:n,categoryTotals:h,totalAmount:p}=u(),l=Object.keys(n),b=Object.values(n),c=Object.values(h),i=["#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#06b6d4","#0ea5e9","#3b82f6","#64748b"],d=l.map((a,t)=>i[t%i.length]),f={labels:l,datasets:[{data:b,backgroundColor:d,borderWidth:0,cutout:"75%"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(a){const t=a.label||"",o=c[a.dataIndex];return`${t}: ${a.parsed}% (${o.toLocaleString()}円)`}},backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#f8fafc",bodyColor:"#e2e8f0",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10}}};return e.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"支出カテゴリ"}),e.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"詳細を見る"})]}),e.jsxs("div",{className:"chart-container h-64 w-full relative",children:[e.jsx(j,{data:f,options:g}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"総支出"}),e.jsxs("p",{className:"text-2xl font-bold text-text-main",children:["¥",p.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-text-secondary mb-3 text-sm",children:"カテゴリ別支出内訳"}),e.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:l.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between group p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3 shadow-sm",style:{backgroundColor:d[t]}}),e.jsx("span",{className:"text-sm text-text-secondary group-hover:text-text-main transition-colors",children:a})]}),e.jsxs("span",{className:"text-sm font-bold text-text-main",children:["¥",c[t].toLocaleString()]})]},a))})]})]})};export{A as default};
