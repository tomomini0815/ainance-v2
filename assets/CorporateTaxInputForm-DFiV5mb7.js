import{c as R,r as y,j as e,P,q as C,O as oe,B as de,G as N,a as ie,e as ce,l as xe,F as L,N as me,m as pe,U as be,X as he}from"./index-CIKZNbWN.js";import{i as q,C as _,a as G}from"./CsvExportService-DlAxBSAy.js";import{e as H,f as ue,h as ge}from"./pdfJapaneseService-DtnOWdEF.js";import{C as M}from"./calculator-CQOf90r6.js";import{R as fe}from"./rotate-ccw-BGQwpsII.js";import{I as $}from"./info-CYssVvqX.js";import{L as Q}from"./landmark-DcZ20a0F.js";import{C as z}from"./circle-question-mark-BBGp-eVR.js";import{A as je}from"./arrow-right-FWvQseBp.js";import{R as O}from"./refresh-cw-DcfbA1sx.js";import{M as Ne,P as ve}from"./phone-CdmLKOQl.js";import{b as ye,c as we}from"./eTaxExportService-DEuuuqQn.js";import{C as ke}from"./chart-pie-DWdfQmrc.js";import{A as W}from"./activity-Dy7CuXNv.js";import{g as Ce}from"./motion-D5T1KndV.js";import{E as Ie}from"./eye-tiyZPcXR.js";import{S as Se}from"./save-CGQoR7vb.js";import{D as De}from"./download-C0UsUNRt.js";import{S as Ee}from"./share-2-CbNowm_S.js";import{B as Pe}from"./book-open-Ddf2n7wX.js";import{W as Ae}from"./wrench-BaQb-Pn7.js";import"./CorporateTaxService-BzRMdiLF.js";import"./pdfAutoFillService-Da9w_cIX.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Z=R("box",Te);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Le=R("coffee",Fe);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Oe=R("hash",_e);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],Be=R("mouse-pointer-2",Re),i=({value:t,onChange:c,className:s="input-base",onFocus:m,onBlur:x,...o})=>{const[l,d]=y.useState(t.toString()),[n,r]=y.useState(!1);y.useEffect(()=>{n?(l===""?0:Number(l))!==t&&d(t.toString()):d(t.toString())},[t,n]);const a=h=>{r(!0),t===0&&d(""),m&&m(h)},u=h=>{r(!1),d(t.toString()),x&&x(h)},b=h=>{const I=h.target.value;if(d(I),I==="")c(0);else{const S=Number(I);isNaN(S)||c(S)}};return e.jsx("input",{...o,type:"number",value:l,onChange:b,onFocus:a,onBlur:u,onWheel:h=>h.target.blur(),autoComplete:"off",className:s})},Ue=({data:t,onChange:c})=>{var l,d,n,r;const s=(a,u)=>{c({beppyo1:{...t.beppyo1,[a]:u}})},m=(a,u)=>{var b,h;c({calibration:{globalShiftX:((b=t.calibration)==null?void 0:b.globalShiftX)||0,globalShiftY:((h=t.calibration)==null?void 0:h.globalShiftY)||0,[a]:u}})},x=()=>{c({calibration:{globalShiftX:0,globalShiftY:0}})},o=t.beppyo1.corporateTaxAmount-t.beppyo1.specialTaxCredit-t.beppyo1.nationalInterimPayment;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wider flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-4 bg-primary rounded-full"}),"国税（法人税・地方法人税）"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-slate-800 text-white rounded font-bold text-xs",children:"1"}),e.jsx("label",{className:"block text-xs font-bold text-text-main",children:"法人税 課税標準額"})]}),e.jsx(i,{value:t.beppyo1.taxableIncome,onChange:a=>s("taxableIncome",a),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-slate-800 text-white rounded font-bold text-xs",children:"2"}),e.jsx("label",{className:"block text-xs font-bold text-text-main",children:"法人税 算出税額"})]}),e.jsx(i,{value:t.beppyo1.corporateTaxAmount,onChange:a=>s("corporateTaxAmount",a),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-slate-800 text-white rounded font-bold text-xs",children:"10"}),e.jsx("label",{className:"block text-xs font-bold text-text-main",children:"法人税 税額控除額"})]}),e.jsx(i,{value:t.beppyo1.specialTaxCredit,onChange:a=>s("specialTaxCredit",a),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm border-l-4 border-l-blue-500",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-blue-600 text-white rounded font-bold text-xs",children:"12"}),e.jsx("label",{className:"block text-xs font-bold text-text-main font-bold text-blue-600",children:"法人税 中間納付額"})]}),e.jsx(i,{value:t.beppyo1.nationalInterimPayment,onChange:a=>s("nationalInterimPayment",a),className:"input-base w-full font-mono text-base border-blue-200 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm bg-white dark:bg-slate-800",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-3 uppercase tracking-wider",children:"地方法人税 算出税額 (法人税×10.3%)"}),e.jsx(i,{value:t.beppyo1.localCorporateTaxAmount,onChange:a=>s("localCorporateTaxAmount",a),className:"input-base w-full font-mono text-base bg-transparent"})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm border-l-4 border-l-blue-500",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-3 uppercase tracking-wider",children:"地方法人税 中間納付額"}),e.jsx(i,{value:t.beppyo1.localInterimPayment,onChange:a=>s("localInterimPayment",a),className:"input-base w-full font-mono text-base border-blue-200 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wider flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-4 bg-emerald-500 rounded-full"}),"地方税（住民税・事業税）"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm",children:[e.jsx("label",{className:"block text-xs font-bold text-text-main mb-3",children:"法人住民税（都道府県・市区町村）"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"県民税:"}),e.jsx(i,{value:t.beppyo1.prefecturalTax,onChange:a=>s("prefecturalTax",a),className:"input-base flex-1 font-mono text-sm py-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"市民税:"}),e.jsx(i,{value:t.beppyo1.municipalTax,onChange:a=>s("municipalTax",a),className:"input-base flex-1 font-mono text-sm py-1"})]})]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm",children:[e.jsx("label",{className:"block text-xs font-bold text-text-main mb-3",children:"法人事業税"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"事業税:"}),e.jsx(i,{value:t.beppyo1.enterpriseTax,onChange:a=>s("enterpriseTax",a),className:"input-base flex-1 font-mono text-sm py-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"特例分:"}),e.jsx(i,{value:t.beppyo1.specialLocalEnterpriseTax,onChange:a=>s("specialLocalEnterpriseTax",a),className:"input-base flex-1 font-mono text-sm py-1"})]})]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border shadow-sm border-l-4 border-l-blue-500",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-3",children:"地方税 中間納付合計"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"住民税:"}),e.jsx(i,{value:t.beppyo1.inhabitantInterimPayment,onChange:a=>s("inhabitantInterimPayment",a),className:"input-base flex-1 font-mono text-sm py-1 border-blue-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-text-muted w-12",children:"事業税:"}),e.jsx(i,{value:t.beppyo1.enterpriseInterimPayment,onChange:a=>s("enterpriseInterimPayment",a),className:"input-base flex-1 font-mono text-sm py-1 border-blue-100"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gradient-to-br dark:from-slate-900 dark:to-slate-800 p-8 rounded-2xl border border-primary/20 dark:border-white/5 shadow-xl shadow-primary/5 dark:shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity pointer-events-none",children:e.jsx(M,{size:120})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-10 h-10 flex items-center justify-center bg-primary text-white rounded-lg font-bold text-lg shadow-lg shadow-primary/30",children:"13"}),e.jsx("h3",{className:"text-2xl font-black text-text-main dark:text-white tracking-tight",children:"差引所得に対する法人税額"})]}),e.jsxs("p",{className:"text-text-muted dark:text-slate-400 text-sm max-w-md leading-relaxed",children:["(2 - 10 - 12)",e.jsx("br",{}),"税額控除および中間納付額を差し引いた、国に納めるべき確定申告額です。"]})]}),e.jsxs("div",{className:"flex flex-col items-center md:items-end",children:[e.jsx("div",{className:"text-sm font-bold text-primary mb-1 uppercase tracking-widest",children:"Final National Tax Due"}),e.jsxs("div",{className:"text-5xl md:text-6xl font-mono font-black text-primary dark:text-white dark:drop-shadow-[0_4px_12px_rgba(255,255,255,0.2)]",children:["¥",Math.max(0,o).toLocaleString()]}),o<0&&e.jsxs("div",{className:"mt-3 px-4 py-1.5 bg-emerald-500/10 border border-emerald-500/20 rounded-full text-emerald-400 font-bold text-sm backdrop-blur-sm",children:["確定還付税額: ¥",Math.abs(o).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-surface-highlight/10 border border-primary/20 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:e.jsx(Be,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-text-main flex items-center gap-2",children:"印字位置の微調整 (PDF Precision Calibration)"}),e.jsx("p",{className:"text-xs text-text-muted",children:"公式PDFの個体差によるズレを0.1単位で補正します（一度設定すれば保存されます）"})]})]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-text-muted hover:text-text-main hover:bg-surface-highlight rounded-lg transition-colors border border-border",children:[e.jsx(fe,{className:"w-3 h-3"}),"リセット"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("label",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"左右方向 (X-Shift)"}),e.jsx("span",{className:"text-sm font-mono font-bold text-primary",children:(((l=t.calibration)==null?void 0:l.globalShiftX)||0).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"左に移動"}),e.jsx("input",{type:"range",min:"-100",max:"100",step:"0.5",value:((d=t.calibration)==null?void 0:d.globalShiftX)||0,onChange:a=>m("globalShiftX",parseFloat(a.target.value)),className:"flex-1 accent-primary h-1.5 rounded-lg appearance-none bg-border cursor-pointer"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:"右に移動"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("label",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"上下方向 (Y-Shift)"}),e.jsx("span",{className:"text-sm font-mono font-bold text-primary",children:(((n=t.calibration)==null?void 0:n.globalShiftY)||0).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"上に移動"}),e.jsx("input",{type:"range",min:"-100",max:"100",step:"0.5",value:((r=t.calibration)==null?void 0:r.globalShiftY)||0,onChange:a=>m("globalShiftY",parseFloat(a.target.value)),className:"flex-1 accent-primary h-1.5 rounded-lg appearance-none bg-border cursor-pointer"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:"下に移動"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-start gap-2 p-3 bg-blue-500/5 dark:bg-blue-900/20 rounded-xl border border-blue-500/10",children:[e.jsx($,{className:"w-4 h-4 text-blue-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-[10px] text-blue-600/80 leading-relaxed",children:"印字が枠のあとに続く場合は「右方向・下方向」に、枠の前に来る場合は「左方向・上方向」にスライダーを動かしてください。 一度調整してPDFを出力し、結果を確認しながら微調整を行うのが最も確実です。"})]})]})]})},Me=({data:t,onChange:c})=>{const s=(r,a)=>{c({beppyo4:{...t.beppyo4,[r]:a}})},m=r=>{const a={id:Date.now().toString(),description:"",amount:0,category:"other"};c({beppyo4:{...t.beppyo4,[r]:[...t.beppyo4[r],a]}})},x=(r,a)=>{c({beppyo4:{...t.beppyo4,[r]:t.beppyo4[r].filter(u=>u.id!==a)}})},o=(r,a,u,b)=>{c({beppyo4:{...t.beppyo4,[r]:t.beppyo4[r].map(h=>h.id===a?{...h,[u]:b}:h)}})},l=t.beppyo4.nonDeductibleTaxes+t.beppyo4.nonDeductibleEntertainment+t.beppyo4.excessDepreciation+t.beppyo4.otherAdditions.reduce((r,a)=>r+a.amount,0),d=t.beppyo4.deductibleEnterpriseTax+t.beppyo4.dividendExclusion+t.beppyo4.otherSubtractions.reduce((r,a)=>r+a.amount,0),n=t.beppyo4.netIncomeFromPL+l-d;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-info/5 border border-info/20 rounded-lg p-3 flex items-start gap-3 mb-4",children:[e.jsx($,{className:"w-4 h-4 text-info shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-text-muted",children:"この画面では会計上の利益から税務上の所得への調整を行います（申告調整）。 地方法人税や住民税は「加算」、支払った事業税などは「減算」として処理されます。"})]}),e.jsxs("div",{className:"bg-surface p-5 rounded-xl border border-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-slate-800 text-white rounded font-bold text-sm",children:"1"}),e.jsx("label",{className:"block text-sm font-bold text-text-main",children:"当期利益又は当期欠損の額"})]}),e.jsx(i,{value:t.beppyo4.netIncomeFromPL,onChange:r=>s("netIncomeFromPL",r),className:"input-base w-full max-w-md bg-surface font-mono text-lg"})]}),e.jsxs("div",{className:"bg-surface p-5 rounded-xl border border-border shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-red-600 text-white rounded font-bold text-sm",children:"＋"}),e.jsx("h4",{className:"font-bold text-text-main text-lg",children:"加算（損金不算入・益金算入）"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border border-border",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-2 uppercase tracking-wider",children:"法人税・住民税の損金不算入"}),e.jsx(i,{value:t.beppyo4.nonDeductibleTaxes,onChange:r=>s("nonDeductibleTaxes",r),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800/50 rounded-lg border border-border",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-2 uppercase tracking-wider",children:"交際費等の損金不算入"}),e.jsx(i,{value:t.beppyo4.nonDeductibleEntertainment,onChange:r=>s("nonDeductibleEntertainment",r),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border border-border",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-2 uppercase tracking-wider",children:"減価償却の償却超過額"}),e.jsx(i,{value:t.beppyo4.excessDepreciation,onChange:r=>s("excessDepreciation",r),className:"input-base w-full font-mono text-base"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("label",{className:"text-xs font-bold text-text-muted flex items-center gap-2",children:"その他加算項目"}),e.jsxs("button",{onClick:()=>m("otherAdditions"),className:"btn-secondary btn-sm h-7 px-3 text-[10px]",children:[e.jsx(P,{className:"w-3 h-3 mr-1"})," 項目追加"]})]}),e.jsx("div",{className:"space-y-2",children:t.beppyo4.otherAdditions.map(r=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_40px] items-center gap-4 group",children:[e.jsx("input",{type:"text",value:r.description,onChange:a=>o("otherAdditions",r.id,"description",a.target.value),className:"input-base w-full text-sm py-1.5",placeholder:"項目名"}),e.jsx(i,{value:r.amount,onChange:a=>o("otherAdditions",r.id,"amount",a),className:"input-base w-full font-mono text-right py-1.5"}),e.jsx("button",{onClick:()=>x("otherAdditions",r.id),className:"text-text-muted hover:text-red-500 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(C,{className:"w-4 h-4"})})]},r.id))})]}),e.jsxs("div",{className:"pt-4 mt-2 border-t border-border flex justify-end items-center gap-4",children:[e.jsx("span",{className:"text-sm font-bold text-text-muted",children:"加算計"}),e.jsxs("span",{className:"text-xl font-mono font-bold text-red-500",children:["¥",l.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-surface p-5 rounded-xl border border-border shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded font-bold text-sm",children:"－"}),e.jsx("h4",{className:"font-bold text-text-main text-lg",children:"減算（損金算入・益金不算入）"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50/20 dark:bg-blue-900/20 rounded-lg border border-border",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-2 uppercase tracking-wider",children:"事業税等の損金算入"}),e.jsx(i,{value:t.beppyo4.deductibleEnterpriseTax,onChange:r=>s("deductibleEnterpriseTax",r),className:"input-base w-full font-mono text-base"})]}),e.jsxs("div",{className:"p-4 bg-blue-50/20 dark:bg-blue-900/20 rounded-lg border border-border",children:[e.jsx("label",{className:"block text-xs font-bold text-text-muted mb-2 uppercase tracking-wider",children:"受取配当等の益金不算入"}),e.jsx(i,{value:t.beppyo4.dividendExclusion,onChange:r=>s("dividendExclusion",r),className:"input-base w-full font-mono text-base"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("label",{className:"text-xs font-bold text-text-muted flex items-center gap-2",children:"その他減算項目"}),e.jsxs("button",{onClick:()=>m("otherSubtractions"),className:"btn-secondary btn-sm h-7 px-3 text-[10px]",children:[e.jsx(P,{className:"w-3 h-3 mr-1"})," 項目追加"]})]}),e.jsx("div",{className:"space-y-2",children:t.beppyo4.otherSubtractions.map(r=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_40px] items-center gap-4 group",children:[e.jsx("input",{type:"text",value:r.description,onChange:a=>o("otherSubtractions",r.id,"description",a.target.value),className:"input-base w-full text-sm py-1.5",placeholder:"項目名"}),e.jsx(i,{value:r.amount,onChange:a=>o("otherSubtractions",r.id,"amount",a),className:"input-base w-full font-mono text-right py-1.5"}),e.jsx("button",{onClick:()=>x("otherSubtractions",r.id),className:"text-text-muted hover:text-red-500 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(C,{className:"w-4 h-4"})})]},r.id))})]}),e.jsxs("div",{className:"pt-4 mt-2 border-t border-border flex justify-end items-center gap-4",children:[e.jsx("span",{className:"text-sm font-bold text-text-muted",children:"減算計"}),e.jsxs("span",{className:"text-xl font-mono font-bold text-blue-500",children:["¥",d.toLocaleString()]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-light p-8 rounded-2xl border border-primary/20 shadow-xl shadow-primary/10 transition-all hover:shadow-2xl hover:shadow-primary/20",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-10 h-10 flex items-center justify-center bg-white/20 backdrop-blur-md text-white rounded-lg font-bold text-lg",children:"48"}),e.jsx("label",{className:"text-xl font-bold text-white",children:"所得金額又は欠損金額"})]}),e.jsx("p",{className:"text-primary-light/80 text-sm max-w-sm",children:"（1 + 加算計 - 減算計） この金額が別表一の「課税標準額」の計算の基礎となります。"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-4xl md:text-5xl font-mono font-black text-white drop-shadow-lg",children:["¥",n.toLocaleString()]}),e.jsx("div",{className:"mt-2 text-white/60 text-xs font-medium uppercase tracking-widest",children:"Calculated Taxable Income"})]})]})})]})},$e=({data:t,onChange:c})=>{const{beppyo5:s}=t,m=(o,l,d)=>{c({beppyo5:{...s,retainedEarningsItems:s.retainedEarningsItems.map(n=>n.id===o?{...n,[l]:d}:n)}})},x=(o,l)=>{c({beppyo5:{...s,[o]:l}})};return y.useEffect(()=>{const o=s.retainedEarningsItems.map(b=>({...b,endAmount:(b.beginAmount||0)+(b.increase||0)-(b.decrease||0)})),l=o.reduce((b,h)=>b+h.beginAmount,0),d=o.reduce((b,h)=>b+h.increase,0),n=o.reduce((b,h)=>b+h.decrease,0),r=o.reduce((b,h)=>b+h.endAmount,0),a=(s.capitalBegin||0)+(s.capitalIncrease||0)-(s.capitalDecrease||0);(o.some((b,h)=>b.endAmount!==s.retainedEarningsItems[h].endAmount)||l!==s.retainedEarningsBegin||r!==s.totalRetainedEarningsEnd||a!==s.capitalEnd)&&c({beppyo5:{...s,retainedEarningsItems:o,retainedEarningsBegin:l,currentIncrease:d,currentDecrease:n,totalRetainedEarningsEnd:r,capitalEnd:a}})},[s.retainedEarningsItems,s.capitalBegin,s.capitalIncrease,s.capitalDecrease]),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-surface rounded-2xl border border-border shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-border bg-white dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-md font-black text-text-main uppercase tracking-tight",children:[e.jsx(M,{className:"w-5 h-5 text-primary"}),"I. 利益積立金額の計算 (別表5-1)"]}),e.jsx("div",{className:"px-3 py-1 bg-primary/10 rounded-full",children:e.jsx("span",{className:"text-[10px] font-bold text-primary italic uppercase",children:"Retained Earnings Breakdown"})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white dark:bg-slate-800 text-[10px] uppercase font-black text-text-muted tracking-widest border-b border-border",children:[e.jsx("th",{className:"px-4 py-3 w-48",children:"区分 (明細)"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"① 期首現在高"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"② 当期中の減"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"③ 当期中の増"}),e.jsx("th",{className:"px-4 py-3 text-right bg-white dark:bg-slate-800",children:"④ 翌期首現在高"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:s.retainedEarningsItems.map(o=>e.jsxs("tr",{className:"hover:bg-slate-50/30 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-xs text-text-main",children:o.description}),e.jsx("div",{className:"text-[9px] text-text-muted mt-1 leading-tight",children:o.description.includes("未納")?"※ 法人税等不算入項目":"※ 内部留保項目"})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(i,{value:o.beginAmount,onChange:l=>m(o.id,"beginAmount",l),className:"w-full bg-transparent border-none text-right font-mono text-sm focus:ring-0"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(i,{value:o.decrease,onChange:l=>m(o.id,"decrease",l),className:"w-full bg-transparent border-none text-right font-mono text-sm focus:ring-0 text-red-600"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(i,{value:o.increase,onChange:l=>m(o.id,"increase",l),className:"w-full bg-transparent border-none text-right font-mono text-sm focus:ring-0 text-emerald-600"})}),e.jsx("td",{className:"px-4 py-3 bg-slate-50/30 dark:bg-slate-800/30 font-bold text-right font-mono text-sm",children:o.endAmount.toLocaleString()})]},o.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-white dark:bg-slate-900 text-text-main dark:text-white font-bold border-t-2 border-primary/20",children:[e.jsx("td",{className:"px-4 py-4 text-xs uppercase tracking-widest",children:"合計 (利益積立金)"}),e.jsx("td",{className:"px-4 py-4 text-right font-mono",children:s.retainedEarningsBegin.toLocaleString()}),e.jsxs("td",{className:"px-4 py-4 text-right font-mono text-error dark:text-red-300",children:["△ ",s.currentDecrease.toLocaleString()]}),e.jsx("td",{className:"px-4 py-4 text-right font-mono text-success dark:text-emerald-300",children:s.currentIncrease.toLocaleString()}),e.jsx("td",{className:"px-4 py-4 text-right font-mono text-primary dark:text-primary-light text-lg",children:s.totalRetainedEarningsEnd.toLocaleString()})]})})]})})]}),e.jsxs("div",{className:"bg-surface rounded-2xl border border-border shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-border bg-white dark:bg-slate-800/50",children:e.jsxs("h4",{className:"flex items-center gap-2 text-md font-black text-text-main uppercase tracking-tight",children:[e.jsx(Q,{className:"w-5 h-5 text-secondary"}),"II. 資本金等の額の計算"]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-text-muted uppercase tracking-widest mb-2",children:"期首資本金等の額"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:s.capitalBegin,onChange:o=>x("capitalBegin",o),className:"w-full pl-5 pr-10 py-3 border border-border rounded-xl font-mono text-xl text-right bg-white dark:bg-slate-800/50"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-muted font-bold",children:"円"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-emerald-700 uppercase tracking-widest mb-2",children:"当期中の増"}),e.jsx(i,{value:s.capitalIncrease,onChange:o=>x("capitalIncrease",o),className:"w-full px-3 py-2 border border-emerald-500/20 rounded-lg font-mono text-sm text-right bg-emerald-50/10 dark:bg-emerald-900/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-red-700 uppercase tracking-widest mb-2",children:"当期中の減"}),e.jsx(i,{value:s.capitalDecrease,onChange:o=>x("capitalDecrease",o),className:"w-full px-3 py-2 border border-red-500/20 rounded-lg font-mono text-sm text-right bg-red-50/10 dark:bg-red-900/20"})]})]})]}),e.jsxs("div",{className:"bg-primary/5 rounded-2xl p-6 flex flex-col justify-center items-center md:items-end border border-primary/10",children:[e.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest mb-2 italic",children:"Closing Capital Balance"}),e.jsxs("div",{className:"text-4xl font-mono font-black text-primary",children:["¥",s.capitalEnd.toLocaleString()]}),e.jsx("div",{className:"mt-2 text-[10px] text-text-muted text-right",children:"翌期首現在資本金等の額 (別表一「資本金等の額」と一致)"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-5 bg-amber-50/30 dark:bg-amber-900/20 rounded-2xl border border-amber-500/10",children:[e.jsx(z,{className:"w-6 h-6 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-amber-900/80 leading-relaxed",children:[e.jsx("p",{className:"font-extrabold text-amber-900 mb-1 tracking-tight uppercase",children:"法務・税務担当者へのアドバイス"}),e.jsxs("p",{children:["別表五(一)は税務上の貸借対照表と呼ばれ、会計上の内部留保と税務上の内部留保の差異を管理する非常に重要な書類です。",e.jsx("br",{}),"特に",e.jsx("span",{className:"font-bold underline",children:"「未納法人税」"}),"などの項目は、別表四の申告調整（法人税等不算入）と密接に関連します。",e.jsx("br",{}),"「差引翌期首現在利益積立金額」が翌期の「期首現在利益積立金額」と完全に一致することを確認してください。"]})]})]})]})},j=[];for(let t=0;t<256;++t)j.push((t+256).toString(16).slice(1));function ze(t,c=0){return(j[t[c+0]]+j[t[c+1]]+j[t[c+2]]+j[t[c+3]]+"-"+j[t[c+4]]+j[t[c+5]]+"-"+j[t[c+6]]+j[t[c+7]]+"-"+j[t[c+8]]+j[t[c+9]]+"-"+j[t[c+10]]+j[t[c+11]]+j[t[c+12]]+j[t[c+13]]+j[t[c+14]]+j[t[c+15]]).toLowerCase()}let U;const Ve=new Uint8Array(16);function Ye(){if(!U){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");U=crypto.getRandomValues.bind(crypto)}return U(Ve)}const Xe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J={randomUUID:Xe};function qe(t,c,s){var x;t=t||{};const m=t.random??((x=t.rng)==null?void 0:x.call(t))??Ye();if(m.length<16)throw new Error("Random bytes length must be >= 16");return m[6]=m[6]&15|64,m[8]=m[8]&63|128,ze(m)}function V(t,c,s){return J.randomUUID&&!t?J.randomUUID():qe(t)}const Ge=({data:t,onChange:c})=>{const{beppyo5_2:s}=t,m=()=>{const n={id:V(),taxType:"corporate",description:"",paymentDate:"",amount:0,category:"interim"};c({beppyo5_2:{...s,items:[...s.items,n]}})},x=n=>{c({beppyo5_2:{...s,items:s.items.filter(r=>r.id!==n)}})},o=(n,r,a)=>{c({beppyo5_2:{...s,items:s.items.map(u=>u.id===n?{...u,[r]:a}:u)}})},l=(n,r)=>{c({beppyo5_2:{...s,taxesPayable:{...s.taxesPayable,[n]:r}}})},d=s.items.reduce((n,r)=>n+(Number(r.amount)||0),0);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-md font-bold text-text-main border-l-4 border-secondary pl-3",children:"I. 租税公課の納付状況"}),e.jsxs("button",{onClick:m,className:"btn-outline btn-sm",children:[e.jsx(P,{size:16}),"納付記録を追加"]})]}),e.jsxs("div",{className:"md:hidden space-y-4 mb-4",children:[s.items.map(n=>e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border relative space-y-4",children:[e.jsx("button",{onClick:()=>x(n.id),className:"absolute top-4 right-4 text-text-muted hover:text-error p-1",children:e.jsx(C,{size:16})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"税目"}),e.jsxs("select",{value:n.taxType,onChange:r=>o(n.id,"taxType",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface",children:[e.jsx("option",{value:"corporate",children:"法人税"}),e.jsx("option",{value:"inhabitant",children:"道府県民税・市町村民税"}),e.jsx("option",{value:"enterprise",children:"事業税"}),e.jsx("option",{value:"local_corporate",children:"地方法人税"}),e.jsx("option",{value:"other",children:"その他"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"区分"}),e.jsxs("select",{value:n.category,onChange:r=>o(n.id,"category",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface",children:[e.jsx("option",{value:"interim",children:"中間納付"}),e.jsx("option",{value:"final",children:"確定納付"}),e.jsx("option",{value:"withholding",children:"源泉徴収"}),e.jsx("option",{value:"other",children:"その他"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"摘要 (納付先等)"}),e.jsx("input",{type:"text",value:n.description,onChange:r=>o(n.id,"description",r.target.value),placeholder:"例: ○○税務署",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"納付日"}),e.jsx("input",{type:"date",value:n.paymentDate,onChange:r=>o(n.id,"paymentDate",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"金額"}),e.jsx(i,{value:n.amount,onChange:r=>o(n.id,"amount",r),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono"})]})]})]},n.id)),s.items.length===0&&e.jsx("div",{className:"p-8 text-center text-text-muted bg-surface rounded-xl border border-border",children:"納付記録がありません。「納付記録を追加」ボタンから追加してください。"})]}),e.jsx("div",{className:"hidden md:block bg-surface rounded-xl border border-border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-surface-highlight text-text-muted font-medium border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"税目"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"区分"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap min-w-[120px]",children:"摘要 (納付先等)"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"納付日"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"金額"}),e.jsx("th",{className:"px-4 py-3 w-10"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:s.items.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-text-muted",children:"納付記録がありません。「納付記録を追加」ボタンから追加してください。"})}):s.items.map(n=>e.jsxs("tr",{className:"hover:bg-surface-highlight/50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("select",{value:n.taxType,onChange:r=>o(n.id,"taxType",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface",children:[e.jsx("option",{value:"corporate",children:"法人税"}),e.jsx("option",{value:"inhabitant",children:"道府県民税・市町村民税"}),e.jsx("option",{value:"enterprise",children:"事業税"}),e.jsx("option",{value:"local_corporate",children:"地方法人税"}),e.jsx("option",{value:"other",children:"その他"})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("select",{value:n.category,onChange:r=>o(n.id,"category",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface",children:[e.jsx("option",{value:"interim",children:"中間納付"}),e.jsx("option",{value:"final",children:"確定納付"}),e.jsx("option",{value:"withholding",children:"源泉徴収"}),e.jsx("option",{value:"other",children:"その他"})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:n.description,onChange:r=>o(n.id,"description",r.target.value),placeholder:"例: ○○税務署",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"date",value:n.paymentDate,onChange:r=>o(n.id,"paymentDate",r.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:n.amount,onChange:r=>o(n.id,"amount",r),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono"})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>x(n.id),className:"p-2 text-text-muted hover:text-error hover:bg-error/10 rounded-full transition-colors",children:e.jsx(C,{size:16})})})]},n.id))}),e.jsx("tfoot",{className:"bg-surface-highlight font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"px-4 py-3 text-right",children:"合計"}),e.jsxs("td",{className:"px-4 py-3 text-right font-mono text-primary",children:["¥",d.toLocaleString()]}),e.jsx("td",{})]})})]})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-bold text-text-main border-l-4 border-tertiary pl-3 mb-4",children:"II. 期末現在未納付の租税公課 (未払法人税等)"}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-4",children:[e.jsxs("p",{className:"text-sm text-text-muted mb-4",children:["当期の確定申告で納付すべき税額（未払計上額）を入力します。",e.jsx("br",{}),"※ 通常、別表一・別表四の計算結果と一致させます。"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"法人税"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx(i,{value:s.taxesPayable.corporate,onChange:n=>l("corporate",n),className:"w-full pl-8 pr-4 py-2 border border-border rounded-lg text-right font-mono bg-surface"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"地方法人税"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx(i,{value:s.taxesPayable.localCorporate,onChange:n=>l("localCorporate",n),className:"w-full pl-8 pr-4 py-2 border border-border rounded-lg text-right font-mono bg-surface"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"道府県民税・市町村民税"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx(i,{value:s.taxesPayable.inhabitant,onChange:n=>l("inhabitant",n),className:"w-full pl-8 pr-4 py-2 border border-border rounded-lg text-right font-mono bg-surface"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"事業税"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"¥"}),e.jsx(i,{value:s.taxesPayable.enterprise,onChange:n=>l("enterprise",n),className:"w-full pl-8 pr-4 py-2 border border-border rounded-lg text-right font-mono bg-surface"})]})]})]})]})]})]})},He=({data:t,onChange:c})=>{const{beppyo15:s}=t;y.useEffect(()=>{const o=Math.floor((s.foodAndDrinkExpenses||0)*.5),l=Math.max(8e6,o),d=Math.max(0,(s.totalEntertainmentExpenses||0)-l);(l!==s.deductionLimit||d!==s.excessAmount)&&c({beppyo15:{...s,deductionLimit:l,excessAmount:d}})},[s.totalEntertainmentExpenses,s.foodAndDrinkExpenses,s.deductionLimit,s.excessAmount]);const m=(x,o)=>{const l={[x]:o};x==="totalEntertainmentExpenses"?l.otherEntertainmentExpenses=o-s.foodAndDrinkExpenses:x==="foodAndDrinkExpenses"&&(l.otherEntertainmentExpenses=s.totalEntertainmentExpenses-o),c({beppyo15:{...s,...l}})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-border flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"適用判定用 資本金の額:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{value:s.capitalAmount,onChange:x=>m("capitalAmount",x),className:"bg-transparent text-right font-mono font-bold text-text-main border-b border-border focus:border-primary outline-none px-2 py-0.5"}),e.jsx("span",{className:"text-xs text-text-muted",children:"円"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-bold text-text-main border-l-4 border-secondary pl-3 mb-6",children:"交際費の支出内訳 (別表15)"}),e.jsx("div",{className:"bg-surface rounded-xl border border-border overflow-hidden shadow-sm",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-main mb-2",children:"交際費等の支出額 (総額)"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:s.totalEntertainmentExpenses,onChange:x=>m("totalEntertainmentExpenses",x),className:"w-full pr-12 pl-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary text-right font-mono text-xl bg-surface-highlight/30 dark:bg-slate-800"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-muted font-bold pointer-events-none",children:"円"})]}),e.jsx("p",{className:"text-[10px] text-text-muted mt-2",children:"※ 損益計算書に計上した交際費・接待費などの全額"})]})}),e.jsxs("div",{className:"space-y-4 p-4 bg-emerald-50/20 dark:bg-emerald-900/20 rounded-xl border border-emerald-500/10",children:[e.jsx("label",{className:"block text-[11px] font-black text-emerald-700 uppercase tracking-widest mb-3",children:"支出内訳の入力"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-emerald-800",children:"接待飲食費 (50%特例対象)"}),e.jsx("span",{className:"text-[10px] text-emerald-600 bg-emerald-100 px-1.5 py-0.5 rounded",children:"特例A"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:s.foodAndDrinkExpenses,onChange:x=>m("foodAndDrinkExpenses",x),className:"w-full pr-10 pl-3 py-2 border border-emerald-500/20 rounded-lg text-right font-mono text-base"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-emerald-400 font-bold",children:"円"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsx("span",{className:"text-xs font-bold text-text-muted",children:"その他の交際費 (贈答・ゴルフ等)"})}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:s.otherEntertainmentExpenses,onChange:x=>m("otherEntertainmentExpenses",x),className:"w-full pr-10 pl-3 py-2 border border-border rounded-lg text-right font-mono text-base bg-white dark:bg-slate-800/50"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-text-muted font-bold",children:"円"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 text-text-main dark:text-white p-6 rounded-2xl relative overflow-hidden border border-border shadow-md dark:shadow-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 dark:bg-primary/20 blur-3xl -mr-16 -mt-16"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-bold text-text-muted dark:text-slate-400 uppercase tracking-widest block mb-2",children:"損金算入限度額の判定"}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-2xl font-mono font-bold text-primary",children:["¥",s.deductionLimit.toLocaleString()]}),e.jsx("p",{className:"text-[10px] text-text-muted dark:text-slate-500 italic",children:"※ 年800万円 vs 飲食費×50% の大きい方を適用"})]})]})}),e.jsxs("div",{className:"flex flex-col items-center md:items-end justify-center",children:[e.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest mb-1",children:"損金不算入額 (別表四 加算分)"}),e.jsxs("div",{className:"text-4xl font-mono font-black text-text-main dark:text-white",children:["¥",s.excessAmount.toLocaleString()]}),s.excessAmount>0?e.jsxs("div",{className:"mt-2 text-[10px] text-red-300 flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),"限度額を超えた交際費は経費として認められません"]}):e.jsx("div",{className:"mt-2 text-[10px] text-emerald-400",children:"全額を損金（経費）として処理可能です"})]})]})]})]})})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50/30 dark:bg-blue-900/20 rounded-xl border border-blue-500/10",children:[e.jsx(z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-blue-700/80 leading-relaxed",children:[e.jsx("p",{className:"font-extrabold text-blue-900 mb-1 tracking-tight",children:"申告実務のヒント"}),e.jsxs("p",{children:["資本金1億円以下の中小法人は、以下のいずれか有利な方を選択できます：",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"A. 800万円定額控除制度:"})," 年間800万円までの交際費を全額損金算入",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"B. 接待飲食費50%損金算入制度:"})," 飲食費の50%相当額を損金算入",e.jsx("br",{}),"このツールでは、自動的に有利な方（算入額が大きい方）を選択して計算します。"]})]})]})]})},We=({data:t,onChange:c})=>{const{beppyo16:s}=t,m=()=>{const r={id:V(),name:"",acquisitionDate:"",acquisitionCost:0,usefulLife:0,depreciationMethod:"straightLine",currentDepreciation:0,allowableLimit:0,bookValueEnd:0};c({beppyo16:{...s,assets:[...s.assets,r]}})},x=r=>{c({beppyo16:{...s,assets:s.assets.filter(a=>a.id!==r)}})},o=(r,a,u)=>{c({beppyo16:{...s,assets:s.assets.map(b=>b.id===r?{...b,[a]:u}:b)}})},l=s.assets.reduce((r,a)=>r+(Number(a.currentDepreciation)||0),0),d=s.assets.reduce((r,a)=>r+(Number(a.allowableLimit)||0),0),n=Math.max(0,l-d);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-md font-bold text-text-main border-l-4 border-secondary pl-3",children:"資産一覧"}),e.jsxs("button",{onClick:m,className:"btn-outline btn-sm",children:[e.jsx(P,{size:16}),"資産を追加"]})]}),e.jsxs("div",{className:"md:hidden space-y-4 mb-4",children:[s.assets.map(r=>e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border relative space-y-4",children:[e.jsx("button",{onClick:()=>x(r.id),className:"absolute top-4 right-4 text-text-muted hover:text-error p-1",children:e.jsx(C,{size:16})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"資産名称"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>o(r.id,"name",a.target.value),placeholder:"例: パソコン",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"取得日"}),e.jsx("input",{type:"date",value:r.acquisitionDate,onChange:a=>o(r.id,"acquisitionDate",a.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"取得価額"}),e.jsx(i,{value:r.acquisitionCost,onChange:a=>o(r.id,"acquisitionCost",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"償却限度額"}),e.jsx(i,{value:r.allowableLimit,onChange:a=>o(r.id,"allowableLimit",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"当期償却額"}),e.jsx(i,{value:r.currentDepreciation,onChange:a=>o(r.id,"currentDepreciation",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"期末帳簿価額"}),e.jsx(i,{value:r.bookValueEnd,onChange:a=>o(r.id,"bookValueEnd",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface-highlight"})]})]},r.id)),s.assets.length===0&&e.jsx("div",{className:"p-8 text-center text-text-muted bg-surface rounded-xl border border-border",children:"資産が登録されていません。「資産を追加」ボタンから追加してください。"})]}),e.jsx("div",{className:"hidden md:block bg-surface rounded-xl border border-border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-surface-highlight dark:bg-slate-800 text-text-muted font-medium border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 whitespace-nowrap min-w-[150px]",children:"資産名称"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"取得日"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"取得価額"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"償却限度額"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"当期償却額"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"期末帳簿価額"}),e.jsx("th",{className:"px-4 py-3 w-10"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:s.assets.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-text-muted",children:"資産が登録されていません。「資産を追加」ボタンから追加してください。"})}):s.assets.map(r=>e.jsxs("tr",{className:"hover:bg-surface-highlight/50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:r.name,onChange:a=>o(r.id,"name",a.target.value),placeholder:"例: パソコン",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"date",value:r.acquisitionDate,onChange:a=>o(r.id,"acquisitionDate",a.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:r.acquisitionCost,onChange:a=>o(r.id,"acquisitionCost",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:r.allowableLimit,onChange:a=>o(r.id,"allowableLimit",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:r.currentDepreciation,onChange:a=>o(r.id,"currentDepreciation",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:r.bookValueEnd,onChange:a=>o(r.id,"bookValueEnd",a),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono bg-surface"})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>x(r.id),className:"p-2 text-text-muted hover:text-error hover:bg-error/10 rounded-full transition-colors",children:e.jsx(C,{size:16})})})]},r.id))}),e.jsx("tfoot",{className:"bg-surface-highlight dark:bg-slate-800 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-3 text-right",children:"合計"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:d.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-primary",children:l.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:s.assets.reduce((r,a)=>r+(Number(a.bookValueEnd)||0),0).toLocaleString()}),e.jsx("td",{})]})})]})})})]}),"      ",n>0&&e.jsxs("div",{className:"mt-4 p-4 bg-error/10 border border-error/20 rounded-lg text-error-dark flex items-center gap-2",children:[e.jsx(Z,{size:20}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"償却超過額が発生しています: "}),e.jsxs("span",{className:"font-mono text-lg",children:[n.toLocaleString(),"円"]}),e.jsx("p",{className:"text-sm mt-1",children:"この金額は別表四で加算（損金不算入）する必要があります。"})]})]})]})},Je=({data:t,onChange:c})=>{const{beppyo2:s}=t;y.useEffect(()=>{if(!s.shareholders.length||s.totalShares===0)return;const a=[...s.shareholders].sort((u,b)=>b.shares-u.shares).slice(0,3).reduce((u,b)=>u+b.shares,0)/s.totalShares>.5;a!==s.isFamilyCompany&&l("isFamilyCompany",a)},[JSON.stringify(s.shareholders),s.totalShares]);const m=()=>{const d={id:V(),name:"",address:"",shares:0,relationship:""};c({beppyo2:{...s,shareholders:[...s.shareholders,d]}})},x=d=>{c({beppyo2:{...s,shareholders:s.shareholders.filter(n=>n.id!==d)}})},o=(d,n,r)=>{c({beppyo2:{...s,shareholders:s.shareholders.map(a=>a.id===d?{...a,[n]:r}:a)}})},l=(d,n)=>{c({beppyo2:{...s,[d]:n}})};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-surface rounded-xl border border-border p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"発行済株式総数"}),e.jsx(i,{value:s.totalShares,onChange:d=>l("totalShares",d),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"判定結果"}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-bold text-center border ${s.isFamilyCompany?"bg-primary/10 text-primary border-primary/20":"bg-surface-highlight text-text-muted border-border"} `,children:s.isFamilyCompany?"同族会社":"非同族会社"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-md font-bold text-text-main border-l-4 border-secondary pl-3",children:"株主等の状況"}),e.jsxs("button",{onClick:m,className:"btn-outline btn-sm",children:[e.jsx(P,{size:16}),"株主を追加"]})]}),e.jsxs("div",{className:"md:hidden space-y-4 mb-4",children:[s.shareholders.map(d=>e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-border relative space-y-4",children:[e.jsx("button",{onClick:()=>x(d.id),className:"absolute top-4 right-4 text-text-muted hover:text-error p-1",children:e.jsx(C,{size:16})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"株主名"}),e.jsx("input",{type:"text",value:d.name,onChange:n=>o(d.id,"name",n.target.value),placeholder:"氏名・会社名",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"住所"}),e.jsx("input",{type:"text",value:d.address,onChange:n=>o(d.id,"address",n.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"持株数"}),e.jsx(i,{value:d.shares,onChange:n=>o(d.id,"shares",n),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono"})]}),e.jsxs("div",{className:"text-right flex flex-col justify-end pb-2",children:[e.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"割合"}),e.jsx("div",{className:"font-mono",children:s.totalShares>0?`${(d.shares/s.totalShares*100).toFixed(1)}%`:"-"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-muted block mb-1",children:"代表者との関係"}),e.jsx("input",{type:"text",value:d.relationship,onChange:n=>o(d.id,"relationship",n.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})]})]},d.id)),s.shareholders.length===0&&e.jsx("div",{className:"p-8 text-center text-text-muted bg-surface rounded-xl border border-border",children:"株主が登録されていません。「株主を追加」ボタンから追加してください。"})]}),e.jsx("div",{className:"hidden md:block bg-surface rounded-xl border border-border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-surface-highlight text-text-muted font-medium border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 whitespace-nowrap min-w-[150px]",children:"株主名"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap min-w-[200px]",children:"住所"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"持株数"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap text-right",children:"割合"}),e.jsx("th",{className:"px-4 py-3 whitespace-nowrap",children:"代表者との関係"}),e.jsx("th",{className:"px-4 py-3 w-10"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:s.shareholders.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-text-muted",children:"株主が登録されていません。「株主を追加」ボタンから追加してください。"})}):s.shareholders.map(d=>e.jsxs("tr",{className:"hover:bg-surface-highlight/50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:d.name,onChange:n=>o(d.id,"name",n.target.value),placeholder:"氏名・会社名",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:d.address,onChange:n=>o(d.id,"address",n.target.value),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(i,{value:d.shares,onChange:n=>o(d.id,"shares",n),className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent text-right font-mono"})}),e.jsxs("td",{className:"px-4 py-2 text-right text-text-muted font-mono",children:[s.totalShares>0?(d.shares/s.totalShares*100).toFixed(1):0,"%"]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:d.relationship,onChange:n=>o(d.id,"relationship",n.target.value),placeholder:"本人、妻、父など",className:"w-full p-2 border border-border rounded focus:ring-2 focus:ring-primary focus:border-transparent bg-surface"})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>x(d.id),className:"p-2 text-text-muted hover:text-error hover:bg-error/10 rounded-full transition-colors",children:e.jsx(C,{size:16})})})]},d.id))})]})})})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-surface-highlight rounded-lg border border-border",children:[e.jsx(z,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-text-muted",children:[e.jsx("p",{className:"font-bold text-text-main mb-1",children:"同族会社の判定について"}),e.jsxs("p",{children:["・上位3グループ（親族等を含む）の持株割合の合計が50%超となる場合、「同族会社」となります。",e.jsx("br",{}),"・日本の多くの中小企業は同族会社に該当します。"]})]})]})]})},Qe=({data:t,onChange:c,currentBusinessType:s})=>{const m=(l,d)=>{c({businessOverview:{...t.businessOverview,[l]:d}})},x=(l,d)=>{c({companyInfo:{...t.companyInfo,[l]:d}})},o=()=>{if(!s){N.error("事業所データが見つかりません");return}window.confirm(`現在の事業所設定から基本情報を転記しますか？
（入力済みの内容は上書きされます）`)&&(c({companyInfo:{...t.companyInfo,corporateName:s.company_name||"",corporateNumber:s.tax_number||"",address:s.address||"",phoneNumber:s.phone||"",representativeName:s.representative_name||""}}),N.success("基本情報を転記しました"))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-text-main flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-primary rounded-full"}),"基本情報"]}),e.jsxs("button",{onClick:o,disabled:!s,className:"text-xs px-3 py-1.5 bg-surface border border-border rounded-lg hover:bg-surface-highlight text-primary flex items-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(O,{className:"w-3.5 h-3.5"}),"登録情報を転記"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-surface p-6 rounded-xl border border-border shadow-sm",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-text-muted mb-1.5 flex items-center gap-1.5",children:[e.jsx(oe,{className:"w-3.5 h-3.5"}),"法人名"]}),e.jsx("input",{type:"text",value:t.companyInfo.corporateName||"",onChange:l=>x("corporateName",l.target.value),className:"input-base w-full",placeholder:"例: 株式会社アイナンス"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-text-muted mb-1.5 flex items-center gap-1.5",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),"法人番号 (13桁)"]}),e.jsx("input",{type:"text",value:t.companyInfo.corporateNumber||"",onChange:l=>x("corporateNumber",l.target.value),className:"input-base w-full font-mono",placeholder:"例: 1234567890123"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-text-muted mb-1.5 flex items-center gap-1.5",children:[e.jsx(Ne,{className:"w-3.5 h-3.5"}),"納税地 (住所)"]}),e.jsx("input",{type:"text",value:t.companyInfo.address||"",onChange:l=>x("address",l.target.value),className:"input-base w-full",placeholder:"例: 東京都千代田区..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-muted mb-1.5",children:"税務署名"}),e.jsx("input",{type:"text",value:t.companyInfo.taxOffice||"",onChange:l=>x("taxOffice",l.target.value),className:"input-base w-full",placeholder:"例: 神田"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-text-muted mb-1.5 flex items-center gap-1.5",children:[e.jsx(de,{className:"w-3.5 h-3.5"}),"代表者氏名"]}),e.jsx("input",{type:"text",value:t.companyInfo.representativeName||"",onChange:l=>x("representativeName",l.target.value),className:"input-base w-full",placeholder:"例: 代表 太郎"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-text-muted mb-1.5 flex items-center gap-1.5",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),"電話番号"]}),e.jsx("input",{type:"text",value:t.companyInfo.phoneNumber||"",onChange:l=>x("phoneNumber",l.target.value),className:"input-base w-full",placeholder:"例: 03-1234-5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-muted mb-1.5",children:"資本金の額"}),e.jsx(i,{value:t.companyInfo.capitalAmount||0,onChange:l=>x("capitalAmount",l),className:"input-base w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-muted mb-1.5",children:"事業種目"}),e.jsx("input",{type:"text",value:t.companyInfo.businessType||"",onChange:l=>x("businessType",l.target.value),className:"input-base w-full",placeholder:"例: 情報通信業"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-muted mb-1.5",children:"事業年度 (自)"}),e.jsx("input",{type:"date",value:t.companyInfo.fiscalYearStart||"",onChange:l=>x("fiscalYearStart",l.target.value),className:"input-base w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-muted mb-1.5",children:"事業年度 (至)"}),e.jsx("input",{type:"date",value:t.companyInfo.fiscalYearEnd||"",onChange:l=>x("fiscalYearEnd",l.target.value),className:"input-base w-full"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:gap-x-8 md:gap-y-4",children:[e.jsxs("div",{className:"col-span-2 border-b border-border pb-2 mb-2 font-medium text-primary flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-4 bg-primary rounded-full"}),"損益計算書項目"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"売上高"}),e.jsx(i,{value:t.businessOverview.sales,onChange:l=>m("sales",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"売上原価"}),e.jsx(i,{value:t.businessOverview.costOfSales,onChange:l=>m("costOfSales",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"売上総利益"}),e.jsx(i,{value:t.businessOverview.grossProfit,onChange:l=>m("grossProfit",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"販売費及び一般管理費"}),e.jsx(i,{value:t.businessOverview.operatingExpenses,onChange:l=>m("operatingExpenses",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"営業利益"}),e.jsx(i,{value:t.businessOverview.operatingIncome,onChange:l=>m("operatingIncome",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"経常利益"}),e.jsx(i,{value:t.businessOverview.ordinaryIncome,onChange:l=>m("ordinaryIncome",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"当期純利益"}),e.jsx(i,{value:t.businessOverview.netIncome,onChange:l=>m("netIncome",l)})]}),e.jsx("div",{className:"col-span-2 border-b border-border pb-2 mb-2 mt-4 font-medium text-primary",children:"主要科目の内訳"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"役員給与"}),e.jsx(i,{value:t.businessOverview.directorsCompensation,onChange:l=>m("directorsCompensation",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"従業員給料"}),e.jsx(i,{value:t.businessOverview.employeesSalary,onChange:l=>m("employeesSalary",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"地代家賃"}),e.jsx(i,{value:t.businessOverview.rent,onChange:l=>m("rent",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"租税公課"}),e.jsx(i,{value:t.businessOverview.taxesAndDues,onChange:l=>m("taxesAndDues",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"交際費"}),e.jsx(i,{value:t.businessOverview.entertainmentExpenses,onChange:l=>m("entertainmentExpenses",l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-1",children:"減価償却費"}),e.jsx(i,{value:t.businessOverview.depreciation,onChange:l=>m("depreciation",l)})]})]})]})},vs=()=>{const[t,c]=y.useState(q),[s,m]=y.useState("overview"),[x,o]=y.useState(!1),[l,d]=y.useState("idle"),[n,r]=y.useState(!1),[a,u]=y.useState(!1),[b,h]=y.useState(null),{user:I}=ie(),{currentBusinessType:S}=ce(),{transactions:A}=xe(I==null?void 0:I.id,S==null?void 0:S.business_type);y.useEffect(()=>{const p=_.getData();c(p)},[]);const k=p=>{c(g=>({...g,...p})),o(!0),d("idle")},K=()=>{var w,v,F,E;if(!A||A.length===0){N.error("取り込む取引データがありません");return}const g=new Date().getFullYear()-1,f=A.filter(D=>new Date(D.date).getFullYear()===g);if(f.length===0){N.error(`${g}年度の取引データが見つかりませんでした`);return}if(window.confirm(`${g}年度の取引（${f.length}件）を解析し、申告書に転記しますか？
（現在入力されている調整項目は上書きされる場合があります）`))try{const D=_.calculateDataFromTransactions(A);c(ne=>({...ne,...D})),o(!0);const ae=((v=(w=D.beppyo4)==null?void 0:w.otherAdditions)==null?void 0:v.length)||0,le=((E=(F=D.beppyo16)==null?void 0:F.assets)==null?void 0:E.length)||0;N.success(e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"データの転記が完了しました"}),e.jsxs("p",{className:"text-xs mt-1",children:["・別表四: ",ae,"項目の調整を抽出",e.jsx("br",{}),"・別表十六: ",le,"件の資産を特定"]})]}),{duration:4e3})}catch(D){console.error("Import failed",D),N.error("転記に失敗しました")}},ee=()=>{d("saving"),setTimeout(()=>{_.saveData(t),o(!1),d("saved"),setTimeout(()=>d("idle"),2e3)},500)},Y=async()=>{r(!0);try{const p=await H(t),g=new Blob([p],{type:"application/pdf"}),f=document.createElement("a");f.href=window.URL.createObjectURL(g),f.download=`法人税申告書_${new Date().toISOString().split("T")[0]}.pdf`,f.click(),N.success("PDFを出力しました")}catch(p){console.error("PDF generation failed",p),N.error("PDFの作成に失敗しました")}finally{r(!1)}},se=async()=>{r(!0);try{const{pdfBytes:p,successes:g,errors:f}=await ue(t),w=new Blob([p],{type:"application/pdf"}),v=document.createElement("a");v.href=window.URL.createObjectURL(w),v.download=`公式法人税申告書_一括_${new Date().toISOString().split("T")[0]}.pdf`,v.click(),N.success(e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"公式様式PDFを出力しました"}),e.jsxs("p",{className:"text-xs mt-1",children:["成功: ",g.join(", ")]}),f.length>0&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["失敗: ",f.join(", ")]})]}))}catch(p){console.error("Official PDF filling failed",p),N.error(p.message||"公式様式の作成に失敗しました")}finally{r(!1)}},X=async(p,g)=>{console.log("Generating PDF for",p,"with data:",t),r(!0);try{const f=await ge(t,p),w=new Blob([f],{type:"application/pdf"}),v=document.createElement("a");v.href=window.URL.createObjectURL(w),v.download=`${g}_${new Date().toISOString().split("T")[0]}.pdf`,v.click(),N.success(`${g}を出力しました`)}catch(f){console.error(`Single PDF filling failed for ${p}`,f),N.error(`${g}の作成に失敗しました: ${f.message}`)}finally{r(!1)}},te=async()=>{r(!0);try{const p=await H(t),g=new Blob([p],{type:"application/pdf"}),f=window.URL.createObjectURL(g);h(f),u(!0)}catch(p){console.error("PDF preview failed",p),N.error("プレビューの作成に失敗しました")}finally{r(!1)}},B=()=>{u(!1),b&&(window.URL.revokeObjectURL(b),h(null))},re=()=>{try{const p=ye(t),g=`corporate_tax_return_${new Date().getFullYear()}.xtx`;we(p,g),N.success(e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"e-Tax用ファイルを書き出しました"}),e.jsx("p",{className:"text-xs mt-1",children:"国税庁のe-Taxソフト等でインポートできます。"})]}))}catch(p){console.error("XTX export failed",p),N.error("書き出しに失敗しました")}},T={overview:{label:"事業概況",icon:W,title:"事業概況",description:"法人の基本的情報および事業の概要を入力します。"},beppyo16:{label:"別表十六（減価償却）",icon:Z,title:"別表十六（減価償却資産の償却額の計算に関する明細書）",description:"固定資産の減価償却費の計算および償却限度額との調整を行います。"},beppyo15:{label:"別表十五（交際費）",icon:Le,title:"別表十五（交際費等の損金算入に関する明細書）",description:"交際費等の支出額および損金不算入額を計算します。"},beppyo2:{label:"別表二（同族判定）",icon:me,title:"別表二（同族会社等の判定に関する明細書）",description:"株主構成に基づき、同族会社の判定および留保金課税の要否を判断します。"},beppyo4:{label:"別表四（所得調整）",icon:M,title:"別表四（所得の金額の計算に関する明細書）",description:"会計上の利益から税務上の所得を計算するための調整を行います。"},beppyo5_2:{label:"別表五(二)（租税公課）",icon:Q,title:"別表五(二)（租税公課の納付状況等に関する明細書）",description:"法人税、住民税、事業税などの納付状況および納税充当金の計算を行います。"},beppyo5:{label:"別表五(一)（利益積立金）",icon:ke,title:"別表五(一)（利益積立金額及び資本金等の額の計算に関する明細書）",description:"税務上の純資産（利益積立金、資本金等）の増減を管理します。"},beppyo1:{label:"別表一（申告書）",icon:L,title:"別表一（各事業年度の所得に係る申告書）",description:"計算された所得金額に基づき、法人税額を計算・申告します。"}};return e.jsx("div",{className:"bg-background min-h-screen",children:e.jsxs("div",{className:"max-w-[1280px] mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-text-main whitespace-nowrap",children:"法人税申告書エディタ"}),e.jsx("p",{className:"text-xs sm:text-base text-text-muted mt-1",children:"法人税申告書類の各項目を詳細に入力・編集します"})]}),e.jsx("div",{className:"mb-6 overflow-x-auto pb-2 scrollbar-hide",children:e.jsx("nav",{className:"inline-flex bg-white dark:bg-[#1e293b]/80 backdrop-blur-md p-1 rounded-full border border-transparent dark:border-white/10 shadow-sm dark:shadow-none min-w-max items-stretch",children:Object.entries(T).map(([p,g])=>{const f=g.icon,w=s===p,v=g.label.match(/^(.+?)([（(].+[）)])$/),F=v?v[1]:g.label,E=v?v[2].replace(/[（()）]/g,""):null;return e.jsxs("button",{onClick:()=>m(p),className:`
                                        relative flex flex-col items-center justify-center px-4 py-2 rounded-full transition-colors duration-200 min-h-[56px] min-w-[100px] overflow-hidden
                                        ${w?"text-primary bg-white dark:bg-transparent":"text-slate-500 bg-white hover:text-slate-700 hover:bg-slate-50 dark:text-slate-400 dark:bg-transparent dark:hover:text-slate-200 dark:hover:bg-white/5"}
                                    `,children:[w&&e.jsx(Ce.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-3 right-3 h-[4px] bg-primary rounded-sm shadow-[0_-2px_8px_rgba(var(--color-primary),0.5)]",transition:{type:"spring",bounce:.25,duration:.5}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center leading-tight",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx(f,{className:`w-3.5 h-3.5 ${w?"text-primary":"text-slate-500 dark:text-slate-400"}`}),e.jsx("span",{className:"text-sm font-bold tracking-tight whitespace-nowrap",children:F})]}),E&&e.jsx("span",{className:`text-[10px] font-medium tracking-wide ${w?"text-primary/80":"text-slate-500 dark:text-slate-400"}`,children:E})]})]},p)})})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-1 p-3 lg:p-8 min-w-0",children:[e.jsxs("div",{className:"mb-8 pb-6 border-b border-border",children:[e.jsxs("h2",{className:"text-xl font-bold text-text-main flex items-center gap-2",children:[pe.createElement(T[s].icon,{className:"w-6 h-6 text-primary"}),T[s].title]}),e.jsx("p",{className:"text-sm text-text-muted mt-2 leading-relaxed",children:T[s].description})]}),s==="overview"&&e.jsx(Qe,{data:t,onChange:k,currentBusinessType:S}),s==="beppyo4"&&e.jsx(Me,{data:t,onChange:k}),s==="beppyo5"&&e.jsx($e,{data:t,onChange:k}),s==="beppyo5_2"&&e.jsx(Ge,{data:t,onChange:k}),s==="beppyo1"&&e.jsx(Ue,{data:t,onChange:k}),s==="beppyo2"&&e.jsx(Je,{data:t,onChange:k}),s==="beppyo15"&&e.jsx(He,{data:t,onChange:k}),s==="beppyo16"&&e.jsx(We,{data:t,onChange:k})]}),e.jsx("div",{className:"w-full lg:w-72 border-t lg:border-t-0 lg:border-l border-border bg-surface-highlight/5",children:e.jsxs("div",{className:"p-6 sticky top-0",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wider mb-4",children:"アクション"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:K,className:"w-full py-2.5 px-4 bg-transparent border-2 border-primary text-primary rounded-lg font-bold hover:bg-primary/10 transition-all flex items-center justify-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"取引データ転記"]}),e.jsxs("button",{onClick:te,className:"w-full py-2.5 px-4 bg-surface border border-border text-text-main rounded-lg font-medium hover:bg-surface-highlight transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"プレビュー"]}),e.jsxs("button",{onClick:ee,disabled:l==="saving",className:`w-full py-2.5 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${x?"btn-primary shadow-lg shadow-primary/25":"bg-surface border border-border text-text-muted hover:bg-surface-highlight"}`,children:[l==="saving"?e.jsx(O,{className:"w-4 h-4 animate-spin"}):e.jsx(Se,{className:"w-4 h-4"}),l==="saved"?"保存しました":"保存"]}),e.jsx("div",{className:"border-t border-border my-2"}),e.jsxs("button",{onClick:Y,disabled:n,className:"w-full py-2.5 px-4 bg-surface border border-border text-text-main rounded-lg font-medium hover:bg-surface-highlight transition-colors flex items-center justify-center gap-2",children:[n?e.jsx(O,{className:"w-4 h-4 animate-spin"}):e.jsx(L,{className:"w-4 h-4"}),"PDF出力 (下書き用)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:se,disabled:n,className:"w-full h-12 bg-primary text-white font-bold rounded-xl shadow-lg hover:shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:scale-100 flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),n?"生成中...":"公式PDF (一括出力)"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 border border-border rounded-xl overflow-hidden bg-surface mt-4 shadow-inner",children:[e.jsxs("div",{className:"px-3 py-2 bg-surface-highlight text-[10px] font-bold text-text-muted uppercase border-b border-border tracking-wider flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),"公式PDF書類出力"]}),e.jsx("div",{className:"divide-y divide-border",children:[{id:"beppyo1",name:"別表一"},{id:"beppyo4",name:"別表四"},{id:"beppyo5_1",name:"別表五(一)"},{id:"beppyo5_2",name:"別表五(二)"},{id:"beppyo15",name:"別表十五"},{id:"beppyo16",name:"別表十六"}].map(p=>e.jsxs("div",{className:"flex divide-x divide-border",children:[e.jsxs("button",{onClick:()=>X(p.id,p.name),className:"flex-1 py-2 px-3 text-left text-sm text-text-main hover:bg-surface-highlight transition-colors flex items-center justify-between",children:[e.jsx("span",{children:p.name}),e.jsx(De,{className:"w-3 h-3 text-text-muted"})]}),p.id==="beppyo1"&&e.jsx("button",{onClick:()=>X("beppyo1_debug","座標確認用"),title:"位置合わせ用の目盛りを表示します",className:"px-2 bg-surface hover:bg-surface-highlight text-[10px] text-text-muted transition-colors flex items-center justify-center border-l border-border",children:e.jsx(W,{className:"w-3 h-3"})})]},p.id))})]})]}),e.jsxs("button",{onClick:re,className:"w-full py-2.5 px-4 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-primary/20",children:[e.jsx(Ee,{className:"w-4 h-4"}),"e-Tax出力 (提出用)"]}),e.jsxs("button",{onClick:()=>{const p=G.generateFinancialStatementCSV(t);G.downloadCSV(p,"financial_statements_draft.csv"),N.success("財務諸表CSVを出力しました")},className:"w-full py-2.5 px-4 bg-surface border border-border text-text-main rounded-lg font-medium hover:bg-surface-highlight transition-colors flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"財務諸表CSV (提出用)"]}),e.jsx("div",{className:"border-t border-border my-2"}),e.jsxs("button",{onClick:()=>{window.confirm("入力内容をリセットしますか？")&&(_.resetData(),c(q),o(!0))},className:"w-full py-2.5 px-4 bg-transparent text-text-muted rounded-lg font-medium hover:bg-red-50 hover:text-red-500 transition-colors flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"リセット"]}),e.jsxs("a",{href:"/tools/coordinate_picker.html",target:"_blank",rel:"noopener noreferrer",className:"w-full py-2 px-4 bg-surface border border-border text-text-muted rounded-lg font-medium hover:bg-surface-highlight transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(Ae,{className:"w-4 h-4"}),"座標キャリブレーター"]})]})]})})]})}),a&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-surface rounded-xl max-w-4xl w-full h-[90vh] flex flex-col border border-border shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"プレビュー"}),e.jsx("button",{onClick:B,className:"text-text-muted hover:text-text-main p-2 hover:bg-surface-highlight rounded-full transition-colors",children:e.jsx(he,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 bg-surface-highlight p-4",children:e.jsx("iframe",{src:b,className:"w-full h-full rounded-lg shadow-inner border border-border",title:"PDF Preview"})}),e.jsxs("div",{className:"p-4 border-t border-border flex justify-end gap-3 bg-surface rounded-b-xl",children:[e.jsx("button",{onClick:B,className:"px-4 py-2 border border-border text-text-main rounded-lg hover:bg-surface-highlight transition-colors",children:"閉じる"}),e.jsxs("button",{onClick:()=>{Y(),B()},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2 shadow-lg shadow-primary/20",children:[e.jsx(L,{className:"w-4 h-4"}),"PDFを保存"]})]})]})})]})})};export{vs as CorporateTaxInputForm};
