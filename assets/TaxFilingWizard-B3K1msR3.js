const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DswpKyhs.js","assets/index-BFt1vrYl.css"])))=>i.map(i=>d[i]);
import{c as Ye,a as Ue,e as Ve,l as He,r as b,j as e,L as R,F as S,P as G,S as V,n as We,d as _,x as L,C as qe,q as Be,U as oe,_ as $}from"./index-DswpKyhs.js";import{D as Je}from"./DepreciationCalculator-Bf1TEyR5.js";import{P as Ge,y as B,a as ce}from"./PreviousYearImportModal-uGBoXcVP.js";import{g as Ke,c as Ze,f as r,A as me,a as Qe,b as et}from"./TaxFilingService-BbmNWziT.js";import{g as tt,a as st,d as at}from"./eTaxExportService-DEuuuqQn.js";import{e as nt}from"./CorporateTaxService-DGpGOaw1.js";import{d as z,p as X}from"./pdfAutoFillService-WbOZ8sgT.js";import{a as it,b as rt,c as lt,d as ot}from"./pdfJapaneseService-B7WmfWP9.js";import{A as de}from"./arrow-left-gdWbSuNE.js";import{C as xe}from"./calculator-DmERfzVk.js";import{D as P}from"./download-Banlr6I9.js";import{A as ct}from"./arrow-right-CuDj3Lko.js";import{C as D}from"./circle-check-big-Crj7KyMn.js";import{C as k}from"./copy-DJ5pnRzK.js";import{E as J}from"./external-link-CtHKrGC0.js";import{R as Y}from"./refresh-cw-DcsUKi_h.js";import{I as he}from"./info-BEd8R2BW.js";import"./circle-question-mark-BT75h3g3.js";import"./geminiAIService-DQoIspWT.js";import"./loader-circle-BsarH5Un.js";import"./scale-KomrMU3Q.js";import"./save-D1Udpi50.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],dt=Ye("file-code",mt),U=[{id:1,title:"åŸºæœ¬æƒ…å ±",icon:S,description:"ç”³å‘Šã®åŸºæœ¬è¨­å®š"},{id:2,title:"åæ”¯ç¢ºèª",icon:xe,description:"å£²ä¸Šãƒ»çµŒè²»ã®ç¢ºèª"},{id:3,title:"æ¸›ä¾¡å„Ÿå´",icon:xe,description:"å›ºå®šè³‡ç”£ã®å„Ÿå´è¨ˆç®—"},{id:4,title:"æ§é™¤å…¥åŠ›",icon:G,description:"å„ç¨®æ§é™¤ã®å…¥åŠ›"},{id:5,title:"AIè¨ºæ–­",icon:V,description:"AIã«ã‚ˆã‚‹ç¯€ç¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹"},{id:6,title:"ç”³å‘Šæ›¸ä½œæˆ",icon:P,description:"PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"}],xt=({isCorporation:c,basicInfo:a,taxData:N})=>{const I=(a.beginningCapital||0)+(N.netIncome||0),g=a.idNumber&&a.idNumber.length>=12,A=!!a.address;return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-600/50 rounded-xl p-5 mb-6 shadow-lg",children:[e.jsxs("h4",{className:"font-bold text-text-main flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-blue-400"}),"AIç”³å‘Šæº–å‚™ãƒã‚§ãƒƒã‚¯ï¼ˆè‡ªå‹•è¨ºæ–­ï¼‰"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-slate-700 pb-2",children:[e.jsx("span",{className:"text-slate-400",children:c?"è³‡æœ¬ã®æ•´åˆæ€§ï¼ˆæœŸæœ«è³‡æœ¬åˆè¨ˆ ï¼ æœŸé¦– ï¼‹ åˆ©ç›Šï¼‰":"å…ƒå…¥é‡‘ã®æ•´åˆæ€§ï¼ˆæœŸæœ«å…ƒå…¥é‡‘ ï¼ æœŸé¦– ï¼‹ æ‰€å¾—ï¼‰"}),e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(D,{className:"w-4 h-4"})," æ­£å¸¸",e.jsx("span",{className:"sr-only",children:I})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-slate-700 pb-2",children:[e.jsxs("span",{className:"text-slate-400",children:[c?"æ³•äººç•ªå·":"å€‹äººç•ªå·ï¼ˆãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ï¼‰","ã®å…¥åŠ›"]}),g?e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(D,{className:"w-4 h-4"})," æ­£å¸¸"]}):e.jsxs("span",{className:"text-amber-400 flex items-center gap-1 font-bold",children:[e.jsx(L,{className:"w-4 h-4"})," æœªå…¥åŠ›"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-slate-700 pb-2",children:[e.jsx("span",{className:"text-slate-400",children:"åŸºæœ¬æƒ…å ±ã®å…¥åŠ›çŠ¶æ…‹"}),A?e.jsxs("span",{className:"text-success flex items-center gap-1 font-bold",children:[e.jsx(D,{className:"w-4 h-4"})," å®Œäº†"]}):e.jsxs("span",{className:"text-amber-400 flex items-center gap-1 font-bold",children:[e.jsx(L,{className:"w-4 h-4"})," æœªå®Œäº†"]})]})]}),!g&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-[11px] leading-relaxed text-slate-300",children:[e.jsxs("p",{className:"font-bold text-blue-400 mb-1 flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"})," AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"]}),"ç”³å‘Šæ›¸ã‚’e-Taxã§æå‡ºã™ã‚‹å ´åˆã€",c?"æ³•äººç•ªå·":"å€‹äººç•ªå·","ã®å…¥åŠ›ãŒå¿…é ˆã§ã™ã€‚Step 1ã«æˆ»ã£ã¦å…¥åŠ›ã™ã‚‹ã‹ã€PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¾Œã«æ‰‹æ›¸ãã§è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚"]})]})},Et=()=>{const{user:c}=Ue(),{currentBusinessType:a}=Ve(),N=(a==null?void 0:a.business_type)==="corporation",{transactions:I}=He(c==null?void 0:c.id,a==null?void 0:a.business_type),[g,A]=b.useState(1),[K,Z]=b.useState(!1),E=new Date().getFullYear(),[x,pe]=b.useState(E-1),[u,Q]=b.useState(!0),[f,F]=b.useState([]),[ee,be]=b.useState([]),[te,ge]=b.useState(0),[C,ue]=b.useState(0),[fe,se]=b.useState([]),[i,v]=b.useState({name:"",address:"",idNumber:"",beginningCapital:0,beginningCash:0,beginningReceivable:0,beginningInventory:0,beginningPayable:0,beginningShortTermLoans:0,beginningLongTermLoans:0}),[m,ae]=b.useState(null),[ne,je]=b.useState(null),[Ne,ie]=b.useState(!1),[y,ve]=b.useState(!1);b.useEffect(()=>{(async()=>{if(c!=null&&c.id&&(a!=null&&a.business_type))try{const n=x,[l,o]=await Promise.all([B.getAllByBusinessType(c.id,a.business_type),ce.getAllByBusinessType(c.id,a.business_type)]),d=l.filter(p=>p.year<n),h=o.filter(p=>p.year<n),w=d.length>0?d[0]:null;ae(w);const j=h.length>0?h[0]:null,ze=Array.from(new Set([...d.map(p=>p.year),...h.map(p=>p.year)])).reduce((p,O)=>{const H=d.find(q=>q.year===O),W=h.find(q=>q.year===O),Xe=(W==null?void 0:W.net_assets_retained_earnings)??(H==null?void 0:H.net_income)??0;return p+Xe},0),le=((a==null?void 0:a.capital_amount)||0)+ze;if(j)je(j),v(p=>({...p,beginningCapital:le,beginningCash:j.assets_current_cash||0,beginningReceivable:j.assets_current_receivable||0,beginningInventory:j.assets_current_inventory||0,beginningPayable:j.liabilities_current_payable||0,beginningShortTermLoans:j.liabilities_short_term_loans||0,beginningLongTermLoans:j.liabilities_long_term_loans||0}));else if(v(p=>({...p,beginningCapital:le})),w!=null&&w.balance_sheet){const p=w.balance_sheet;v(O=>({...O,beginningCash:p.assets_current_cash||0,beginningReceivable:p.assets_current_receivable||0,beginningInventory:p.assets_current_inventory||0,beginningPayable:p.liabilities_current_payable||0,beginningShortTermLoans:p.liabilities_short_term_loans||0,beginningLongTermLoans:p.liabilities_long_term_loans||0}))}}catch(n){console.error("å‰å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:",n)}})()},[c==null?void 0:c.id,a==null?void 0:a.business_type,x]),b.useEffect(()=>{F(Ke(u))},[u]);const s=b.useMemo(()=>{const t=Ze(I,x,(a==null?void 0:a.business_type)||"individual",f),n=[...t.expensesByCategory],l=t.totalExpenses+C;return C>0&&(n.push({category:"æ¸›ä¾¡å„Ÿå´è²»",amount:C,percentage:l>0?C/l*100:0}),n.forEach(o=>{o.percentage=l>0?o.amount/l*100:0}),n.sort((o,d)=>d.amount-o.amount)),{...t,totalExpenses:l,expensesByCategory:n,netIncome:t.netIncome-C,taxableIncome:Math.max(0,t.taxableIncome-C)}},[I,x,a,f,C]),ye=()=>{g<U.length&&A(g+1)},we=()=>{g>1&&A(g-1)},_e=()=>{if(!a){$(()=>import("./index-DswpKyhs.js").then(t=>t.a3),__vite__mapDeps([0,1])).then(t=>t.default.error("ç™»éŒ²ã•ã‚ŒãŸäº‹æ¥­æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚é€£æºè¨­å®šã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚"));return}v({name:N?a.company_name:a.representative_name,address:a.address||"",idNumber:a.tax_number||"",beginningCapital:a.capital_amount||0,beginningCash:0,beginningReceivable:0,beginningInventory:0,beginningPayable:0,beginningShortTermLoans:0,beginningLongTermLoans:0}),$(()=>import("./index-DswpKyhs.js").then(t=>t.a3),__vite__mapDeps([0,1])).then(t=>t.default.success("äº‹æ¥­æƒ…å ±ã‚’è»¢è¨˜ã—ã¾ã—ãŸ"))},Ie=()=>{if(!I||I.length===0){$(()=>import("./index-DswpKyhs.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.error("å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"));return}const t=nt(I,x);if(t.length===0){$(()=>import("./index-DswpKyhs.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.error("è»¢è¨˜å¯èƒ½ãªæ¸›ä¾¡å„Ÿå´è³‡ç”£ï¼ˆã‚¿ã‚°: depreciation_assetï¼‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"));return}se(t),$(()=>import("./index-DswpKyhs.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.success(`${t.length} ä»¶ã®æ¸›ä¾¡å„Ÿå´è³‡ç”£ã‚’è»¢è¨˜ã—ã¾ã—ãŸ`))},T=async()=>{if(!(!(c!=null&&c.id)||!a))try{const t=a.business_type==="corporation";await B.save({user_id:c.id,business_type:t?"corporation":"individual",year:x,revenue:s.totalRevenue,cost_of_sales:0,operating_expenses:s.totalExpenses,non_operating_income:0,non_operating_expenses:0,extraordinary_income:0,extraordinary_loss:0,income_before_tax:s.netIncome,net_income:s.netIncome,category_breakdown:s.expensesByCategory,status:"confirmed",metadata:{generated_by:"wizard",generated_at:new Date().toISOString()},balance_sheet:{assets_current_cash:i.beginningCash,assets_current_receivable:i.beginningReceivable,assets_current_inventory:i.beginningInventory,liabilities_current_payable:i.beginningPayable,liabilities_short_term_loans:i.beginningShortTermLoans,liabilities_long_term_loans:i.beginningLongTermLoans,retained_earnings:s.netIncome,capital:i.beginningCapital,assets_total:i.beginningCash+i.beginningReceivable+i.beginningInventory,liabilities_total:i.beginningPayable+i.beginningShortTermLoans+i.beginningLongTermLoans,net_assets_total:i.beginningCapital+s.netIncome}}),await ce.save({user_id:c.id,business_type:t?"corporation":"individual",year:x,assets_current_cash:i.beginningCash,assets_current_receivable:i.beginningReceivable,assets_current_inventory:i.beginningInventory,assets_current_total:i.beginningCash+i.beginningReceivable+i.beginningInventory,assets_fixed_total:0,assets_total:i.beginningCash+i.beginningReceivable+i.beginningInventory,liabilities_current_payable:i.beginningPayable,liabilities_short_term_loans:i.beginningShortTermLoans,liabilities_long_term_loans:i.beginningLongTermLoans,liabilities_total:i.beginningPayable+i.beginningShortTermLoans+i.beginningLongTermLoans,net_assets_capital:i.beginningCapital,net_assets_retained_earnings:s.netIncome,net_assets_retained_earnings_total:s.netIncome,net_assets_shareholders_equity:i.beginningCapital+s.netIncome,net_assets_total:i.beginningCapital+s.netIncome,liabilities_and_net_assets_total:i.beginningCash+i.beginningReceivable+i.beginningInventory,status:"confirmed",metadata:{generated_by:"wizard",generated_at:new Date().toISOString()}}),$(()=>import("./index-DswpKyhs.js").then(n=>n.a3),__vite__mapDeps([0,1])).then(n=>n.default.success("æ±ºç®—ãƒ‡ãƒ¼ã‚¿ã‚’å±¥æ­´ã«ä¿å­˜ã—ã¾ã—ãŸ"))}catch(t){console.error("Data Auto-save Error:",t)}},Ce=(t,n)=>{ue(t),se(n)},ke=t=>{const n=me.find(l=>l.type===t);n&&!f.find(l=>l.type===t)&&F([...f,{id:Date.now().toString(),...n,amount:0,isApplicable:!0}])},Se=t=>{F(f.filter(n=>n.id!==t))},De=(t,n)=>{F(f.map(l=>l.id===t?{...l,amount:n}:l))},$e=async()=>{Z(!0);try{const t=await et(s,{});be(t.suggestions),ge(t.estimatedSavings)}catch(t){console.error("AIè¨ºæ–­ã‚¨ãƒ©ãƒ¼:",t)}finally{Z(!1)}},re=()=>{const t=`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
           ${N?"æ³•äººç¨ç”³å‘Šæ›¸":"ç¢ºå®šç”³å‘Šæ›¸"}ï¼ˆ${x} å¹´åº¦ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ°å:       ${i.name||"ï¼ˆæœªå…¥åŠ›ï¼‰"}
ç´ç¨åœ°:     ${i.address||"ï¼ˆæœªå…¥åŠ›ï¼‰"}
${N?"æ³•äººç•ªå·":"å€‹äººç•ªå·"}:   ${i.idNumber||"ï¼ˆæœªå…¥åŠ›ï¼‰"}

ç”³å‘Šæ–¹æ³•: ${u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"}
ä½œæˆæ—¥æ™‚: ${new Date().toLocaleString("ja-JP")}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€åæ”¯å†…è¨³ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å£²ä¸Šé«˜:     ${r(s.totalRevenue)}
çµŒè²»åˆè¨ˆ:   ${r(s.totalExpenses)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
äº‹æ¥­æ‰€å¾—:   ${r(s.netIncome)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€è²¸å€Ÿå¯¾ç…§è¡¨ï¼ˆæ¦‚ç®—ï¼‰ã€‘
æœŸé¦–å…ƒå…¥é‡‘: ${r(i.beginningCapital)}
æ‰€å¾—é‡‘é¡:   ${r(s.netIncome)}
æœŸæœ«å…ƒå…¥é‡‘: ${r(i.beginningCapital+s.netIncome)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€æ§é™¤å†…è¨³ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${f.filter(h=>h.isApplicable).map(h=>`${h.name.padEnd(20,"ã€€")}: ${r(h.amount)}`).join(`
`)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ§é™¤åˆè¨ˆ:   ${r(s.totalDeductions)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€ç¨é¡è¨ˆç®—ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
èª²ç¨æ‰€å¾—:   ${r(s.taxableIncome)}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰€å¾—ç¨é¡:   ${r(s.estimatedTax)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€»ã“ã®æ›¸é¡ã¯Ainanceã§ç”Ÿæˆã•ã‚ŒãŸæ¦‚ç®—è³‡æ–™ã§ã™ã€‚
æ­£å¼ãªç¢ºå®šç”³å‘Šã¯å›½ç¨åºã®e - Taxã§ãŠæ‰‹ç¶šããã ã•ã„ã€‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`.trim(),n=new Blob(["\uFEFF"+t],{type:"text/plain;charset=utf-8"}),l=URL.createObjectURL(n),o=document.createElement("a");o.href=l,o.download=`ç¢ºå®šç”³å‘Šæ›¸_${x} å¹´åº¦.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o);const d=window.open("","_blank");d&&(d.document.write(`
    < !DOCTYPE html >
        <html lang="ja">
            <head>
                <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>ç¢ºå®šç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ${x}å¹´åº¦</title>
                        <style>
                            body {
                                font - family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
                            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                            color: #e0e0e0;
                            padding: 40px;
                            min-height: 100vh;
                            margin: 0;
        }
                            .container {
                                max - width: 800px;
                            margin: 0 auto;
                            background: rgba(255,255,255,0.05);
                            border-radius: 16px;
                            padding: 40px;
                            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                            backdrop-filter: blur(10px);
        }
                            h1 {
                                text - align: center;
                            color: #60a5fa;
                            margin-bottom: 8px;
                            font-size: 24px;
        }
                            .subtitle {
                                text - align: center;
                            color: #9ca3af;
                            margin-bottom: 32px;
                            font-size: 14px;
        }
                            pre {
                                background: rgba(0,0,0,0.3);
                            padding: 24px;
                            border-radius: 12px;
                            font-family: 'SFMono-Regular', 'Consolas', 'Menlo', monospace;
                            font-size: 14px;
                            line-height: 1.8;
                            overflow-x: auto;
                            white-space: pre-wrap;
                            word-wrap: break-word;
        }
                            .actions {
                                display: flex;
                            gap: 16px;
                            justify-content: center;
                            margin-top: 32px;
        }
                            button {
                                padding: 12px 24px;
                            border-radius: 8px;
                            border: none;
                            cursor: pointer;
                            font-size: 14px;
                            font-weight: 600;
                            transition: all 0.2s;
        }
                            .print-btn {
                                background: #3b82f6;
                            color: white;
        }
                            .print-btn:hover {
                                background: #2563eb;
        }
                            .close-btn {
                                background: rgba(255,255,255,0.1);
                            color: #e0e0e0;
                            border: 1px solid rgba(255,255,255,0.2);
        }
                            .close-btn:hover {
                                background: rgba(255,255,255,0.2);
        }
                            @media print {
                                body {
                                background: white;
                            color: black;
            }
                            .container {
                                background: white;
                            box-shadow: none;
            }
                            pre {
                                background: #f5f5f5;
            }
                            .actions {
                                display: none;
            }
        }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <h1>ğŸ“„ ç¢ºå®šç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h1>
                            <p class="subtitle">${x}å¹´åº¦ | ${u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"} | ä½œæˆæ—¥: ${new Date().toLocaleDateString("ja-JP")}</p>
                            <pre>${t}</pre>
                            <div class="actions">
                                <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ å°åˆ·ã™ã‚‹</button>
                                <button class="close-btn" onclick="window.close()">âœ• é–‰ã˜ã‚‹</button>
                            </div>
                        </div>
                    </body>
                </html>
                `),d.document.close()),setTimeout(()=>URL.revokeObjectURL(l),1e3)},Pe=()=>e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:U.map((t,n)=>e.jsxs(We.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${g>t.id?"bg-success text-white":g===t.id?"bg-primary text-white":"bg-surface-highlight text-text-muted"}`,children:g>t.id?e.jsx(_,{className:"w-4 h-4"}):e.jsx(t.icon,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-xs mt-2 hidden sm:block ${g>=t.id?"text-text-main font-medium":"text-text-muted"}`,children:t.title})]}),n<U.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded ${g>t.id?"bg-success":"bg-surface-highlight"}`})]},t.id))})}),Re=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-surface border border-border rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(oe,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-text-main mb-1",children:"å‰æœŸãƒ‡ãƒ¼ã‚¿ã®å¼•ãç¶™ã"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:"å‰æœŸã®æ±ºç®—ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€ã“ã¨ã§ã€ä»ŠæœŸã®åæ”¯æ¯”è¼ƒã‚„BSã®æœŸé¦–æ®‹é«˜è¨­å®šãŒã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã¾ã™ã€‚"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[m?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success font-medium",children:[e.jsx(D,{className:"w-4 h-4"}),m.year,"å¹´åº¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå–è¾¼æ¸ˆã¿ã§ã™"]}):e.jsxs("button",{onClick:()=>ie(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[e.jsx(oe,{className:"w-4 h-4"}),"å‰æœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"]}),e.jsxs(R,{to:"/settlement-history",className:"inline-flex items-center gap-2 px-4 py-2 bg-surface-highlight border border-border text-text-muted hover:text-text-main rounded-lg transition-colors text-sm font-medium",children:[e.jsx(S,{className:"w-4 h-4"}),"å±¥æ­´ãƒ»å¼•ç¶™ãç®¡ç†"]})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-1",children:[N?"æ³•äººç¨ç”³å‘Š":"ç¢ºå®šç”³å‘Š","ã®åŸºæœ¬è¨­å®š"]}),e.jsx("p",{className:"text-text-muted",children:"ç”³å‘Šå¹´åº¦ã€æ–¹æ³•ã€ãŠã‚ˆã³åŸºæœ¬æƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚"})]}),e.jsxs("button",{onClick:_e,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(Y,{className:"w-4 h-4"}),"ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è»¢è¨˜"]})]}),ne?e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"å‰æœŸãƒ‡ãƒ¼ã‚¿ï¼ˆãƒãƒˆãƒ³ã‚¿ãƒƒãƒï¼‰ã®é©ç”¨ä¸­"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:[ne.year,"å¹´åº¦ã®ç¢ºå®šæ¸ˆã¿ç”³å‘Šãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æœŸé¦–æ®‹é«˜ï¼ˆå…ƒå…¥é‡‘ãƒ»æ‰€å¾—é‡‘é¡ãªã©ï¼‰ã‚’è‡ªå‹•çš„ã«å¼•ãç¶™ã„ã§ã„ã¾ã™ã€‚"]})]})]}):e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"å‰æœŸãƒ‡ãƒ¼ã‚¿ã®ç™»éŒ²ã‚’ãŠå‹§ã‚ã—ã¾ã™"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"ã€Œéå»ãƒ‡ãƒ¼ã‚¿ãƒ»å¼•ç¶™ãã€ã«å‰å¹´åº¦ã®é’è‰²ç”³å‘Šæ±ºç®—æ›¸ç­‰ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€æœŸé¦–æ®‹é«˜ãŒè‡ªå‹•ã§ãƒãƒˆãƒ³ã‚¿ãƒƒãƒï¼ˆå¼•ãç¶™ãï¼‰ã•ã‚Œã¾ã™ã€‚"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"æ°å / æ°åï¼ˆåç§°ï¼‰"}),e.jsx("input",{type:"text",value:i.name,onChange:t=>v({...i,name:t.target.value}),className:"input-base",placeholder:"å±±ç”° å¤ªéƒ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç´ç¨åœ° / ä½æ‰€"}),e.jsx("input",{type:"text",value:i.address,onChange:t=>v({...i,address:t.target.value}),className:"input-base",placeholder:"æ±äº¬éƒ½æ¸‹è°·åŒº..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:N?"æ³•äººç•ªå·":"å€‹äººç•ªå·"}),e.jsx("input",{type:"text",value:i.idNumber,onChange:t=>v({...i,idNumber:t.target.value}),className:"input-base",placeholder:"123456789012"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"æœŸé¦–å…ƒå…¥é‡‘"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"Â¥"}),e.jsx("input",{type:"number",value:i.beginningCapital,onChange:t=>v({...i,beginningCapital:Number(t.target.value)}),className:"input-base pl-8",placeholder:"0"})]}),e.jsx("p",{className:"text-[10px] text-text-muted mt-1",children:"å‰æœŸæœ«æ™‚ç‚¹ã®è³‡ç”£åˆè¨ˆã‹ã‚‰è² å‚µåˆè¨ˆã‚’å·®ã—å¼•ã„ãŸã€è¿”æ¸ˆä¸è¦ã®è‡ªå·±è³‡æœ¬ï¼ˆå…ƒæ‰‹ï¼‰ã§ã™ã€‚"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç”³å‘Šå¹´åº¦"}),e.jsx("select",{value:x,onChange:t=>pe(Number(t.target.value)),className:"input-base",children:[E,...Array.from({length:4},(t,n)=>E-1-n)].map(t=>e.jsxs("option",{value:t,children:[t,"å¹´åº¦ï¼ˆ",t,"å¹´1æœˆã€œ12æœˆï¼‰",t===E&&" â€»é€²è¡Œä¸­"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"ç”³å‘Šæ–¹æ³•"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border border-border rounded-lg cursor-pointer hover:bg-surface-highlight transition-colors",children:[e.jsx("input",{type:"radio",checked:u,onChange:()=>Q(!0),className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-text-main",children:"é’è‰²ç”³å‘Š"}),e.jsx("span",{className:"ml-2 text-xs text-success",children:"æœ€å¤§65ä¸‡å††æ§é™¤"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"è¤‡å¼ç°¿è¨˜ã§æœ€å¤§65ä¸‡å††ã®æ§é™¤ãŒå—ã‘ã‚‰ã‚Œã¾ã™"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border border-border rounded-lg cursor-pointer hover:bg-surface-highlight transition-colors",children:[e.jsx("input",{type:"radio",checked:!u,onChange:()=>Q(!1),className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-text-main",children:"ç™½è‰²ç”³å‘Š"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"ç°¡æ˜“çš„ãªå¸³ç°¿ã§ç”³å‘Šã§ãã¾ã™"})]})]})]})]})]}),e.jsxs("div",{className:"bg-info-light border border-info/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"é’è‰²ç”³å‘ŠãŒãŠã™ã™ã‚ï¼"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Ainanceã§å–å¼•ã‚’è¨˜éŒ²ã—ã¦ã„ã‚Œã°ã€è¤‡å¼ç°¿è¨˜ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚ 65ä¸‡å††ã®æ§é™¤ã§ç¨é‡‘ãŒãŠå¾—ã«ãªã‚Šã¾ã™ã€‚"})]})]})]}),Le=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"åæ”¯ã®ç¢ºèª"}),e.jsxs("p",{className:"text-text-muted mb-6",children:[x,"å¹´åº¦ã®å–å¼•ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•é›†è¨ˆã—ãŸçµæœã§ã™ã€‚"]})]}),m&&e.jsxs("div",{className:"flex items-center justify-between bg-surface border border-border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-text-main block",children:["å‰æœŸ (",m.year,"å¹´åº¦) ã¨æ¯”è¼ƒ"]}),e.jsx("span",{className:"text-xs text-text-muted",children:"ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å¢—æ¸›ã‚’ç¢ºèªã§ãã¾ã™"})]})]}),e.jsx("button",{onClick:()=>ve(!y),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${y?"bg-primary":"bg-border"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-success font-medium",children:"å£²ä¸Šé«˜"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.totalRevenue)}),y&&m&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalRevenue>=m.revenue?"text-success":"text-error"}`,children:[s.totalRevenue>=m.revenue?"â†‘":"â†“",r(Math.abs(s.totalRevenue-m.revenue)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",m.year,"åº¦: ",r(m.revenue),")"]})]})]}),e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-success font-medium",children:"é›‘åå…¥"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.totalMiscellaneousIncome)}),y&&m&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalMiscellaneousIncome>=(m.non_operating_income||0)?"text-success":"text-error"}`,children:[s.totalMiscellaneousIncome>=(m.non_operating_income||0)?"â†‘":"â†“",r(Math.abs(s.totalMiscellaneousIncome-(m.non_operating_income||0))),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",m.year,"åº¦: ",r(m.non_operating_income||0),")"]})]})]}),e.jsxs("div",{className:"bg-error-light border border-error/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-error font-medium",children:"çµŒè²»åˆè¨ˆ"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.totalExpenses)}),y&&m&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.totalExpenses<=m.operating_expenses?"text-success":"text-error"}`,children:[s.totalExpenses<=m.operating_expenses?"â†“":"â†‘",r(Math.abs(s.totalExpenses-m.operating_expenses)),e.jsxs("span",{className:"text-text-muted ml-1 font-normal",children:["(",m.year,"åº¦: ",r(m.operating_expenses),")"]})]})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"æ‰€å¾—é‡‘é¡ï¼ˆå½“æœŸåˆ©ç›Šï¼‰"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.netIncome)}),y&&m&&e.jsxs("p",{className:`text-xs mt-2 font-medium ${s.netIncome>=m.net_income?"text-success":"text-error"}`,children:[s.netIncome>=m.net_income?"â†‘":"â†“",r(Math.abs(s.netIncome-m.net_income))]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("h4",{className:"font-medium text-text-main mb-4",children:"æœŸæœ«å…ƒå…¥é‡‘ã®è¨ˆç®—"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"æœŸé¦–å…ƒå…¥é‡‘"}),e.jsx("span",{className:"font-medium text-text-main",children:r(i.beginningCapital)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-text-muted",children:"æ‰€å¾—é‡‘é¡"}),e.jsxs("span",{className:"font-medium text-success",children:["+",r(s.netIncome)]})]}),e.jsxs("div",{className:"flex justify-between py-2 bg-primary-light px-2 -mx-2 rounded",children:[e.jsx("span",{className:"font-bold text-text-main",children:"æœŸæœ«å…ƒå…¥é‡‘ï¼ˆæ¦‚ç®—ï¼‰"}),e.jsx("span",{className:"font-bold text-primary",children:r(i.beginningCapital+s.netIncome)})]})]}),e.jsx("p",{className:"text-[10px] text-text-muted mt-3",children:"â€»æœŸæœ«å…ƒå…¥é‡‘ã¯ã€æœŸé¦–å…ƒå…¥é‡‘ã«å½“æœŸã®æ‰€å¾—é‡‘é¡ã‚’åŠ ç®—ã—ãŸæ¦‚ç®—é¡ã§ã™ï¼ˆäº‹æ¥­ä¸»è²¸ãƒ»å€Ÿã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰ã€‚"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("h4",{className:"font-medium text-text-main mb-4",children:"çµŒè²»ã‚«ãƒ†ã‚´ãƒªå†…è¨³"}),s.expensesByCategory.length>0?e.jsx("div",{className:"space-y-4",children:s.expensesByCategory.map((t,n)=>{const l=m==null?void 0:m.category_breakdown.find(o=>o.category===t.category);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{className:"text-text-main",children:t.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-medium text-text-main",children:r(t.amount)}),e.jsxs("span",{className:"text-text-muted text-sm ml-2",children:["(",Qe(t.percentage),")"]})]})]}),e.jsx("div",{className:"w-full bg-surface-highlight h-2 rounded-full overflow-hidden mb-1",children:e.jsx("div",{className:"bg-primary h-full rounded-full",style:{width:`${t.percentage}%`}})}),y&&m&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("p",{className:`text-[10px] font-medium ${l?t.amount<=l.amount?"text-success":"text-error":"text-text-muted"}`,children:l?e.jsxs(e.Fragment,{children:[t.amount<=l.amount?"â†“":"â†‘"," ",r(Math.abs(t.amount-l.amount)),e.jsxs("span",{className:"text-text-muted font-normal ml-1",children:["(",m.year,"åº¦: ",r(l.amount),")"]})]}):"å‰æœŸãƒ‡ãƒ¼ã‚¿ãªã—"})})]},n)})}):e.jsxs("p",{className:"text-text-muted text-center py-4",children:[x,"å¹´åº¦ã®çµŒè²»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"]})]}),s.totalRevenue===0&&s.totalExpenses===0&&e.jsxs("div",{className:"bg-warning-light border border-warning/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-main font-medium",children:"å–å¼•ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:[x,"å¹´åº¦ã®å–å¼•ã‚’ç™»éŒ²ã—ã¦ã‹ã‚‰ç¢ºå®šç”³å‘Šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",e.jsx(R,{to:"/transactions",className:"text-primary hover:underline ml-1",children:"å–å¼•ã‚’ç™»éŒ²ã™ã‚‹ â†’"})]})]})]})]}),Ae=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-1",children:"æ¸›ä¾¡å„Ÿå´è³‡ç”£ã®ç™»éŒ²"}),e.jsx("p",{className:"text-text-muted",children:"å›ºå®šè³‡ç”£ã®ç™»éŒ²ã¨ä»ŠæœŸã®å„Ÿå´é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚"})]}),e.jsxs("button",{onClick:Ie,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg hover:bg-primary/20 transition-colors text-primary text-sm font-medium whitespace-nowrap",children:[e.jsx(Y,{className:"w-4 h-4"}),"å–å¼•ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è»¢è¨˜"]})]}),e.jsx(Je,{initialAssets:fe,onCalculate:Ce})]}),Ee=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main mb-4",children:"å„ç¨®æ§é™¤ã®å…¥åŠ›"}),e.jsx("p",{className:"text-text-muted mb-6",children:"è©²å½“ã™ã‚‹æ§é™¤ã‚’è¿½åŠ ã—ã¦é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚æ§é™¤ãŒå¤šã„ã»ã©ç¨é‡‘ãŒå®‰ããªã‚Šã¾ã™ã€‚"})]}),e.jsx("div",{className:"space-y-4",children:f.map(t=>e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-success"}),e.jsx("span",{className:"font-medium text-text-main",children:t.name})]}),e.jsx("p",{className:"text-sm text-text-muted mt-1 ml-7",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-7 sm:ml-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.amount,onChange:n=>De(t.id,Number(n.target.value)),className:"input-base pr-8 w-40",placeholder:"é‡‘é¡",disabled:t.type==="basic"||t.type==="blue_return"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none",children:"å††"})]}),t.type!=="basic"&&t.type!=="blue_return"&&e.jsx("button",{onClick:()=>Se(t.id),className:"p-2 text-error hover:bg-error-light rounded-lg transition-colors",children:e.jsx(Be,{className:"w-5 h-5"})})]})]},t.id))}),e.jsxs("div",{className:"bg-surface-highlight border border-border rounded-xl p-5",children:[e.jsxs("h4",{className:"font-medium text-text-main mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"æ§é™¤ã‚’è¿½åŠ "]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:me.filter(t=>!f.find(n=>n.type===t.type)).map(t=>e.jsxs("button",{onClick:()=>ke(t.type),className:"flex items-center gap-3 p-3 bg-surface border border-border rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-light rounded-lg flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-main text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-text-muted",children:t.description})]})]},t.type))})]}),e.jsxs("div",{className:"bg-success-light border border-success/20 rounded-xl p-5 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-text-main",children:"æ§é™¤åˆè¨ˆ"}),e.jsx("span",{className:"text-2xl font-bold text-success",children:r(s.totalDeductions)})]})]}),Fe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-text-muted font-medium",children:"èª²ç¨æ‰€å¾—é‡‘é¡ï¼ˆäºˆæ¸¬ï¼‰"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.taxableIncome)}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"äº‹æ¥­æ‰€å¾— - å„ç¨®æ§é™¤"})]}),e.jsxs("div",{className:"bg-primary-light border border-primary/20 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm text-primary font-medium",children:"äºˆæƒ³æ‰€å¾—ç¨é¡"}),e.jsx("p",{className:"text-2xl font-bold text-text-main mt-1",children:r(s.estimatedTax)}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"â€»æ¦‚ç®—ã§ã™ã€‚å®Ÿéš›ã®ç¨é¡ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™"})]})]}),ee.length===0?e.jsx("button",{onClick:$e,disabled:K,className:"btn-primary w-full py-4",children:K?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 animate-spin"}),"AIåˆ†æä¸­..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-5 h-5"}),"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å—ã‘ã‚‹"]})}):e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"AIã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹"})]}),e.jsx("ul",{className:"space-y-3",children:ee.map((t,n)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-text-main",children:t})]},n))}),te>0&&e.jsx("div",{className:"bg-success-light border border-success/20 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-success font-medium",children:["æ¨å®šç¯€ç¨å¯èƒ½é¡: ",r(te)]})})]})]}),Te=()=>{const t={fiscalYear:x,revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:f.filter(d=>d.isApplicable).map(d=>({type:d.type,name:d.name,amount:d.amount})),totalDeductions:s.totalDeductions,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax},n=u?tt(t):st(t),l=u?`é’è‰²ç”³å‘Šæ±ºç®—æ›¸_${x}å¹´åº¦.xtx`:`åæ”¯å†…è¨³æ›¸_${x}å¹´åº¦.xml`;at(n,l);const o=window.open("","_blank");o&&(o.document.write(`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>e-Taxç”¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ${x}å¹´åº¦</title>
    <style>
        body { font-family: 'Hiragino Sans', sans-serif; background: #1a1a2e; color: #e0e0e0; padding: 40px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: #60a5fa; text-align: center; }
        .info { background: rgba(96,165,250,0.1); border: 1px solid rgba(96,165,250,0.3); padding: 16px; border-radius: 8px; margin-bottom: 24px; }
        pre { background: #0d1117; padding: 20px; border-radius: 8px; overflow-x: auto; font-size: 12px; line-height: 1.6; }
        .actions { display: flex; gap: 16px; justify-content: center; margin-top: 24px; }
        button { padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; font-weight: 600; }
        .primary { background: #3b82f6; color: white; }
        .secondary { background: rgba(255,255,255,0.1); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“„ ${u?"é’è‰²ç”³å‘Šæ±ºç®—æ›¸":"åæ”¯å†…è¨³æ›¸"}ï¼ˆ${x}å¹´åº¦ï¼‰</h1>
        <div class="info">
            <p>âš ï¸ <strong>ã“ã®XMLãƒ•ã‚¡ã‚¤ãƒ«ã¯å‚è€ƒè³‡æ–™ã§ã™ã€‚</strong></p>
            <p>æ­£å¼ãªç¢ºå®šç”³å‘Šã¯ã€å›½ç¨åºã®ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚XMLãƒ‡ãƒ¼ã‚¿ã¯å…¥åŠ›ã®å‚è€ƒã«ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ã€‚</p>
        </div>
        <pre>${n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>
        <div class="actions">
            <button class="secondary" onclick="window.close()">âœ• é–‰ã˜ã‚‹</button>
        </div>
    </div>
</body>
</html>
            `),o.document.close())},Me=()=>{const[t,n]=b.useState(null),l=async(o,d)=>{try{await navigator.clipboard.writeText(String(o).replace(/[Â¥,]/g,"")),n(d),setTimeout(()=>n(null),2e3)}catch(h){console.error("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:",h)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xt,{isCorporation:N,basicInfo:i,taxData:s}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-primary"}),N?"æ³•äººç¨ç”³å‘Šæ›¸":"ç¢ºå®šç”³å‘Šæ›¸","ã®ä½œæˆ"]}),e.jsx("p",{className:"text-text-muted mb-2",children:"å…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ã€æ›¸é¡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚"}),e.jsx("p",{className:"text-xs text-text-muted",children:"ğŸ’¡ å„é …ç›®ã®å³å´ã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã§ã€e-Taxå…¥åŠ›æ™‚ã«ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã§ãã¾ã™"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl divide-y divide-border",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"ç”³å‘Šå¹´åº¦"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"font-medium text-text-main",children:[x,"å¹´åº¦"]})})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"ç”³å‘Šæ–¹æ³•"}),e.jsx("span",{className:"font-medium text-text-main",children:u?"é’è‰²ç”³å‘Š":"ç™½è‰²ç”³å‘Š"})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"å£²ä¸Šé«˜"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-success",children:r(s.totalRevenue)}),e.jsx("button",{onClick:()=>l(s.totalRevenue,"revenue"),className:`p-1.5 rounded transition-colors ${t==="revenue"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="revenue"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"é›‘åå…¥"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-success",children:r(s.totalMiscellaneousIncome)}),e.jsx("button",{onClick:()=>l(s.totalMiscellaneousIncome,"miscellaneous"),className:`p-1.5 rounded transition-colors ${t==="miscellaneous"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="miscellaneous"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"çµŒè²»åˆè¨ˆ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-error",children:r(s.totalExpenses)}),e.jsx("button",{onClick:()=>l(s.totalExpenses,"expenses"),className:`p-1.5 rounded transition-colors ${t==="expenses"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="expenses"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"äº‹æ¥­æ‰€å¾—"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:r(s.netIncome)}),e.jsx("button",{onClick:()=>l(s.netIncome,"netIncome"),className:`p-1.5 rounded transition-colors ${t==="netIncome"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="netIncome"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"æ§é™¤åˆè¨ˆ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-primary",children:r(s.totalDeductions)}),e.jsx("button",{onClick:()=>l(s.totalDeductions,"deductions"),className:`p-1.5 rounded transition-colors ${t==="deductions"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="deductions"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-text-muted",children:"èª²ç¨æ‰€å¾—"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-text-main",children:r(s.taxableIncome)}),e.jsx("button",{onClick:()=>l(s.taxableIncome,"taxableIncome"),className:`p-1.5 rounded transition-colors ${t==="taxableIncome"?"bg-success text-white":"hover:bg-surface-highlight text-text-muted"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="taxableIncome"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 flex justify-between items-center bg-primary-light",children:[e.jsx("span",{className:"font-medium text-text-main",children:"äºˆæƒ³æ‰€å¾—ç¨é¡"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-primary text-lg",children:r(s.estimatedTax)}),e.jsx("button",{onClick:()=>l(s.estimatedTax,"tax"),className:`p-1.5 rounded transition-colors ${t==="tax"?"bg-success text-white":"hover:bg-primary/20 text-primary"}`,title:"ã‚³ãƒ”ãƒ¼",children:t==="tax"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-text-main flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-slate-400"}),"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ç”³å‘Š"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:re,className:"px-4 py-3 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"ç”³å‘Šæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"]}),e.jsxs("button",{onClick:Te,className:"px-4 py-3 border border-slate-500 text-slate-300 rounded-lg hover:bg-slate-700/50 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(dt,{className:"w-4 h-4"}),"e-Taxç”¨XMLãƒ•ã‚¡ã‚¤ãƒ«"]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-600/50 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"bg-blue-500/20 text-blue-400 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"NEW"}),e.jsx("h5",{className:"text-sm font-semibold text-text-main",children:"æ—¥æœ¬èªPDFè‡ªå‹•ç”Ÿæˆ"})]}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:(a==null?void 0:a.business_type)==="corporation"?"æ³•äººç¨ç”³å‘Šæ›¸ãƒ»æ±ºç®—å ±å‘Šæ›¸ï¼ˆè²¡å‹™ä¸‰è¡¨ï¼‰ã‚’æ—¥æœ¬èªPDFã§ç”Ÿæˆ":"ç¢ºå®šç”³å‘Šæ›¸Bãƒ»é’è‰²ç”³å‘Šæ±ºç®—æ›¸ã‚’æ—¥æœ¬èªPDFã§ç”Ÿæˆ"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(a==null?void 0:a.business_type)!=="corporation"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{var o,d;try{const h={name:(a==null?void 0:a.representative_name)||(c==null?void 0:c.name)||"",address:(a==null?void 0:a.address)||"",tradeName:(a==null?void 0:a.company_name)||"",phone:(a==null?void 0:a.phone)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:{basic:((o=f.find(M=>M.type==="basic"))==null?void 0:o.amount)||48e4,blueReturn:u?65e4:0,socialInsurance:(d=f.find(M=>M.type==="socialInsurance"))==null?void 0:d.amount},taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:x,isBlueReturn:u},w=await it(h),j=`ç¢ºå®šç”³å‘Šæ›¸B_${x}å¹´åº¦.pdf`;z(w,j),X(w),await T()}catch(h){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",h),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"ç¢ºå®šç”³å‘Šæ›¸B"]}),u&&e.jsxs("button",{onClick:async()=>{try{const o={name:c==null?void 0:c.name,address:(a==null?void 0:a.address)||"",tradeName:(a==null?void 0:a.company_name)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,deductions:{blueReturn:65e4},taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:x,isBlueReturn:!0},d=await rt(o),h=`é’è‰²ç”³å‘Šæ±ºç®—æ›¸_${x}å¹´åº¦.pdf`;z(d,h),X(d),await T()}catch(o){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",o),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"é’è‰²ç”³å‘Šæ±ºç®—æ›¸"]})]}),(a==null?void 0:a.business_type)==="corporation"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{try{const o={companyName:(a==null?void 0:a.company_name)||"ä¼šç¤¾å",representativeName:(a==null?void 0:a.representative_name)||"",address:(a==null?void 0:a.address)||"",revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:x,businessType:"corporation"},d=await lt(o),h=`æ³•äººç¨ç”³å‘Šæ›¸_${x}å¹´åº¦.pdf`;z(d,h),X(d),await T()}catch(o){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",o),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"æ³•äººç¨ç”³å‘Šæ›¸"]}),e.jsxs("button",{onClick:async()=>{try{const o={revenue:s.totalRevenue,expenses:s.totalExpenses,netIncome:s.netIncome,expensesByCategory:s.expensesByCategory,taxableIncome:s.taxableIncome,estimatedTax:s.estimatedTax,fiscalYear:x,businessType:"corporation",companyName:(a==null?void 0:a.company_name)||"ä¼šç¤¾å",representativeName:(a==null?void 0:a.representative_name)||"",capital:1e6},d=await ot(o),h=`æ±ºç®—å ±å‘Šæ›¸_${x}å¹´åº¦.pdf`;z(d,h),X(d),await T()}catch(o){console.error("PDFç”Ÿæˆã‚¨ãƒ©ãƒ¼:",o),alert("PDFç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"æ±ºç®—å ±å‘Šæ›¸ï¼ˆè²¡å‹™ä¸‰è¡¨ï¼‰"]})]})]})]}),(a==null?void 0:a.business_type)==="corporation"&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-5",children:[e.jsx("h5",{className:"text-sm font-semibold text-text-main mb-1",children:"å…¬å¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"å›½ç¨åºã®æ³•äººç¨ç”³å‘Šæ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆä»¤å’Œ6å¹´4æœˆ1æ—¥ä»¥å¾Œçµ‚äº†äº‹æ¥­å¹´åº¦åˆ†ï¼‰"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/01_01.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨ä¸€ï¼ˆä¸€ï¼‰"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/01_02.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨ä¸€ï¼ˆäºŒï¼‰"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/pdf/04.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"åˆ¥è¡¨å››"]}),e.jsxs("a",{href:"https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/hojin/shinkoku/itiran2024/01.htm",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2.5 border border-slate-500/50 text-slate-300 rounded-lg hover:bg-slate-700/50 hover:border-slate-400 transition-all text-xs font-medium flex items-center justify-center gap-1.5",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),"å…¨åˆ¥è¡¨ä¸€è¦§"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-text-main mb-3 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-slate-400"}),"e-Taxã§ç›´æ¥ç”³å‘Šã™ã‚‹"]}),e.jsxs("ol",{className:"text-xs text-slate-400 space-y-2 mb-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"1"}),"ä¸Šã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã§å„æ•°å€¤ã‚’ã‚³ãƒ”ãƒ¼"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"2"}),"ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"3"}),"ã‚³ãƒ”ãƒ¼ã—ãŸæ•°å€¤ã‚’è²¼ã‚Šä»˜ã‘ã¦å…¥åŠ›"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-slate-600 text-slate-200 rounded-full flex items-center justify-center text-[10px] font-medium",children:"4"}),"ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã§é›»å­ç½²å â†’ é€ä¿¡å®Œäº†ï¼"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("a",{href:"https://www.keisan.nta.go.jp/kyoutu/ky/smsp/top",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium",children:[e.jsx(J,{className:"w-4 h-4"}),"ç¢ºå®šç”³å‘Šæ›¸ç­‰ä½œæˆã‚³ãƒ¼ãƒŠãƒ¼"]}),e.jsx(R,{to:"/tax-filing-guide",className:"inline-flex items-center gap-2 px-4 py-2.5 border border-slate-500 text-slate-300 rounded-lg hover:bg-slate-700/50 transition-colors text-sm font-medium",children:"ğŸ“– è©³ã—ã„ç”³å‘Šã‚¬ã‚¤ãƒ‰"})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-600/30 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"ã”æ³¨æ„ãã ã•ã„"}),e.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"ã“ã®è¨ˆç®—ã¯æ¦‚ç®—ã§ã™ã€‚æ­£ç¢ºãªç¨é¡ã¯ç¨å‹™ç½²ã«ã”ç¢ºèªãã ã•ã„"}),e.jsx("li",{children:"ç¢ºå®šç”³å‘Šã®æœŸé™ã¯ç¿Œå¹´3æœˆ15æ—¥ã§ã™ï¼ˆä¾‹ï¼š2025å¹´åº¦åˆ†ã¯2026å¹´3æœˆ15æ—¥ã¾ã§ï¼‰"}),e.jsx("li",{children:"é’è‰²ç”³å‘Šç‰¹åˆ¥æ§é™¤65ä¸‡å††ã®é©ç”¨ã«ã¯é›»å­ç”³å‘ŠãŒå¿…è¦ã§ã™"})]})]})]})]})},Oe=()=>{switch(g){case 1:return e.jsx(Re,{});case 2:return e.jsx(Le,{});case 3:return e.jsx(Ae,{});case 4:return e.jsx(Ee,{});case 5:return e.jsx(Fe,{});case 6:return e.jsx(Me,{});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(R,{to:"/dashboard",className:"flex items-center text-xs text-primary hover:text-primary-hover",children:[e.jsx(de,{className:"h-4 w-4 mr-1.5"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]}),e.jsx(R,{to:"/tax-filing-guide",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-xs font-medium",children:"ğŸ“– ç”³å‘Šã‚¬ã‚¤ãƒ‰"})]}),e.jsx("h1",{className:"text-xl font-bold text-text-main mb-1",children:"ç¢ºå®šç”³å‘Šã‚µãƒãƒ¼ãƒˆ"}),e.jsx("p",{className:"text-xs text-text-muted",children:"6ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç°¡å˜ã«ç¢ºå®šç”³å‘Šã‚’å®Œäº†ã§ãã¾ã™"})]}),e.jsx(Pe,{}),e.jsx("div",{className:"bg-surface border border-border rounded-xl p-3 mb-6",children:Oe()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:we,disabled:g===1,className:`btn-ghost ${g===1?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(de,{className:"w-5 h-5"}),"æˆ»ã‚‹"]}),g<U.length?e.jsxs("button",{onClick:ye,className:"btn-primary",children:["æ¬¡ã¸",e.jsx(ct,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:re,className:"btn-success",children:[e.jsx(D,{className:"w-5 h-5"}),"å®Œäº†"]})]})]}),e.jsx(Ge,{isOpen:Ne,onClose:()=>ie(!1),userId:(c==null?void 0:c.id)||"",businessType:(a==null?void 0:a.business_type)||"individual",onImportSuccess:()=>{c!=null&&c.id&&(a!=null&&a.business_type)&&B.getLatest(c.id,a.business_type).then(ae)}})]})};export{Et as default};
