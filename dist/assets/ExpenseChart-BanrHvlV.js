import{j as e}from"./index-DC9j6qQS.js";import{D as j,C as y,A as v,d as N,e as C}from"./index-gZjsp2Cm.js";y.register(v,N,C);const A=({transactions:u})=>{const f=()=>{const a=u.filter(s=>s.type==="expense"),t={};a.forEach(s=>{const l=Math.abs(typeof s.amount=="string"?parseFloat(s.amount):s.amount);t[s.category]?t[s.category]+=l:t[s.category]=l});const o=Object.values(t).reduce((s,l)=>s+l,0),m={};return Object.keys(t).forEach(s=>{m[s]=Math.round(t[s]/o*100)}),{categoryTotals:t,percentages:m,totalAmount:o}},{percentages:n,categoryTotals:h,totalAmount:p}=f(),r=Object.keys(n),c=Object.values(n),i=Object.values(h),d=["#6366f1","#8b5cf6","#3b82f6","#0ea5e9","#06b6d4","#14b8a6","#f59e0b","#f97316","#ef4444","#ec4899"],x=r.map((a,t)=>d[t%d.length]),b={labels:r,datasets:[{data:c,backgroundColor:x,borderWidth:0,cutout:"75%"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(a){const t=a.label||"",o=i[a.dataIndex];return`${t}: ${a.parsed}% (${o.toLocaleString()}円)`}},backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#f8fafc",bodyColor:"#e2e8f0",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10}}};return e.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"支出カテゴリ"}),e.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"詳細を見る"})]}),e.jsxs("div",{className:"chart-container h-64 w-full relative flex-shrink-0",children:[e.jsx(j,{data:b,options:g}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"総支出"}),e.jsxs("p",{className:"text-2xl font-bold text-text-main",children:["¥",p.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-6 flex-1 min-h-0 flex flex-col",children:[e.jsx("h4",{className:"font-medium text-text-secondary mb-3 text-sm flex-shrink-0",children:"カテゴリ別支出内訳"}),e.jsx("div",{className:"space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1",children:r.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between group p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-[9px] h-[9px] rounded-full mr-3 shadow-sm",style:{backgroundColor:x[t]}}),e.jsx("span",{className:"text-sm text-text-secondary group-hover:text-text-main transition-colors",children:a})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs font-medium text-text-muted bg-surface-highlight px-2 py-1 rounded-full",children:[c[t],"%"]}),e.jsxs("span",{className:"text-sm font-bold text-text-main",children:["¥",i[t].toLocaleString()]})]})]},a))})]})]})};export{A as default};
