import{j as e}from"./index-DbpAXpfG.js";import{L as k,C,a as L,b as w,P as M,c as R,p as S,d as B,e as D,i as $}from"./index-8GBqu_Pm.js";C.register(L,w,M,R,S,B,D,$);const Y=({transactions:b})=>{const g=()=>{const t={},r=[],n=new Date,u=n.getMonth()>=2?n.getFullYear():n.getFullYear()-1,p=(n.getMonth()>=2,2);for(let s=0;s<12;s++){const o=p+s<=11?u:u+1,l=(p+s)%12,a=new Date(o,l,1),h=`${a.getFullYear()}年${a.getMonth()+1}月`;r.push(h),t[h]={revenue:0,expense:0}}b.forEach(s=>{const o=typeof s.amount=="string"?parseFloat(s.amount):s.amount,l=new Date(s.date),a=`${l.getFullYear()}年${l.getMonth()+1}月`;t[a]&&(s.type==="income"?t[a].revenue+=Math.abs(o):s.type==="expense"?t[a].expense+=Math.abs(o):o>0?t[a].revenue+=o:o<0&&(t[a].expense+=Math.abs(o)))});const y=r.map(s=>t[s].revenue-t[s].expense);return{labels:r,revenue:r.map(s=>t[s].revenue),expense:r.map(s=>t[s].expense),profit:y}},{labels:f,revenue:d,expense:x,profit:j}=g(),i=d.reduce((t,r)=>t+r,0),c=x.reduce((t,r)=>t+r,0),m=i-c,v={labels:f,datasets:[{label:"収益",data:d,borderColor:"#06b6d4",backgroundColor:"rgba(6, 182, 212, 0.1)",tension:.4,pointBackgroundColor:"#06b6d4",pointBorderColor:"#06b6d4",pointRadius:0,pointHoverRadius:6,fill:!0},{label:"支出",data:x,borderColor:"#f472b6",backgroundColor:"rgba(244, 114, 182, 0.1)",tension:.4,pointBackgroundColor:"#f472b6",pointBorderColor:"#f472b6",pointRadius:0,pointHoverRadius:6,fill:!0},{label:"利益",data:j,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981",pointRadius:0,pointHoverRadius:6,fill:!0,borderDash:[5,5]}]},N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,color:"#94a3b8",font:{size:12,family:"Inter"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#f8fafc",bodyColor:"#e2e8f0",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10,callbacks:{label:function(t){let r=t.dataset.label||"";return r&&(r+=": "),t.parsed.y!==null&&(r+=t.parsed.y.toLocaleString()+"円"),r}}}},scales:{x:{display:!0,grid:{display:!1,color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"#64748b",font:{size:11}}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"#64748b",font:{size:11},callback:function(t){return t>=1e6?t/1e6+"M":t>=1e3?t/1e3+"k":t}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return e.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"収益・支出・利益推移"}),e.jsxs("div",{className:"flex space-x-1 bg-surface-highlight/50 rounded-lg p-1",children:[e.jsx("button",{className:"text-xs bg-primary/20 text-primary px-3 py-1.5 rounded-md font-medium transition-colors",children:"月次"}),e.jsx("button",{className:"text-xs text-text-muted hover:text-text-main px-3 py-1.5 rounded-md transition-colors",children:"四半期"}),e.jsx("button",{className:"text-xs text-text-muted hover:text-text-main px-3 py-1.5 rounded-md transition-colors",children:"年次"})]})]}),e.jsx("div",{className:"chart-container h-72 w-full",children:e.jsx(k,{data:v,options:N})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"card-metric border-l-secondary bg-surface p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),e.jsx("p",{className:"text-xs text-text-muted font-medium",children:"総収益"}),e.jsxs("p",{className:"text-xs text-success flex items-center gap-1 ml-auto",children:[e.jsx("span",{children:"↑"})," 12.5% vs 先月"]})]}),e.jsxs("p",{className:"text-lg font-bold text-text-main truncate",title:`¥${i.toLocaleString()}`,children:["¥",i.toLocaleString()]})]}),e.jsxs("div",{className:"card-metric border-l-accent bg-surface p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),e.jsx("p",{className:"text-xs text-text-muted font-medium",children:"総支出"}),e.jsxs("p",{className:"text-xs text-error flex items-center gap-1 ml-auto",children:[e.jsx("span",{children:"↓"})," 3.2% vs 先月"]})]}),e.jsxs("p",{className:"text-lg font-bold text-text-main truncate",title:`¥${c.toLocaleString()}`,children:["¥",c.toLocaleString()]})]}),e.jsxs("div",{className:"card-metric border-l-success bg-surface p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-xs text-text-muted font-medium",children:"純利益"}),e.jsxs("p",{className:"text-xs text-success flex items-center gap-1 ml-auto",children:[e.jsx("span",{children:"↑"})," 8.7% vs 先月"]})]}),e.jsxs("p",{className:"text-lg font-bold text-text-main truncate",title:`¥${m.toLocaleString()}`,children:["¥",m.toLocaleString()]})]})]})]})};export{Y as default};
