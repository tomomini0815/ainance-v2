import{c as de,a as xe,r as c,j as e,f as ue,T as Z,H as Y,E as me}from"./index-BcSqN67S.js";import{S as pe}from"./keywordCategoryService-9yZ-pShI.js";import{W as A}from"./wallet-CYNNxUkc.js";import{C as O}from"./clock-DuF-3X6J.js";import{S as G}from"./star-bI2fxHgF.js";import{Z as K}from"./zap-3rtO5KC_.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ge=de("tag",he),we=({transaction:s,onSubmit:E,onCancel:R})=>{var W;const{user:M}=xe(),[a,p]=c.useState({item:(s==null?void 0:s.item)||"",amount:(s==null?void 0:s.amount)||0,date:(s==null?void 0:s.date)||"",category:(s==null?void 0:s.category)||"",type:(s==null?void 0:s.type)||"expense",description:(s==null?void 0:s.description)||"",receipt_url:(s==null?void 0:s.receipt_url)||"",location:(s==null?void 0:s.location)||"",tags:(s==null?void 0:s.tags)||[],recurring:(s==null?void 0:s.recurring)||!1,recurring_frequency:(s==null?void 0:s.recurring_frequency)||"monthly",recurring_start_date:(s==null?void 0:s.recurring_start_date)||new Date().toISOString().split("T")[0],recurring_end_date:(s==null?void 0:s.recurring_end_date)||new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],creator:(s==null?void 0:s.creator)||""}),[k,L]=c.useState(""),[S,J]=c.useState([]),[j,H]=c.useState([]),[D,I]=c.useState([]),[P,z]=c.useState(!1),[V,X]=c.useState(null),[v,q]=c.useState("normal"),[b,B]=c.useState(5),[h,ee]=c.useState("å®šé¡æ³•"),[g,y]=c.useState(100),[U,w]=c.useState(!1),[N,$]=c.useState((s==null?void 0:s.date)||new Date().toISOString().split("T")[0]),T=c.useMemo(()=>{const t=Number(a.amount)||0,r=g/100,l=t*r;if(h==="å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ (ç‰¹ä¾‹)")return l;if(h==="ä¸€æ‹¬å„Ÿå´ (3å¹´)")return l/3;if(b<=0)return 0;const d=l/b,i=new Date(N),n=a.date?new Date(a.date):new Date,o=i.getFullYear(),u=n.getFullYear();if(u<o)return 0;if(u===o){const f=12-(i.getMonth()+1)+1;return d*f/12}else{const x=u-o;if(x>=b){const _=12-(12-(i.getMonth()+1)+1);return x===Math.ceil(b)&&_>0?d*_/12:0}return d}},[a.amount,a.date,N,b,h,g]);c.useEffect(()=>{const t=localStorage.getItem("locationHistory");t&&J(JSON.parse(t));const r=localStorage.getItem("favoriteCategories");r&&H(JSON.parse(r));const l=localStorage.getItem("recentTransactions");l&&I(JSON.parse(l))},[]),c.useEffect(()=>{var t,r,l,d,i,n,o;if(s){if(p({item:s.item||"",amount:s.amount||0,date:s.date||"",category:s.category||"",type:s.type||"expense",description:s.description||"",receipt_url:s.receipt_url||"",location:s.location||"",tags:s.tags||[],recurring:s.recurring||!1,recurring_frequency:s.recurring_frequency||"monthly",recurring_start_date:s.recurring_start_date||new Date().toISOString().split("T")[0],recurring_end_date:s.recurring_end_date||new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],creator:s.creator||""}),(t=s.tags)!=null&&t.includes("depreciation_asset")){q("depreciation");const u=(r=s.description)==null?void 0:r.match(/å–å¾—æ—¥:(\d{4}-\d{2}-\d{2})/);$(u?u[1]:s.date);const x=(l=s.description)==null?void 0:l.match(/äº‹æ¥­å‰²åˆ:(\d+)%/);x&&y(parseInt(x[1],10));const f=(d=s.description)==null?void 0:d.match(/å–å¾—ä¾¡é¡:Â¥([\d,]+)/);f&&p(C=>({...C,amount:parseInt(f[1].replace(/,/g,""),10)}))}else if((i=s.tags)!=null&&i.includes("business_ratio_applied")){const u=(n=s.description)==null?void 0:n.match(/äº‹æ¥­å‰²åˆ: (\d+)%/);if(u){y(parseInt(u[1],10)),w(!0);const x=(o=s.description)==null?void 0:o.match(/æ”¯æ‰•ç·é¡: Â¥([\d,]+)/);x&&p(f=>({...f,amount:parseInt(x[1].replace(/,/g,""),10)}))}}}},[s]),c.useEffect(()=>{h==="å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ (ç‰¹ä¾‹)"&&B(1)},[h]),c.useEffect(()=>{const t=a.category;v==="normal"&&(["å®¶è³ƒ","åœ°ä»£å®¶è³ƒ"].includes(t)?(w(!0),y(30)):["æ°´é“ä»£","ã‚¬ã‚¹ä»£","é›»æ°—ä»£","æ°´é“å…‰ç†±è²»"].includes(t)?(w(!0),y(20)):["ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šæ–™","é›»è©±æ–™é‡‘","é€šä¿¡è²»"].includes(t)?(w(!0),y(50)):(w(!1),y(100)))},[a.category,v]);const te=c.useMemo(()=>[...new Set([...j,...pe])],[j]),se=[1e3,3e3,5e3,1e4,3e4],m=t=>{const{name:r,value:l,type:d}=t.target,i=d==="checkbox"?t.target.checked:void 0;p(n=>{const o={...n,[r]:d==="checkbox"?i:l};return r==="item"&&l==="å½¹å“¡å ±é…¬"&&(o.category="å½¹å“¡å ±é…¬"),o})},re=t=>{p(r=>({...r,amount:t})),X(t)},ae=t=>{const r=j.includes(t)?j.filter(l=>l!==t):[...j,t];H(r),localStorage.setItem("favoriteCategories",JSON.stringify(r))},le=t=>{if(p(r=>({...r,location:t})),!S.includes(t)){const r=[t,...S].slice(0,10);J(r),localStorage.setItem("locationHistory",JSON.stringify(r))}},oe=t=>{const r={...t,date:new Date().toISOString().split("T")[0]};p(r)},Q=()=>{var t;k.trim()&&!((t=a.tags)!=null&&t.includes(k.trim()))&&(p(r=>({...r,tags:[...r.tags||[],k.trim()]})),L(""))},ne=t=>{p(r=>{var l;return{...r,tags:((l=r.tags)==null?void 0:l.filter(d=>d!==t))||[]}})},ie=t=>{t.preventDefault(),console.log("å–å¼•ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡é–‹å§‹:",a);let r={...a};if(v==="depreciation"){const n=a.date?new Date(a.date).getFullYear():new Date().getFullYear(),o=a.date||new Date().toISOString().split("T")[0],u=new Date(N).getMonth()+1;let x="";const f=new Date(N).getFullYear(),C=new Date(o).getFullYear();f===C?x=`${12-u+1}ãƒ¶æœˆåˆ†`:x="12ãƒ¶æœˆåˆ†";const _=`
[å›ºå®šè³‡ç”£å°å¸³] å–å¾—æ—¥:${N}, è¨ˆä¸Šæ—¥:${o}, å–å¾—ä¾¡é¡:Â¥${a.amount}, å„Ÿå´æ–¹æ³•:${h}, è€ç”¨å¹´æ•°:${b}å¹´, äº‹æ¥­å‰²åˆ:${g}%, ä»ŠæœŸ(${n}å¹´)å„Ÿå´é¡:Â¥${Math.round(T).toLocaleString()} (${x})`;let F=r.description||"";F=F.replace(/\n\[å›ºå®šè³‡ç”£å°å¸³\].*/g,""),r.description=F+_,r.tags=[...r.tags||[],"depreciation_asset"],r.amount=Math.round(T),console.log(`æ¸›ä¾¡å„Ÿå´è³‡ç”£: å–å¾—ä¾¡é¡ ${a.amount} -> ä»ŠæœŸå„Ÿå´é¡ ${r.amount}`)}else if(U&&g<100&&r.type==="expense"){const n=typeof r.amount=="string"?parseFloat(r.amount):r.amount,o=Math.floor(n*(g/100)),u=` (æ”¯æ‰•ç·é¡: Â¥${n.toLocaleString()}, äº‹æ¥­å‰²åˆ: ${g}%)`;let x=r.description||"";x=x.replace(/\s*\(æ”¯æ‰•ç·é¡:.*?\%\)/g,""),r.description=x+u,r.amount=o,r.tags=[...r.tags||[],"business_ratio_applied"],console.log(`å®¶äº‹æŒ‰åˆ†é©ç”¨: ç·é¡ ${n} -> è¨ˆä¸Šé¡ ${o} (å‰²åˆ ${g}%)`)}if(s){console.log("ç·¨é›†ãƒ¢ãƒ¼ãƒ‰: creatorã®æ¤œè¨¼ã‚’ã‚¹ã‚­ãƒƒãƒ—");const n=[r,...D].slice(0,5);I(n),localStorage.setItem("recentTransactions",JSON.stringify(n));const o={...r};if(!o.type){const u=typeof o.amount=="string"?parseFloat(o.amount):o.amount;o.type=u>0?"income":"expense",console.log("typeãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è‡ªå‹•è¨­å®š:",o.type)}E(o);return}let l="00000000-0000-0000-0000-000000000000";if(M&&M.id)l=M.id,console.log("useAuthã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—:",l);else{console.warn("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚localStorageã‚’ç¢ºèªã—ã¾ã™ã€‚");const n=localStorage.getItem("user");if(n)try{const o=JSON.parse(n);o.id&&(l=o.id,console.log("localStorageã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—:",l))}catch(o){console.error("localStorageã®è§£æã«å¤±æ•—:",o)}}if(console.log("creator IDã‚’è¨­å®š:",l),l==="00000000-0000-0000-0000-000000000000"){console.error("ç„¡åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"),alert("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");return}const d=[r,...D].slice(0,5);I(d),localStorage.setItem("recentTransactions",JSON.stringify(d));const i={...r,creator:l};if(!i.type){const n=typeof i.amount=="string"?parseFloat(i.amount):i.amount;i.type=n>0?"income":"expense",console.log("typeãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è‡ªå‹•è¨­å®š:",i.type)}E(i)},ce=(t,r)=>{if(r==="income")return e.jsx(Z,{className:"w-4 h-4 text-emerald-400"});switch(t){case"é£Ÿè²»":return e.jsx("span",{className:"text-lg",children:"ğŸ½ï¸"});case"äº¤é€šè²»":return e.jsx("span",{className:"text-lg",children:"ğŸš—"});case"æ¶ˆè€—å“è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ›ï¸"});case"é€šä¿¡è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ“±"});case"å…‰ç†±è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ’¡"});case"ä½å±…è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ "});case"åŒ»ç™‚è²»":return e.jsx("span",{className:"text-lg",children:"âš•ï¸"});case"æ•™è‚²è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ“š"});case"å¨¯æ¥½è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ‰"});case"è¡£æœè²»":return e.jsx("span",{className:"text-lg",children:"ğŸ‘•"});case"ç¾å®¹è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ’‡"});case"äº¤éš›è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ"});case"è¨­å‚™è²»":return e.jsx("span",{className:"text-lg",children:"ğŸ› ï¸"});case"è»Šä¸¡è²»":return e.jsx("span",{className:"text-lg",children:"ğŸš—"});default:return e.jsx(A,{className:"w-4 h-4 text-text-muted"})}};return e.jsxs("form",{onSubmit:ie,className:"space-y-6 text-text-main",children:[e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900/60 p-1 rounded-full mb-8 border border-slate-200 dark:border-slate-700/50 w-full shadow-inner backdrop-blur-md",children:[e.jsxs("button",{type:"button",onClick:()=>q("normal"),className:`flex-1 flex items-center justify-center py-2.5 px-2 sm:px-4 rounded-full text-xs sm:text-sm font-bold transition-all duration-500 whitespace-nowrap ${v==="normal"?"bg-white dark:bg-slate-800 text-primary shadow-lg shadow-black/5 dark:shadow-black/20 transform scale-[1.02]":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-black/5 dark:hover:bg-white/5"}`,children:[e.jsx(A,{className:`w-4 h-4 mr-2 transition-colors duration-500 ${v==="normal"?"text-primary":"text-slate-500"}`}),"é€šå¸¸å–å¼•"]}),e.jsxs("button",{type:"button",onClick:()=>q("depreciation"),className:`flex-1 flex items-center justify-center py-2.5 px-2 sm:px-4 rounded-full text-xs sm:text-sm font-bold transition-all duration-500 whitespace-nowrap ${v==="depreciation"?"bg-white dark:bg-slate-800 text-primary shadow-lg shadow-black/5 dark:shadow-black/20 transform scale-[1.02]":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-black/5 dark:hover:bg-white/5"}`,children:[e.jsx(O,{className:`w-4 h-4 mr-2 transition-colors duration-500 ${v==="depreciation"?"text-primary":"text-slate-500"}`}),"æ¸›ä¾¡å„Ÿå´è³‡ç”£"]})]}),v==="normal"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-border pb-4",children:[e.jsx("div",{}),e.jsx("div",{})]}),D.length>0&&!s&&e.jsxs("div",{className:"mb-6 bg-surface-highlight/30 rounded-xl p-4 border border-border",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(O,{className:"w-4 h-4 text-primary mr-2"}),e.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"æœ€è¿‘ã®å–å¼•ã‹ã‚‰ã‚³ãƒ”ãƒ¼"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto custom-scrollbar",children:D.slice(0,3).map((t,r)=>e.jsxs("button",{type:"button",onClick:()=>oe(t),className:"flex items-center justify-between p-3 text-sm bg-surface rounded-lg hover:bg-surface-highlight transition-colors border border-border text-left w-full group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 opacity-80 group-hover:opacity-100 transition-opacity",children:ce(t.category,t.type)}),e.jsx("span",{className:"font-medium text-text-main",children:t.item})]}),e.jsxs("div",{className:t.type==="income"?"text-emerald-400":"text-rose-400",children:[t.type==="income"?"+":"-","Â¥",Math.abs(t.amount).toLocaleString()]})]},r))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"ã‚¿ã‚¤ãƒ—"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>p(t=>({...t,type:"expense"})),className:`flex items-center justify-center px-4 py-2.5 rounded-xl border transition-all ${a.type==="expense"?"bg-rose-500/20 border-rose-500/30 text-rose-400 shadow-lg shadow-rose-500/10":"bg-surface border-border text-text-muted hover:bg-surface-highlight"}`,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"æ”¯å‡º"]}),e.jsxs("button",{type:"button",onClick:()=>p(t=>({...t,type:"income"})),className:`flex items-center justify-center px-4 py-2.5 rounded-xl border transition-all ${a.type==="income"?"bg-emerald-500/20 border-emerald-500/30 text-emerald-400 shadow-lg shadow-emerald-500/10":"bg-surface border-border text-text-muted hover:bg-surface-highlight"}`,children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"åå…¥"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"æ—¥ä»˜"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 text-text-muted w-4 h-4 pointer-events-none z-10"}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:m,className:"w-full min-w-0 appearance-none pl-10 pr-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"ã‚«ãƒ†ã‚´ãƒª(å‹˜å®šç§‘ç›®)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"category",value:a.category,onChange:m,className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main appearance-none transition-all",required:!0,children:[e.jsx("option",{value:"",className:"bg-surface-highlight text-text-muted",children:"ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ"}),e.jsx("option",{value:"æ¥­å‹™å§”è¨—åå…¥",className:"bg-surface-highlight",children:"æ¥­å‹™å§”è¨—åå…¥"}),e.jsx("option",{value:"çµ¦ä¸",className:"bg-surface-highlight",children:"çµ¦ä¸"}),te.filter(t=>t!=="æ¥­å‹™å§”è¨—åå…¥"&&t!=="çµ¦ä¸").map(t=>e.jsx("option",{value:t,className:"bg-surface-highlight text-text-main",children:t},t))]}),a.category&&e.jsx("button",{type:"button",onClick:()=>ae(a.category),className:"absolute right-10 top-1/2 transform -translate-y-1/2 text-text-muted hover:text-yellow-400 transition-colors",children:e.jsx(G,{className:`w-4 h-4 ${j.includes(a.category)?"fill-yellow-400 text-yellow-400":""}`})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx(K,{className:"w-4 h-4 text-text-muted"})})]}),j.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:j.slice(0,5).map(t=>e.jsxs("button",{type:"button",onClick:()=>p(r=>({...r,category:t})),className:`px-2.5 py-1 text-xs rounded-lg flex items-center transition-all ${a.category===t?"bg-primary/20 text-primary border border-primary/30":"bg-surface text-text-muted hover:bg-surface-highlight border border-border"}`,children:[e.jsx(G,{className:"w-3 h-3 mr-1.5 fill-yellow-400 text-yellow-400"}),t]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å–å¼•é …ç›®"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"item",list:"items-list",value:a.item,onChange:m,placeholder:"å–å¼•é …ç›®ã‚’å…¥åŠ›ã¾ãŸã¯é¸æŠ",className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",required:!0}),e.jsxs("datalist",{id:"items-list",children:[e.jsx("option",{value:"å£²ä¸Š"}),e.jsx("option",{value:"å½¹å“¡å ±é…¬"}),e.jsx("option",{value:"ã‚³ãƒ³ãƒ“ãƒ‹è²·ã„ç‰©"}),e.jsx("option",{value:"é£²é£Ÿä»£"}),e.jsx("option",{value:"äº‹å‹™ç”¨å“"}),e.jsx("option",{value:"ã‚³ãƒ¼ãƒ’ãƒ¼ä»£"}),e.jsx("option",{value:"æ–°èä»£"}),e.jsx("option",{value:"æ›¸ç±ä»£"}),e.jsx("option",{value:"åˆ‡æ‰‹ä»£"}),e.jsx("option",{value:"å®…é…ä¾¿ä»£"}),e.jsx("option",{value:"é›»æ°—ä»£"}),e.jsx("option",{value:"å®¶è³ƒ"}),e.jsx("option",{value:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šæ–™"}),e.jsx("option",{value:"é›»è©±æ–™é‡‘"}),e.jsx("option",{value:"æºå¸¯ä»£"}),e.jsx("option",{value:"æ°´é“ä»£"}),e.jsx("option",{value:"ã‚¬ã‚¹ä»£"}),e.jsx("option",{value:"å‡ºå¼µè²»"}),e.jsx("option",{value:"äº¤é€šè²»"}),e.jsx("option",{value:"é›»è»Šä»£"}),e.jsx("option",{value:"ç‡ƒæ–™ä»£"}),e.jsx("option",{value:"ä¿®ç†ä»£"}),e.jsx("option",{value:"é«˜é€Ÿé“è·¯æ–™é‡‘"}),e.jsx("option",{value:"å›ºå®šè³‡ç”£ç¨"}),e.jsx("option",{value:"è‡ªå‹•è»Šç¨"}),e.jsx("option",{value:"å°ç´™ç¨"}),e.jsx("option",{value:"ãƒãƒ©ã‚·ä½œæˆè²»"}),e.jsx("option",{value:"ã‚¦ã‚§ãƒ–åºƒå‘Šè²»"}),e.jsx("option",{value:"çœ‹æ¿è¨­ç½®è²»"}),e.jsx("option",{value:"è´ˆç­”å“ä»£"}),e.jsx("option",{value:"ç«ç½ä¿é™ºæ–™"}),e.jsx("option",{value:"ç”Ÿå‘½ä¿é™ºæ–™"}),e.jsx("option",{value:"æŒ¯è¾¼æ‰‹æ•°æ–™"}),e.jsx("option",{value:"ç¨ç†å£«å ±é…¬"}),e.jsx("option",{value:"ãƒ‡ã‚¶ã‚¤ãƒ³å§”è¨—è²»"}),e.jsx("option",{value:"ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºè²»"}),e.jsx("option",{value:"æ¥­å‹™ãƒ„ãƒ¼ãƒ«"}),e.jsx("option",{value:"ã‚µãƒ–ã‚¹ã‚¯"}),e.jsx("option",{value:"å°‘é¡è²»ç”¨"}),e.jsx("option",{value:"ç‚ºæ›¿"}),e.jsx("option",{value:"æš—å·è³‡ç”£"})]}),e.jsx("div",{className:"absolute right-3.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx(K,{className:"w-4 h-4 text-text-muted"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"é‡‘é¡"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"amount",value:a.amount||"",onChange:m,onFocus:()=>z(!0),onBlur:()=>setTimeout(()=>z(!1),200),className:"w-full pl-4 pr-10 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main placeholder-text-muted transition-all",required:!0,min:"0",step:"1"}),e.jsx("span",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-text-muted text-sm pointer-events-none",children:"å††"}),P&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full bg-surface border border-border rounded-xl shadow-xl z-20 p-3 animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"text-xs text-text-muted mb-2",children:"ã‚¯ã‚¤ãƒƒã‚¯å…¥åŠ›:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(t=>e.jsxs("button",{type:"button",onClick:()=>re(t),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${V===t?"bg-primary text-white shadow-lg shadow-primary/20":"bg-surface-highlight text-text-secondary hover:bg-surface-highlight border border-border"}`,children:[t.toLocaleString(),"å††"]},t))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å ´æ‰€"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"location",value:a.location,onChange:m,placeholder:"å ´æ‰€ã‚’å…¥åŠ›",className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main placeholder-text-muted transition-all",list:"location-options"}),e.jsxs("datalist",{id:"location-options",children:[e.jsx("option",{value:"è‡ªå®…"}),e.jsx("option",{value:"ã‚ªãƒ•ã‚£ã‚¹"}),e.jsx("option",{value:"ã‚³ãƒ³ãƒ“ãƒ‹"}),e.jsx("option",{value:"ã‚¹ãƒ¼ãƒ‘ãƒ¼"}),e.jsx("option",{value:"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³"}),e.jsx("option",{value:"é§…"}),e.jsx("option",{value:"éŠ€è¡Œ"}),e.jsx("option",{value:"ç—…é™¢"}),e.jsx("option",{value:"å­¦æ ¡"}),e.jsx("option",{value:"ã‚¸ãƒ "}),e.jsx("option",{value:"ç¾å®¹é™¢"})]})]}),S.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-muted mb-1.5",children:"æœ€è¿‘ã®å ´æ‰€"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,5).map(t=>e.jsx("button",{type:"button",onClick:()=>le(t),className:`px-2.5 py-1 text-xs rounded-lg transition-all ${a.location===t?"bg-primary/20 text-primary border border-primary/30":"bg-surface text-text-muted hover:bg-surface-highlight border border-border"}`,children:t},t))})]})]})]}),U&&a.type==="expense"&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-800/30 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"å®¶äº‹æŒ‰åˆ† (äº‹æ¥­åˆ©ç”¨å‰²åˆ)"]}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"è‡ªå®…å…¼äº‹å‹™æ‰€ã®å®¶è³ƒã‚„å…‰ç†±è²»ãªã©ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã¨äº‹æ¥­ã®å…¼ç”¨çµŒè²»ã®å‰²åˆã‚’è¨­å®šã—ã¾ã™ã€‚"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-text-muted",children:"çµŒè²»è¨ˆä¸Šé¡"}),e.jsxs("div",{className:"text-xl font-bold text-primary",children:["Â¥",Math.floor((Number(a.amount)||0)*(g/100)).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:g,onChange:t=>y(Number(t.target.value)),className:"flex-1 h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer dark:bg-blue-800"}),e.jsxs("div",{className:"w-16 text-right font-medium text-text-main",children:[g,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-text-muted mt-1 px-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"èª¬æ˜"}),e.jsx("textarea",{name:"description",value:a.description,onChange:m,rows:2,placeholder:"å–å¼•ã®è©³ç´°ã‚’å…¥åŠ›ï¼ˆä»»æ„ï¼‰",className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-text-main placeholder-text-muted transition-all resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"ã‚¿ã‚°"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(W=a.tags)==null?void 0:W.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-primary/20 text-primary border border-primary/30",children:[e.jsx(ge,{className:"w-3 h-3 mr-1.5"}),t,e.jsx("button",{type:"button",onClick:()=>ne(t),className:"ml-1.5 hover:text-primary/80 transition-colors",children:e.jsx("span",{className:"text-xs",children:"Ã—"})})]},t))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:k,onChange:t=>L(t.target.value),placeholder:"ã‚¿ã‚°ã‚’è¿½åŠ ",className:"flex-1 px-4 py-2.5 bg-surface border border-border border-r-0 rounded-l-xl focus:ring-2 focus:ring-primary focus:border-transparent text-text-main placeholder-text-muted transition-all",onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),Q())}}),e.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2.5 bg-surface-highlight border border-border rounded-r-xl text-text-secondary hover:bg-surface-highlight transition-colors",children:"è¿½åŠ "})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"recurring",checked:a.recurring,onChange:m,className:"h-4 w-4 text-primary focus:ring-primary border-border rounded bg-surface"}),e.jsx("label",{className:"ml-2 block text-sm text-text-secondary",children:"ç¹°ã‚Šè¿”ã—å–å¼•"})]}),a.recurring&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"ç¹°ã‚Šè¿”ã—é »åº¦"}),e.jsxs("select",{name:"recurring_frequency",value:a.recurring_frequency,onChange:m,className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-text-main appearance-none transition-all",children:[e.jsx("option",{value:"daily",className:"bg-surface-highlight",children:"æ—¥æ¬¡"}),e.jsx("option",{value:"weekly",className:"bg-surface-highlight",children:"é€±æ¬¡"}),e.jsx("option",{value:"monthly",className:"bg-surface-highlight",children:"æœˆæ¬¡"}),e.jsx("option",{value:"yearly",className:"bg-surface-highlight",children:"å¹´æ¬¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"é–‹å§‹æ—¥"}),e.jsx("input",{type:"date",name:"recurring_start_date",value:a.recurring_start_date,onChange:m,className:"w-full min-w-0 appearance-none px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"çµ‚äº†æ—¥"}),e.jsx("input",{type:"date",name:"recurring_end_date",value:a.recurring_end_date,onChange:m,className:"w-full min-w-0 appearance-none px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-border",children:[e.jsx("button",{type:"button",onClick:R,className:"btn-tertiary whitespace-nowrap",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsxs("button",{type:"submit",className:"btn-primary px-10 py-3 text-base font-bold shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"+"})," ",s?"æ›´æ–°":"è¨˜éŒ²ã™ã‚‹"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"è³‡ç”£åç§° *"}),e.jsx("input",{type:"text",name:"item",value:a.item,onChange:m,placeholder:"ä¾‹: ãƒ‘ã‚½ã‚³ãƒ³ã€å–¶æ¥­è»Š",className:"w-full px-4 py-3 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all placeholder:text-text-muted/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å–å¾—ä¾¡é¡ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"amount",value:a.amount||"",onChange:m,className:"w-full px-4 py-3 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",placeholder:"0",min:"0",required:!0}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted text-sm",children:"å††"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å–å¾—å¹´æœˆæ—¥"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-4 w-4 text-text-muted"})}),e.jsx("input",{type:"date",value:N,onChange:t=>$(t.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"è¨ˆä¸Šå¹´åº¦ã®æ±ºç®—æ—¥ç­‰"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-4 w-4 text-text-muted"})}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:m,className:"w-full pl-10 pr-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å„Ÿå´æ–¹æ³•"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:t=>ee(t.target.value),className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main appearance-none transition-all cursor-pointer",children:[e.jsx("option",{value:"å®šé¡æ³•",children:"å®šé¡æ³•"}),e.jsx("option",{value:"å®šç‡æ³•",children:"å®šç‡æ³• (è¦å±Šå‡º)"}),e.jsx("option",{value:"ä¸€æ‹¬å„Ÿå´ (3å¹´)",children:"ä¸€æ‹¬å„Ÿå´ (3å¹´)"}),e.jsx("option",{value:"å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ (ç‰¹ä¾‹)",children:"å°‘é¡ç‰¹ä¾‹ (30ä¸‡æœªæº€)"})]}),e.jsx(me,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"è€ç”¨å¹´æ•°"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:b,onChange:t=>B(Number(t.target.value)),min:"1",max:"100",disabled:h==="ä¸€æ‹¬å„Ÿå´ (3å¹´)"||h==="å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ (ç‰¹ä¾‹)",className:`w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all ${h==="ä¸€æ‹¬å„Ÿå´ (3å¹´)"||h==="å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ (ç‰¹ä¾‹)"?"opacity-50 cursor-not-allowed":""}`,required:!0}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted text-sm",children:"å¹´"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"äº‹æ¥­å°‚ç”¨å‰²åˆ (%)"}),e.jsx("input",{type:"number",value:g,onChange:t=>y(Number(t.target.value)),min:"0",max:"100",className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1.5",children:"å‹˜å®šç§‘ç›® (ä»»æ„)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"category",value:a.category,onChange:m,list:"asset-categories",className:"w-full px-4 py-2.5 bg-surface border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent text-sm text-text-main transition-all",placeholder:"ä¾‹: å·¥å…·å™¨å…·å‚™å“"}),e.jsxs("datalist",{id:"asset-categories",children:[e.jsx("option",{value:"å·¥å…·å™¨å…·å‚™å“"}),e.jsx("option",{value:"è»Šä¸¡é‹æ¬å…·"}),e.jsx("option",{value:"æ©Ÿæ¢°è£…ç½®"}),e.jsx("option",{value:"å»ºç‰©ä»˜å±è¨­å‚™"}),e.jsx("option",{value:"ä¸€æ‹¬å„Ÿå´è³‡ç”£"})]})]})]})]}),e.jsx("div",{className:"bg-surface-highlight/50 px-4 py-3 rounded-xl border border-border/50 animate-in fade-in slide-in-from-top-1 duration-300",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-x-6 gap-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider",children:"å„Ÿå´å¹´åº¦"}),e.jsxs("span",{className:"text-sm font-bold text-text-secondary",children:[a.date?new Date(a.date).getFullYear():new Date().getFullYear(),"å¹´åº¦åˆ†",e.jsx("span",{className:"text-[10px] text-text-muted ml-1",children:(()=>{const t=new Date(N),r=a.date?new Date(a.date):new Date,l=t.getFullYear(),d=r.getFullYear();if(d<l)return"(0ãƒ¶æœˆ)";if(d===l)return`(${12-(t.getMonth()+1)+1}ãƒ¶æœˆ)`;const i=d-l;if(i>=b){const n=12-(12-(t.getMonth()+1)+1);return i===Math.ceil(b)&&n>0?`(${n}ãƒ¶æœˆ)`:"(å„Ÿå´æ¸ˆ)"}return"(12ãƒ¶æœˆ)"})()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider",children:"ä»ŠæœŸå„Ÿå´é¡"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:["Â¥",Math.round(T).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"flex justify-end items-center gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:R,className:"btn-tertiary whitespace-nowrap",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsxs("button",{type:"submit",className:"btn-primary px-10 py-3 text-base font-bold shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"+"})," è¿½åŠ ã™ã‚‹"]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-500/30 mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(O,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-blue-800 dark:text-white mb-1",children:"æ¸›ä¾¡å„Ÿå´ã®è¨˜å¸³ã«ã¤ã„ã¦"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-200/80 leading-relaxed",children:"ã“ã“ã§è¨ˆç®—ã•ã‚ŒãŸå„Ÿå´è²»ã®åˆè¨ˆé¡ã¯ã€è‡ªå‹•çš„ã«æç›Šè¨ˆç®—æ›¸ã®ã€Œæ¸›ä¾¡å„Ÿå´è²»ã€ã¨ã—ã¦è¨ˆä¸Šã•ã‚Œã¾ã™ã€‚ 10ä¸‡å††æœªæº€ã®è³‡ç”£ã¯æ¶ˆè€—å“è²»ã¨ã—ã¦å‡¦ç†ã§ãã¾ã™ï¼ˆé’è‰²ç”³å‘Šã®å ´åˆã¯30ä¸‡å††æœªæº€ã‚’å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ã¨ã—ã¦å³æ™‚å„Ÿå´ã§ãã‚‹ç‰¹ä¾‹ã‚‚ã‚ã‚Šã¾ã™ï¼‰ã€‚"})]})]})})]})]})};export{we as T};
