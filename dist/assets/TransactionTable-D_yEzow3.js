import{a as N,r as y,j as e,L as w,k as h,P as v,F as k}from"./index-9K-405_8.js";import{u as T}from"./useMySQLTransactions-CVgGoCb0.js";import{T as u}from"./trending-up-DKe50wEw.js";import{T as g}from"./trending-down-C-3yGz5B.js";const L=({transactions:c,onOpenCreateModal:m,showCreateButton:p=!0})=>{const{currentBusinessType:i}=N(),{transactions:j,loading:b,fetchTransactions:x}=T(i==null?void 0:i.id);y.useEffect(()=>{i!=null&&i.id&&x()},[i,x]);const f=(t,s)=>{const a=typeof s=="string"?parseFloat(s):s,n=!isNaN(a)&&isFinite(a),d=n&&a>0,l=n&&a<0;if(d)return e.jsx(u,{className:"w-4 h-4 text-emerald-400 mr-2"});if(l)return e.jsx(g,{className:"w-4 h-4 text-rose-400 mr-2"});const r="inline-flex items-center justify-center w-6 h-6 rounded-full mr-2 text-xs font-bold";switch(t){case"交通費":return e.jsx("span",{className:`${r} bg-blue-500/20 text-blue-400`,children:"交"});case"食費":return e.jsx("span",{className:`${r} bg-emerald-500/20 text-emerald-400`,children:"食"});case"消耗品費":return e.jsx("span",{className:`${r} bg-purple-500/20 text-purple-400`,children:"消"});case"通信費":return e.jsx("span",{className:`${r} bg-amber-500/20 text-amber-400`,children:"通"});case"光熱費":return e.jsx("span",{className:`${r} bg-rose-500/20 text-rose-400`,children:"光"});default:return e.jsx("span",{className:`${r} bg-slate-500/20 text-text-muted`,children:"他"})}},o=[...c.length>0?c:j].sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,5);return b?e.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"最近の履歴"}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded"})]},s))})]}):e.jsxs("div",{className:"bg-white dark:bg-surface rounded-2xl p-6 border border-border shadow-sm transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-main",children:"最近の履歴"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(w,{to:"/transaction-history",className:"flex items-center text-sm text-primary hover:text-primary/80 font-medium transition-colors",children:["詳細一覧",e.jsx(h,{className:"w-4 h-4 ml-1"})]}),p&&m&&e.jsxs("button",{onClick:m,className:"flex items-center px-3 py-1.5 bg-primary text-white text-sm rounded-lg hover:bg-primary/90 transition-colors shadow-lg shadow-primary/20",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"新規作成"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-text-muted uppercase tracking-wider",children:"項目"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium text-text-muted uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-text-muted uppercase tracking-wider hidden sm:table-cell",children:"日付"}),e.jsx("th",{className:"text-center py-3 px-4 text-xs font-medium text-text-muted uppercase tracking-wider",children:"カテゴリ"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:o.length>0?o.map(t=>{const s=typeof t.amount=="string"?parseFloat(t.amount):typeof t.amount=="number"?t.amount:0,a=!isNaN(s)&&isFinite(s),n=t.type==="income",d=t.type==="expense",l=n||a&&s>0,r=d||a&&s<0;return e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[f(t.category,s),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-main text-sm group-hover:text-white transition-colors",children:t.item}),e.jsx("div",{className:"text-xs text-text-muted sm:hidden mt-0.5",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})})]})]})}),e.jsx("td",{className:"py-4 px-4 text-right font-medium",children:e.jsxs("div",{className:"flex items-center justify-end",children:[l?e.jsx(u,{className:"w-3 h-3 text-emerald-400 mr-1.5"}):r?e.jsx(g,{className:"w-3 h-3 text-rose-400 mr-1.5"}):null,e.jsxs("span",{className:l?"text-emerald-400":r?"text-rose-400":"text-text-muted",children:[l?"+":"",a?Math.abs(s).toLocaleString():"N/A"]})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-text-muted hidden sm:table-cell",children:new Date(t.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 text-xs font-medium rounded-full border ${l?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":r?"bg-rose-500/10 text-rose-400 border-rose-500/20":"bg-slate-500/10 text-text-muted border-slate-500/20"}`,children:t.category})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-highlight flex items-center justify-center mb-3",children:e.jsx(k,{className:"w-6 h-6 text-slate-600"})}),e.jsx("p",{className:"text-text-muted text-sm",children:"取引がありません"})]})})})})]})}),e.jsxs("div",{className:"flex items-center justify-center mt-6 space-x-2",children:[e.jsx("button",{className:"w-8 h-8 rounded-lg bg-primary text-white flex items-center justify-center text-sm font-medium shadow-lg shadow-primary/25 hover:bg-primary/90 transition-all",children:"1"}),e.jsx("button",{className:"w-8 h-8 rounded-lg bg-surface text-text-muted flex items-center justify-center text-sm font-medium hover:bg-surface-highlight hover:text-text-main transition-all border border-border",children:"2"}),e.jsx("button",{className:"p-2 text-text-muted hover:text-text-secondary transition-colors",children:e.jsx(h,{className:"w-4 h-4"})})]})]})};export{L as default};
