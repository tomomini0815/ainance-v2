import{c as L,r as o,K as I,G as S,j as e,L as ae,S as le,d as M,w as W,T as Y,i as ne,X as O,N as ie}from"./index-Ca_aGh3E.js";import{A as de}from"./arrow-left-w2g22jH0.js";import{A as ce}from"./activity-CI67SULX.js";import{D as oe}from"./database-DIR99efK.js";import{G as xe}from"./gauge-pxn2xN7G.js";import{B as G}from"./brain-Du1focfm.js";import{T as me}from"./trophy-Blg4Gi3p.js";import{C as he}from"./chart-pie-bQ_sTmMB.js";import{R as ue}from"./refresh-cw-DM6F7XVr.js";import{S as U}from"./square-B-A-P8UZ.js";import{C as Z}from"./clock-Cd1rbSlJ.js";import{E as fe}from"./eye-CZS6tQ3w.js";import{L as pe}from"./lightbulb-BIeQBRRL.js";import{S as ge}from"./star-BJzXCY4P.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],be=L("award",je);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ee=L("cpu",Ne);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ye=L("globe",ve);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ke=L("rocket",we);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V=L("square-check",Ce),_e=()=>{const[v,m]=o.useState([]),[p,c]=o.useState([]),[h,g]=o.useState(!1),T=o.useCallback(async()=>{g(!0);try{const n=new Promise((k,j)=>setTimeout(()=>j(new Error("データ取得がタイムアウトしました")),1e4)),a=I.from("transactions").select("*").order("date",{ascending:!1}),x=I.from("ai_transactions").select("*").order("created_at",{ascending:!1}),[i,u]=await Promise.race([Promise.all([a,x]),n.then(()=>{throw new Error("タイムアウト")})]);i.error?(console.error(`取引履歴の取得に失敗しました: ${i.error.message}`),m([])):m(i.data||[]),u.error?(console.error(`AI取引履歴の取得に失敗しました: ${u.error.message}`),c([])):c(u.data||[])}catch(n){console.error("データ取得中にエラーが発生しました:",n.message),m([]),c([])}finally{g(!1)}},[]),y=async n=>{try{const x={...n,creator:"00000000-0000-0000-0000-000000000000",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:i,error:u}=await I.from("transactions").insert(x).select().single();if(u)throw u;const k=i;return m(j=>[k,...j]),S.success("取引が正常に作成されました"),i.id}catch(a){throw console.error("取引の作成に失敗:",a),S.error(`取引の作成に失敗しました: ${a.message}`),a}},z=async(n,a)=>{try{const{data:x,error:i}=await I.from("transactions").update({...a,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(i)throw i;const u=x;m(k=>k.map(j=>j.id===n?u:j)),S.success("取引が正常に更新されました")}catch(x){throw console.error("取引の更新に失敗:",x),S.error(`取引の更新に失敗しました: ${x.message}`),x}},w=async n=>{try{const{error:a}=await I.from("transactions").delete().eq("id",n);if(a)throw a;m(x=>x.filter(i=>i.id!==n)),S.success("取引が正常に削除されました")}catch(a){throw console.error("取引の削除に失敗:",a),S.error(`取引の削除に失敗しました: ${a.message}`),a}},P=async(n,a,x)=>{try{const{data:i,error:u}=await I.from("ai_transactions").update({manual_verified:a,learning_feedback:x,updated_at:new Date().toISOString()}).eq("id",n).select().single();if(u)throw u;const k=i;c(j=>j.map(A=>A.id===n?k:A)),S.success(a?"AI分類を承認しました":"AI分類を却下しました")}catch(i){throw console.error("AI取引の確認に失敗:",i),S.error(`AI取引の確認に失敗しました: ${i.message}`),i}};return o.useEffect(()=>{T()},[T]),{transactions:v,aiTransactions:p,loading:h,fetchAllData:T,createTransaction:y,updateTransaction:z,deleteTransaction:w,verifyAITransaction:P}},Se=({min:v,max:m,onMinChange:p,onMaxChange:c})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[e.jsxs("span",{children:["最小金額: ¥",v||0]}),e.jsxs("span",{children:["最大金額: ¥",m||"∞"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"range",min:"0",max:"1000000",step:"1000",value:v||0,onChange:h=>p(h.target.value),className:"flex-1 h-2 bg-surface-highlight rounded-lg appearance-none cursor-pointer"}),e.jsx("input",{type:"range",min:"0",max:"1000000",step:"1000",value:m||1e6,onChange:h=>c(h.target.value),className:"flex-1 h-2 bg-surface-highlight rounded-lg appearance-none cursor-pointer"})]})]}),Te=({onSelect:v})=>{const m=c=>{const h=new Date;return h.setDate(h.getDate()+c),h.toISOString().split("T")[0]},p=c=>{const h=m(0),g=m(-c);v(g,h)};return e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("button",{onClick:()=>p(0),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"今日"}),e.jsx("button",{onClick:()=>p(6),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去7日間"}),e.jsx("button",{onClick:()=>p(29),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去30日間"}),e.jsx("button",{onClick:()=>p(89),className:"px-2 py-1 text-xs bg-surface-highlight text-text-muted rounded hover:bg-border transition-colors",children:"過去90日間"})]})},Ue=()=>{const{aiTransactions:v,loading:m,verifyAITransaction:p}=_e(),[c,h]=o.useState(""),[g,T]=o.useState(""),[y,z]=o.useState(""),[w,P]=o.useState(""),[n,a]=o.useState([]),[x,i]=o.useState(!0),[u,k]=o.useState(!0),[j,A]=o.useState(""),[C,J]=o.useState({min:"",max:""}),H=()=>{h(""),T(""),z(""),P("")};o.useEffect(()=>{a([])},[c,g,y,w,C]);const d=o.useMemo(()=>v.filter(s=>{var E,D;const t=s.item.toLowerCase().includes(c.toLowerCase())||((E=s.location)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))||((D=s.original_text)==null?void 0:D.toLowerCase().includes(c.toLowerCase())),b=!g||s.ai_category===g;let N=!0;if(y){const _=s.confidence;switch(y){case"high":N=_>=90;break;case"medium":N=_>=70&&_<90;break;case"low":N=_<70;break}}let F=!0;if(w)switch(w){case"verified":F=s.manual_verified===!0;break;case"unverified":F=s.manual_verified===!1;break}let R=!0;if(C.min||C.max){const _=Number(C.min)||0,B=Number(C.max)||1/0;R=s.amount>=_&&s.amount<=B}return t&&b&&N&&F&&R}),[v,c,g,y,w,C]),r=o.useMemo(()=>{const s=d.length,t=d.filter(l=>l.manual_verified).length,b=s>0?d.reduce((l,f)=>l+f.confidence,0)/s:0,N=d.filter(l=>l.confidence>=90).length,F=d.filter(l=>l.confidence>=70&&l.confidence<90).length,R=d.filter(l=>l.confidence<70).length,E=d.reduce((l,f)=>(l[f.ai_category]||(l[f.ai_category]={total:0,verified:0,totalConfidence:0}),l[f.ai_category].total++,l[f.ai_category].totalConfidence+=f.confidence,f.manual_verified&&l[f.ai_category].verified++,l),{}),D=Math.min(100,t/Math.max(s,1)*100),_=b*(D/100),B=s>0?d.reduce((l,f)=>l+(f.processing_time||.5),0)/s:0,q=d.filter(l=>new Date(l.created_at)>new Date(Date.now()-10080*60*1e3)),re=(q.length>0?q.reduce((l,f)=>l+f.confidence,0)/q.length:0)-b;return{totalTransactions:s,verifiedCount:t,verificationRate:s>0?t/s*100:0,averageConfidence:b,highConfidenceCount:N,mediumConfidenceCount:F,lowConfidenceCount:R,highConfidenceRate:s>0?N/s*100:0,categoryAccuracy:E,learningProgress:D,aiMaturity:_,averageProcessingTime:B,weeklyImprovement:re,recentTransactions:q.length}},[d]),K=s=>s>=90?"text-green-600 bg-green-100":s>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",X=s=>s>=95?{color:"bg-emerald-500",label:"最高精度"}:s>=90?{color:"bg-green-500",label:"高精度"}:s>=80?{color:"bg-surface-highlight0",label:"良好"}:s>=70?{color:"bg-yellow-500",label:"中程度"}:{color:"bg-red-500",label:"要確認"},Q=s=>{a(t=>t.includes(s)?t.filter(b=>b!==s):[...t,s])},se=()=>{n.length===d.length?a([]):a(d.map(s=>s.id))},$=async(s,t)=>{await p(s,t,j),A("")},te=()=>{const s=d.filter(t=>t.confidence>=90&&!t.manual_verified).map(t=>t.id);if(s.length===0){alert("高信頼度の未確認取引がありません");return}confirm(`信頼度90%以上の${s.length}件を一括承認しますか？`)&&s.forEach(t=>p(t,!0,"スマート一括承認"))};return m?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 lg:mb-0",children:[e.jsx(ae,{to:"/dashboard",className:"mr-4 p-2 rounded-lg bg-surface hover:bg-surface-highlight transition-colors",children:e.jsx(de,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-text-main mb-2",children:["AI自動仕分けシステム",e.jsx("span",{className:"ml-3 text-sm bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full",children:"v2.0 Pro"})]}),e.jsx("p",{className:"text-text-muted",children:"次世代機械学習による高精度な取引分類と継続的な学習改善"}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"リアルタイム学習"})]}),e.jsxs("div",{className:"flex items-center text-sm text-primary",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ニューラルネットワーク"})]}),e.jsxs("div",{className:"flex items-center text-sm text-purple-600",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ビッグデータ分析"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 lg:mt-0",children:[e.jsxs("button",{onClick:()=>k(!u),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors flex items-center space-x-2",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"パフォーマンス"})]}),e.jsxs("button",{onClick:()=>i(!x),className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-colors flex items-center space-x-2",children:[e.jsx(G,{size:18}),e.jsx("span",{children:"学習詳細"})]}),e.jsxs("button",{onClick:te,className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(le,{size:18}),e.jsx("span",{children:"スマート承認"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-orange-100 to-red-100 px-4 py-2 rounded-lg border border-orange-200",children:[e.jsx(ke,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-orange-800 font-medium",children:"AI分析システム稼働中"})]})]})]}),x&&e.jsxs("div",{className:"mb-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"AI分析総数"}),e.jsx("p",{className:"text-2xl font-bold text-text-main",children:r.totalTransactions}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(G,{className:"w-4 h-4 text-blue-500 mr-1"}),e.jsx("span",{className:"text-xs text-primary",children:"自動分析"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"学習完了率"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[r.verificationRate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(M,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:[r.verifiedCount,"件確認済み"]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"平均信頼度"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[r.averageConfidence.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(W,{className:"w-4 h-4 text-purple-500 mr-1"}),e.jsx("span",{className:"text-xs text-purple-600",children:"AI精度"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"AI成熟度"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[r.aiMaturity.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(be,{className:"w-4 h-4 text-orange-500 mr-1"}),e.jsx("span",{className:"text-xs text-orange-600",children:"総合スコア"})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-indigo-500/10 to-surface-highlight0/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-text-muted",children:"週間改善"}),e.jsxs("p",{className:`text-2xl font-bold ${r.weeklyImprovement>=0?"text-green-600":"text-red-600"}`,children:[r.weeklyImprovement>=0?"+":"",r.weeklyImprovement.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Y,{className:"w-4 h-4 text-indigo-500 mr-1"}),e.jsx("span",{className:"text-xs text-indigo-600",children:"学習速度"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-primary"}),"処理パフォーマンス"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"平均処理時間"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[r.averageProcessingTime.toFixed(2),"秒"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"処理済み件数"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:r.totalTransactions.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"精度向上率"}),e.jsxs("span",{className:"text-lg font-bold text-green-500",children:["+",r.weeklyImprovement.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(W,{className:"w-5 h-5 mr-2 text-purple-500"}),"信頼度分析"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"高信頼度 (90%+)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-green-500",children:r.highConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${r.highConfidenceCount/Math.max(r.totalTransactions,1)*100}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"中信頼度 (70-89%)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:r.mediumConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${r.mediumConfidenceCount/Math.max(r.totalTransactions,1)*100}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"低信頼度 (70%未満)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-red-500",children:r.lowConfidenceCount}),e.jsx("div",{className:"ml-2 w-12 bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${r.lowConfidenceCount/Math.max(r.totalTransactions,1)*100}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(me,{className:"w-5 h-5 mr-2 text-green-500"}),"学習成果"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"全体精度"}),e.jsxs("span",{className:"text-lg font-bold text-green-500",children:[r.averageConfidence.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"学習進捗"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[r.learningProgress.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"今週の分析"}),e.jsxs("span",{className:"text-lg font-bold text-purple-500",children:[r.recentTransactions,"件"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-6 flex items-center",children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"カテゴリ別AI精度分析"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(r.categoryAccuracy).map(([s,t])=>e.jsxs("div",{className:"bg-background p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-text-main",children:s}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[(t.totalConfidence/t.total).toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"処理件数:"}),e.jsxs("span",{className:"font-medium",children:[t.total,"件"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"確認済み:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[t.verified,"件"]})]}),e.jsx("div",{className:"w-full bg-border rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${t.totalConfidence/t.total}%`}})})]})]},s))})]})]}),e.jsx("div",{className:"bg-surface p-6 rounded-xl shadow-sm border border-border mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"項目・場所・元テキストで検索...",value:c,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:g,onChange:s=>T(s.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべてのカテゴリ"}),e.jsx("option",{value:"交通費",children:"交通費"}),e.jsx("option",{value:"食費",children:"食費"}),e.jsx("option",{value:"消耗品費",children:"消耗品費"}),e.jsx("option",{value:"通信費",children:"通信費"}),e.jsx("option",{value:"光熱費",children:"光熱費"}),e.jsx("option",{value:"その他",children:"その他"})]}),e.jsxs("select",{value:y,onChange:s=>z(s.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべての信頼度"}),e.jsx("option",{value:"high",children:"高信頼度 (90%以上)"}),e.jsx("option",{value:"medium",children:"中信頼度 (70-89%)"}),e.jsx("option",{value:"low",children:"低信頼度 (70%未満)"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("select",{value:w,onChange:s=>P(s.target.value),className:"px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"すべての状態"}),e.jsx("option",{value:"verified",children:"確認済み"}),e.jsx("option",{value:"unverified",children:"未確認"})]}),e.jsx(Te,{onSelect:()=>{}})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"金額範囲"}),e.jsx(Se,{min:C.min,max:C.max,onMinChange:s=>J(t=>({...t,min:s})),onMaxChange:s=>J(t=>({...t,max:s}))})]}),(c||g||y||w)&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:H,className:"flex items-center text-sm text-text-muted hover:text-text-main",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"フィルターをクリア"]})}),n.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 pt-4 border-t border-border",children:[e.jsxs("span",{className:"text-sm text-text-muted",children:[n.length,"件選択中"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(M,{size:16}),e.jsx("span",{children:"一括承認"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-red-700 hover:to-pink-700 transition-colors flex items-center space-x-2",children:[e.jsx(O,{size:16}),e.jsx("span",{children:"一括却下"})]})]})]})]})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"block md:hidden space-y-4 p-4",children:d.length>0?d.map(s=>{const t=X(s.confidence);return e.jsxs("div",{className:"bg-surface p-4 rounded-lg shadow-sm border border-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Q(s.id),className:"mr-3",children:n.includes(s.id)?e.jsx(V,{className:"w-5 h-5 text-primary"}):e.jsx(U,{className:"w-5 h-5 text-text-muted"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-text-main flex items-center",children:[s.item,e.jsx("div",{className:`ml-2 w-2 h-2 rounded-full ${t.color}`})]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(s.created_at).toLocaleDateString("ja-JP")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-medium text-lg ${s.ai_category==="売上"||s.ai_category==="給与"||s.ai_category==="雑収入"?"text-green-500":"text-text-main"}`,children:["¥",s.amount.toLocaleString()]}),e.jsx("div",{className:"mt-1",children:s.manual_verified?e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800",children:[e.jsx(M,{size:10,className:"mr-1"}),"確認済"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:[e.jsx(Z,{size:10,className:"mr-1"}),"未確認"]})})]})]}),e.jsxs("div",{className:"space-y-2 mt-3 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"AI分類:"}),e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:s.ai_category})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"信頼度:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex px-2 py-0.5 text-xs font-bold rounded-full ${K(s.confidence)}`,children:[s.confidence,"%"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full text-white ${t.color}`,children:t.label})]})]}),s.ai_suggestions&&s.ai_suggestions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.ai_suggestions.slice(0,3).map((b,N)=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded",children:b},N))}),e.jsx("div",{className:"flex justify-end space-x-2 mt-3",children:s.manual_verified?e.jsx("button",{onClick:()=>$(s.id,!1),className:"text-xs text-text-muted hover:text-text-main underline",children:"修正する"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(s.id,!0),className:"p-3 bg-green-50 text-green-600 rounded-full hover:bg-green-100",children:e.jsx(M,{size:18})}),e.jsx("button",{onClick:()=>$(s.id,!1),className:"p-3 bg-red-50 text-red-600 rounded-full hover:bg-red-100",children:e.jsx(O,{size:18})})]})})]})]},s.id)}):e.jsx("div",{className:"text-center py-12 text-text-muted",children:e.jsx("p",{children:"該当する取引が見つかりませんでした"})})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsxs("button",{onClick:se,className:"flex items-center space-x-2 text-sm font-medium text-text-main",children:[n.length===d.length&&d.length>0?e.jsx(V,{className:"w-4 h-4 text-primary"}):e.jsx(U,{className:"w-4 h-4 text-text-muted"}),e.jsx("span",{children:"選択"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-text-main",children:"取引項目"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-text-main",children:"金額"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"AI分類"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"信頼度"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-text-main",children:"詳細情報"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"確認状態"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-medium text-text-main",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:d.length>0?d.map(s=>{const t=X(s.confidence);return e.jsxs("tr",{className:"hover:bg-background transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>Q(s.id),className:"flex items-center",children:n.includes(s.id)?e.jsx(V,{className:"w-4 h-4 text-primary"}):e.jsx(U,{className:"w-4 h-4 text-text-muted"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-text-main flex items-center",children:[s.item,e.jsx("div",{className:`ml-2 w-2 h-2 rounded-full ${t.color}`})]}),e.jsxs("div",{className:"text-sm text-text-muted mt-1 bg-background px-2 py-1 rounded",children:["元: ",s.original_text]}),e.jsx("div",{className:"text-[10px] text-text-muted mt-0.5 font-medium",children:s.ai_category}),s.ai_suggestions&&s.ai_suggestions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.ai_suggestions.slice(0,2).map((b,N)=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded",children:b},N))}),s.receipt_url&&e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(fe,{className:"w-3 h-3 text-text-muted mr-1"}),e.jsx("span",{className:"text-xs text-text-muted",children:"レシート添付"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`font-medium text-lg ${s.ai_category==="売上"||s.ai_category==="給与"||s.ai_category==="雑収入"?"text-green-500":"text-text-main"}`,children:["¥",s.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800",children:s.ai_category})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex px-3 py-1 text-sm font-bold rounded-full ${K(s.confidence)}`,children:[s.confidence,"%"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full text-white ${t.color}`,children:t.label})]}),e.jsx("div",{className:"w-20 bg-border rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.confidence>=90?"bg-gradient-to-r from-green-400 to-green-600":s.confidence>=70?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-red-400 to-red-600"}`,style:{width:`${s.confidence}%`}})}),s.processing_time&&e.jsxs("div",{className:"text-xs text-text-muted",children:[s.processing_time.toFixed(2),"秒"]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-text-main",children:e.jsxs("div",{className:"space-y-1",children:[s.location&&e.jsxs("div",{className:"flex items-center text-xs text-text-muted",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),s.location]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(s.created_at).toLocaleDateString("ja-JP")})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:s.manual_verified?e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-green-100 to-emerald-100 text-green-800",children:[e.jsx(M,{size:12,className:"mr-1"}),"確認済み"]}),s.learning_feedback&&e.jsx("div",{className:"text-xs text-text-muted max-w-20 truncate",title:s.learning_feedback,children:"フィードバック有り"})]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800",children:[e.jsx(Z,{size:12,className:"mr-1"}),"未確認"]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:!s.manual_verified&&e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>$(s.id,!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white p-3 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-colors",title:"承認",children:e.jsx(M,{size:18})}),e.jsx("button",{onClick:()=>$(s.id,!1),className:"bg-gradient-to-r from-red-500 to-pink-500 text-white p-3 rounded-lg hover:from-red-600 hover:to-pink-600 transition-colors",title:"却下",children:e.jsx(O,{size:18})})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(G,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-text-main mb-2",children:"AI分析データが見つかりません"}),e.jsx("p",{className:"text-text-muted max-w-md",children:"検索条件に一致するAI分析データがありません。検索条件を変更するか、新しいデータの分析をお待ちください。"}),e.jsx("button",{onClick:H,className:"mt-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-colors",children:"フィルターをクリア"})]})})})})]})})]}),e.jsx("div",{className:"mt-8 bg-surface p-8 rounded-xl border border-border",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-yellow-500"}),"AI学習システム"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"確認済み取引:"}),e.jsxs("span",{className:"font-semibold text-text-main",children:[r.verifiedCount,"件"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"平均精度:"}),e.jsxs("span",{className:"font-semibold text-purple-500",children:[r.averageConfidence.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"高精度分析:"}),e.jsxs("span",{className:"font-semibold text-green-500",children:[r.highConfidenceCount,"件"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"処理速度:"}),e.jsxs("span",{className:"font-semibold text-primary",children:[r.averageProcessingTime.toFixed(2),"秒"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2 text-blue-500"}),"学習進捗"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-text-muted",children:"全体進捗"}),e.jsxs("span",{className:"font-semibold text-primary",children:[r.learningProgress.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-surface rounded-full h-4 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-4 rounded-full transition-all duration-1000 relative overflow-hidden",style:{width:`${r.learningProgress}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-text-muted",children:"AI成熟度"}),e.jsxs("span",{className:"font-semibold text-orange-500",children:[r.aiMaturity.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-surface rounded-full h-4 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-4 rounded-full transition-all duration-1000 relative overflow-hidden",style:{width:`${r.aiMaturity}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 mr-2 text-yellow-500"}),"今週のハイライト"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"新規分析"}),e.jsxs("span",{className:"font-bold text-primary",children:[r.recentTransactions,"件"]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:"過去7日間"})]}),e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"精度向上"}),e.jsxs("span",{className:`font-bold ${r.weeklyImprovement>=0?"text-green-500":"text-red-500"}`,children:[r.weeklyImprovement>=0?"+":"",r.weeklyImprovement.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:"前週比較"})]})]})]})]})}),e.jsxs("div",{className:"mt-6 bg-surface p-6 rounded-xl shadow-sm border border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-main mb-4 flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"AI学習フィードバック"]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",value:j,onChange:s=>A(s.target.value),placeholder:"AIの分類についてフィードバックを入力してください...",className:"flex-1 px-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("button",{onClick:()=>A(""),className:"bg-background0 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"クリア"})]}),e.jsx("p",{className:"text-sm text-text-muted mt-2",children:"フィードバックはAIの学習に活用され、将来の分類精度向上に貢献します。"})]})]})})};export{Ue as default};
