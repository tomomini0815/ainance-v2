import{r as a,j as e,L as O,P as F,F as S,X as D,S as re,f as ae,T as U,g as le}from"./index-B-if9VQJ.js";import{u as ne}from"./useMySQLTransactions-CvUW-1qb.js";import I from"./TransactionForm-DFgKG8ln.js";import{A as V}from"./arrow-left-DjU9I1l2.js";import{T as P}from"./trending-up-ImEnoBKX.js";import{T as $}from"./trending-down-vR-EKlYd.js";import{D as q,F as ie}from"./funnel-DDleX_lm.js";import"./star-CrMDy7ES.js";import"./calendar-BjnVQe_3.js";import"./zap-CUJ10RwA.js";const pe=()=>{const{transactions:d,loading:H,createTransaction:Q,updateTransaction:X,deleteTransaction:A}=ne(),[b,R]=a.useState(""),[z,o]=a.useState(!1),[g,j]=a.useState(null),[c,N]=a.useState([]),[C,_]=a.useState(!1),[h,B]=a.useState(""),[l,T]=a.useState({start:"",end:""}),[n,L]=a.useState({min:"",max:""}),[M,G]=a.useState("date"),[k,K]=a.useState("desc"),[i,v]=a.useState(1),w=10,W=a.useMemo(()=>{const s=d.map(t=>t.category);return Array.from(new Set(s)).filter(Boolean)},[d]),p=a.useMemo(()=>{let s=[...d];return b&&(s=s.filter(t=>t.item&&t.item.toLowerCase().includes(b.toLowerCase())||t.description&&t.description.toLowerCase().includes(b.toLowerCase())||t.category&&t.category.toLowerCase().includes(b.toLowerCase()))),h&&(s=s.filter(t=>t.category===h)),l.start&&(s=s.filter(t=>t.date>=l.start)),l.end&&(s=s.filter(t=>t.date<=l.end)),n.min&&(s=s.filter(t=>t.amount>=Number(n.min))),n.max&&(s=s.filter(t=>t.amount<=Number(n.max))),s.sort((t,r)=>{let m,y;switch(M){case"amount":m=t.amount,y=r.amount;break;case"item":m=t.item.toLowerCase(),y=r.item.toLowerCase();break;default:m=new Date(t.date),y=new Date(r.date)}return k==="asc"?m>y?1:-1:m<y?1:-1}),s},[d,b,h,l,n,M,k]),f=Math.ceil(p.length/w),u=a.useMemo(()=>{const s=(i-1)*w,t=s+w;return p.slice(s,t)},[p,i]),x=a.useMemo(()=>{const s=d.filter(r=>parseFloat(r.amount)>0).reduce((r,m)=>r+Math.abs(parseFloat(m.amount)),0),t=d.filter(r=>parseFloat(r.amount)<0).reduce((r,m)=>r+Math.abs(parseFloat(m.amount)),0);return{total:d.length,income:s,expense:t,balance:s-t}},[d]),Y=()=>{c.length===u.length?N([]):N(u.map(s=>s.id))},Z=s=>{c.includes(s)?N(c.filter(t=>t!==s)):N([...c,s])},ee=async()=>{if(window.confirm(`${c.length}件の取引を削除してもよろしいですか？`))try{for(const s of c)await A(s);N([])}catch(s){console.error("一括削除に失敗:",s)}},E=async s=>{try{const t=localStorage.getItem("user");if(t)try{const r=JSON.parse(t);s.creator=r.id}catch(r){console.error("ユーザー情報の解析に失敗しました:",r)}await Q(s),o(!1)}catch(t){console.error("取引の作成に失敗:",t)}},se=async s=>{if(g)try{await X(g.id,s),j(null)}catch(t){console.error("取引の更新に失敗:",t)}},te=()=>{B(""),T({start:"",end:""}),L({min:"",max:""}),R("")},J=a.useMemo(()=>{let s=0;return h&&s++,(l.start||l.end)&&s++,(n.min||n.max)&&s++,s},[h,l,n]);return H?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"データを読み込んでいます..."})]})}):!d||d.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(O,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(V,{className:"w-6 h-6 text-gray-600 hover:text-gray-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"取引履歴"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"総取引数"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-gray-900",children:"0"})]}),e.jsx("div",{className:"rounded-lg bg-blue-50 p-3",children:e.jsx(S,{className:"w-6 h-6 text-blue-500"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"収入"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-50 p-3",children:e.jsx(P,{className:"w-6 h-6 text-green-500"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"支出"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-red-600",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-red-50 p-3",children:e.jsx($,{className:"w-6 h-6 text-red-500"})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-5 border border-green-100 bg-green-50 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"収支"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:"¥0"})]}),e.jsx("div",{className:"rounded-lg bg-green-100 p-3",children:e.jsx(q,{className:"w-6 h-6 text-green-500"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center",children:[e.jsx(S,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"取引が見つかりません"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"まだ取引が登録されていないか、条件に一致する取引がありません"}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center mx-auto",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"最初の取引を追加"]})]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"新規取引"}),e.jsx("button",{onClick:()=>{o(!1),j(null)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(D,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx(I,{transaction:g,onSubmit:E,onCancel:()=>{o(!1),j(null)}})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(O,{to:"/dashboard",className:"mr-4 p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(V,{className:"w-6 h-6 text-text-muted hover:text-text-main"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-main",children:"取引履歴"}),e.jsx("p",{className:"text-text-muted mt-1",children:"すべての取引履歴を確認・管理できます"})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"新規取引"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"総取引数"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-text-main",children:x.total})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(S,{className:"w-6 h-6 text-primary"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収入"}),e.jsxs("div",{className:"text-2xl font-bold mt-1 text-green-500",children:["¥",x.income.toLocaleString()]})]}),e.jsx("div",{className:"rounded-lg bg-green-500/10 p-3",children:e.jsx(P,{className:"w-6 h-6 text-green-500"})})]})}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm p-5 border border-border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"支出"}),e.jsxs("div",{className:"text-2xl font-bold mt-1 text-red-500",children:["¥",x.expense.toLocaleString()]})]}),e.jsx("div",{className:"rounded-lg bg-red-500/10 p-3",children:e.jsx($,{className:"w-6 h-6 text-red-500"})})]})}),e.jsx("div",{className:`rounded-xl shadow-sm p-5 border hover:shadow-md transition-shadow ${x.balance>=0?"border-green-500/20 bg-green-500/5":"border-red-500/20 bg-red-500/5"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-muted",children:"収支"}),e.jsxs("div",{className:`text-2xl font-bold mt-1 ${x.balance>=0?"text-green-500":"text-red-500"}`,children:["¥",x.balance.toLocaleString()]})]}),e.jsx("div",{className:`rounded-lg p-3 ${x.balance>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsx(q,{className:`w-6 h-6 ${x.balance>=0?"text-green-500":"text-red-500"}`})})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted w-5 h-5"}),e.jsx("input",{type:"text",value:b,onChange:s=>R(s.target.value),placeholder:"取引内容、カテゴリなどで検索...",className:"w-full pl-10 pr-4 py-2.5 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main placeholder-text-muted"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>_(!C),className:`px-4 py-2.5 text-sm rounded-lg transition-colors flex items-center space-x-2 ${C?"bg-primary/10 text-primary":"bg-surface-highlight text-text-muted hover:bg-border"}`,children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:"フィルタ"}),J>0&&e.jsx("span",{className:"bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:J}),e.jsx(ae,{className:`w-4 h-4 transition-transform ${C?"rotate-180":""}`})]}),(h||l.start||l.end||n.min||n.max)&&e.jsxs("button",{onClick:te,className:"px-4 py-2.5 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"クリア"]})]})]})}),C&&e.jsx("div",{className:"px-4 pb-4 border-t border-border",children:e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"カテゴリ"}),e.jsxs("select",{value:h,onChange:s=>B(s.target.value),className:"input-base",children:[e.jsx("option",{value:"",children:"すべて"}),W.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"開始日"}),e.jsx("input",{type:"date",value:l.start,onChange:s=>T({...l,start:s.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"終了日"}),e.jsx("input",{type:"date",value:l.end,onChange:s=>T({...l,end:s.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最小金額"}),e.jsx("input",{type:"number",value:n.min,onChange:s=>L({...n,min:s.target.value}),className:"input-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"最大金額"}),e.jsx("input",{type:"number",value:n.max,onChange:s=>L({...n,max:s.target.value}),className:"input-base"})]})]})})})]}),e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-border mb-6 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-sm text-text-muted mr-2",children:"ソート:"}),e.jsxs("select",{value:M,onChange:s=>G(s.target.value),className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background focus:bg-surface transition-colors text-text-main",children:[e.jsx("option",{value:"date",children:"日付"}),e.jsx("option",{value:"amount",children:"金額"}),e.jsx("option",{value:"item",children:"項目"})]})]}),e.jsx("button",{onClick:()=>K(k==="asc"?"desc":"asc"),className:"px-3 py-2 text-sm bg-surface-highlight text-text-muted rounded-lg hover:bg-border transition-colors flex items-center",children:k==="asc"?"昇順":"降順"})]}),c.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-text-muted",children:[c.length,"件選択中"]}),e.jsxs("button",{onClick:ee,className:"px-3 py-2 text-sm bg-red-500/10 text-red-600 rounded-lg hover:bg-red-500/20 transition-colors flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"削除"]})]})]})})}),e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-highlight",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider w-12",children:e.jsx("input",{type:"checkbox",checked:c.length===u.length&&u.length>0,onChange:Y,className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"項目"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-text-muted uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider hidden sm:table-cell",children:"日付"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-muted uppercase tracking-wider",children:"カテゴリ"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-text-muted uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-surface divide-y divide-border",children:u.length>0?u.map(s=>e.jsxs("tr",{className:"hover:bg-surface-highlight transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:()=>Z(s.id),className:"rounded border-border text-primary focus:ring-primary h-4 w-4 bg-background"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-main",children:s.item}),e.jsx("div",{className:"text-sm text-text-muted sm:hidden",children:new Date(s.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end",children:[s.type==="income"?e.jsx(P,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx($,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:s.type==="income"?"text-green-500":"text-red-500",children:[s.type==="expense"?"-":"",s.amount.toLocaleString()]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-muted hidden sm:table-cell",children:new Date(s.date).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-medium rounded-full ${s.type==="income"?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:s.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>{j(s),o(!0)},className:"p-2 text-primary hover:text-primary/80 hover:bg-primary/10 rounded-lg transition-colors",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(S,{className:"w-12 h-12 text-text-muted mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-text-main mb-1",children:"取引が見つかりません"}),e.jsx("p",{className:"text-text-muted",children:"条件に一致する取引がありません"})]})})})})]})}),u.length>0&&e.jsxs("div",{className:"bg-surface px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-border",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>v(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"前へ"}),e.jsx("button",{onClick:()=>v(Math.min(f,i+1)),disabled:i===f,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-border text-sm font-medium rounded-md text-text-muted bg-surface hover:bg-surface-highlight disabled:opacity-50",children:"次へ"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsx("span",{className:"font-medium",children:Math.min((i-1)*w+1,p.length)})," 件から ",e.jsx("span",{className:"font-medium",children:Math.min(i*w,p.length)})," 件までを表示中（全 ",e.jsx("span",{className:"font-medium",children:p.length})," 件）"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>v(Math.max(1,i-1)),disabled:i===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"前へ"}),"<"]}),[...Array(Math.min(5,f))].map((s,t)=>{const r=Math.max(1,Math.min(i-2,f-4))+t;return e.jsx("button",{onClick:()=>v(r),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i===r?"z-10 bg-primary/10 border-primary text-primary":"bg-surface border-border text-text-muted hover:bg-surface-highlight"}`,children:r},r)}),e.jsxs("button",{onClick:()=>v(Math.min(f,i+1)),disabled:i===f,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-border bg-surface text-sm font-medium text-text-muted hover:bg-surface-highlight disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"次へ"}),">"]})]})})]})]})]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-surface rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-main",children:g?"取引を編集":"新規取引"}),e.jsx("button",{onClick:()=>{o(!1),j(null)},className:"p-2 rounded-lg hover:bg-surface-highlight transition-colors",children:e.jsx(D,{className:"w-5 h-5 text-text-muted"})})]}),e.jsx(I,{transaction:g,onSubmit:g?se:E,onCancel:()=>{o(!1),j(null)}})]})})})]})};export{pe as default};
